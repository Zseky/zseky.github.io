(function(window){"use strict";Number.prototype.map=function(istart,istop,ostart,ostop){return ostart+(ostop-ostart)*((this-istart)/(istop-istart));};Number.prototype.limit=function(min,max){return Math.min(max,Math.max(min,this));};Number.prototype.round=function(precision){precision=Math.pow(10,precision||0);return Math.round(this*precision)/precision;};Number.prototype.floor=function(){return Math.floor(this);};Number.prototype.ceil=function(){return Math.ceil(this);};Number.prototype.toInt=function(){return(this|0);};Number.prototype.toRad=function(){return(this/180)*Math.PI;};Number.prototype.toDeg=function(){return(this*180)/Math.PI;};Object.defineProperty(Array.prototype,'erase',{value:function(item){for(var i=this.length;i--;){if(this[i]===item){this.splice(i,1);}}
return this;}});Object.defineProperty(Array.prototype,'random',{value:function(item){return this[Math.floor(Math.random()*this.length)];}});Function.prototype.bind=Function.prototype.bind||function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}
var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply((this instanceof fNOP&&oThis?this:oThis),aArgs.concat(Array.prototype.slice.call(arguments)));};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound;};window.ig={game:null,debug:null,version:'1.24',global:window,modules:{},resources:[],ready:false,baked:false,nocache:'',ua:{},prefix:(window.ImpactPrefix||''),lib:'lib/',_current:null,_loadQueue:[],_waitForOnload:0,$:function(selector){return selector.charAt(0)=='#'?document.getElementById(selector.substr(1)):document.getElementsByTagName(selector);},$new:function(name){return document.createElement(name);},copy:function(object){if(!object||typeof(object)!='object'||object instanceof HTMLElement||object instanceof ig.Class){return object;}
else if(object instanceof Array){var c=[];for(var i=0,l=object.length;i<l;i++){c[i]=ig.copy(object[i]);}
return c;}
else{var c={};for(var i in object){c[i]=ig.copy(object[i]);}
return c;}},merge:function(original,extended){for(var key in extended){var ext=extended[key];if(typeof(ext)!='object'||ext instanceof HTMLElement||ext instanceof ig.Class||ext===null){original[key]=ext;}
else{if(!original[key]||typeof(original[key])!='object'){original[key]=(ext instanceof Array)?[]:{};}
ig.merge(original[key],ext);}}
return original;},ksort:function(obj){if(!obj||typeof(obj)!='object'){return[];}
var keys=[],values=[];for(var i in obj){keys.push(i);}
keys.sort();for(var i=0;i<keys.length;i++){values.push(obj[keys[i]]);}
return values;},setVendorAttribute:function(el,attr,val){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);el[attr]=el['ms'+uc]=el['moz'+uc]=el['webkit'+uc]=el['o'+uc]=val;},getVendorAttribute:function(el,attr){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);return el[attr]||el['ms'+uc]||el['moz'+uc]||el['webkit'+uc]||el['o'+uc];},normalizeVendorAttribute:function(el,attr){var prefixedVal=ig.getVendorAttribute(el,attr);if(!el[attr]&&prefixedVal){el[attr]=prefixedVal;}},getImagePixels:function(image,x,y,width,height){var canvas=ig.$new('canvas');canvas.width=image.width;canvas.height=image.height;var ctx=canvas.getContext('2d');ig.System.SCALE.CRISP(canvas,ctx);var ratio=ig.getVendorAttribute(ctx,'backingStorePixelRatio')||1;ig.normalizeVendorAttribute(ctx,'getImageDataHD');var realWidth=image.width/ratio,realHeight=image.height/ratio;canvas.width=Math.ceil(realWidth);canvas.height=Math.ceil(realHeight);ctx.drawImage(image,0,0,realWidth,realHeight);return(ratio===1)?ctx.getImageData(x,y,width,height):ctx.getImageDataHD(x,y,width,height);},module:function(name){if(ig._current){throw("Module '"+ig._current.name+"' defines nothing");}
if(ig.modules[name]&&ig.modules[name].body){throw("Module '"+name+"' is already defined");}
ig._current={name:name,requires:[],loaded:false,body:null};ig.modules[name]=ig._current;ig._loadQueue.push(ig._current);return ig;},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig;},defines:function(body){ig._current.body=body;ig._current=null;ig._initDOMReady();},addResource:function(resource){ig.resources.push(resource);},setNocache:function(set){ig.nocache=set?'?'+Date.now():'';},log:function(){},assert:function(condition,msg){},show:function(name,number){},mark:function(msg,color){},_loadScript:function(name,requiredFrom){ig.modules[name]={name:name,requires:[],loaded:false,body:null};ig._waitForOnload++;var path=ig.prefix+ig.lib+name.replace(/\./g,'/')+'.js'+ig.nocache;var script=ig.$new('script');script.type='text/javascript';script.src=path;script.onload=function(){ig._waitForOnload--;ig._execModules();};script.onerror=function(){throw('Failed to load module '+name+' at '+path+' '+'required from '+requiredFrom);};ig.$('head')[0].appendChild(script);},_execModules:function(){var modulesLoaded=false;for(var i=0;i<ig._loadQueue.length;i++){var m=ig._loadQueue[i];var dependenciesLoaded=true;for(var j=0;j<m.requires.length;j++){var name=m.requires[j];if(!ig.modules[name]){dependenciesLoaded=false;ig._loadScript(name,m.name);}
else if(!ig.modules[name].loaded){dependenciesLoaded=false;}}
if(dependenciesLoaded&&m.body){ig._loadQueue.splice(i,1);m.loaded=true;m.body();modulesLoaded=true;i--;}}
if(modulesLoaded){ig._execModules();}
else if(!ig.baked&&ig._waitForOnload==0&&ig._loadQueue.length!=0){var unresolved=[];for(var i=0;i<ig._loadQueue.length;i++){var unloaded=[];var requires=ig._loadQueue[i].requires;for(var j=0;j<requires.length;j++){var m=ig.modules[requires[j]];if(!m||!m.loaded){unloaded.push(requires[j]);}}
unresolved.push(ig._loadQueue[i].name+' (requires: '+unloaded.join(', ')+')');}
throw("Unresolved (or circular?) dependencies. "+"Most likely there's a name/path mismatch for one of the listed modules "+"or a previous syntax error prevents a module from loading:\n"+
unresolved.join('\n'));}},_DOMReady:function(){if(!ig.modules['dom.ready'].loaded){if(!document.body){return setTimeout(ig._DOMReady,13);}
ig.modules['dom.ready'].loaded=true;ig._waitForOnload--;ig._execModules();}
return 0;},_boot:function(){if(document.location.href.match(/\?nocache/)){ig.setNocache(true);}
ig.ua.pixelRatio=window.devicePixelRatio||1;ig.ua.viewport={width:window.innerWidth,height:window.innerHeight};ig.ua.screen={width:window.screen.availWidth*ig.ua.pixelRatio,height:window.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone|iPod/i.test(navigator.userAgent);ig.ua.iPhone4=(ig.ua.iPhone&&ig.ua.pixelRatio==2);ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.winPhone||/mobile/i.test(navigator.userAgent);ig.ua.touchDevice=(('ontouchstart'in window)||(window.navigator.msMaxTouchPoints));},_initDOMReady:function(){if(ig.modules['dom.ready']){ig._execModules();return;}
ig._boot();ig.modules['dom.ready']={requires:[],loaded:false,body:null};ig._waitForOnload++;if(document.readyState==='complete'){ig._DOMReady();}
else{document.addEventListener('DOMContentLoaded',ig._DOMReady,false);window.addEventListener('load',ig._DOMReady,false);}}};ig.normalizeVendorAttribute(window,'requestAnimationFrame');if(window.requestAnimationFrame){var next=1,anims={};window.ig.setAnimation=function(callback){var current=next++;anims[current]=true;var animate=function(){if(!anims[current]){return;}
window.requestAnimationFrame(animate);callback();};window.requestAnimationFrame(animate);return current;};window.ig.clearAnimation=function(id){delete anims[id];};}
else{window.ig.setAnimation=function(callback){return window.setInterval(callback,1000/60);};window.ig.clearAnimation=function(id){window.clearInterval(id);};}
var initializing=false,fnTest=/xyz/.test(function(){xyz;})?/\bparent\b/:/.*/;var lastClassId=0;window.ig.Class=function(){};var inject=function(prop){var proto=this.prototype;var parent={};for(var name in prop){if(typeof(prop[name])=="function"&&typeof(proto[name])=="function"&&fnTest.test(prop[name])){parent[name]=proto[name];proto[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{proto[name]=prop[name];}}};window.ig.Class.extend=function(prop){var parent=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){if(typeof(prop[name])=="function"&&typeof(parent[name])=="function"&&fnTest.test(prop[name])){prototype[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{prototype[name]=prop[name];}}
function Class(){if(!initializing){if(this.staticInstantiate){var obj=this.staticInstantiate.apply(this,arguments);if(obj){return obj;}}
for(var p in this){if(typeof(this[p])=='object'){this[p]=ig.copy(this[p]);}}
if(this.init){this.init.apply(this,arguments);}}
return this;}
Class.prototype=prototype;Class.prototype.constructor=Class;Class.extend=window.ig.Class.extend;Class.inject=inject;Class.classId=prototype.classId=++lastClassId;return Class;};if(window.ImpactMixin){ig.merge(ig,window.ImpactMixin);}})(window);

// lib/impact/image.js
ig.baked=true;ig.module('impact.image').defines(function(){"use strict";ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:false,failed:false,loadCallback:null,path:'',staticInstantiate:function(path){return ig.Image.cache[path]||null;},init:function(path){this.path=path;this.load();},load:function(loadCallback){if(this.loaded){if(loadCallback){loadCallback(this.path,true);}
return;}
else if(!this.loaded&&ig.ready){this.loadCallback=loadCallback||null;this.data=new Image();this.data.onload=this.onload.bind(this);this.data.onerror=this.onerror.bind(this);this.data.src=ig.prefix+this.path+ig.nocache;}
else{ig.addResource(this);}
ig.Image.cache[this.path]=this;},reload:function(){this.loaded=false;this.data=new Image();this.data.onload=this.onload.bind(this);this.data.src=this.path+'?'+Date.now();},onload:function(event){this.width=this.data.width;this.height=this.data.height;this.loaded=true;if(ig.system.scale!=1){this.resize(ig.system.scale);}
if(this.loadCallback){this.loadCallback(this.path,true);}},onerror:function(event){this.failed=true;if(this.loadCallback){this.loadCallback(this.path,false);}},resize:function(scale){var origPixels=ig.getImagePixels(this.data,0,0,this.width,this.height);var widthScaled=this.width*scale;var heightScaled=this.height*scale;var scaled=ig.$new('canvas');scaled.width=widthScaled;scaled.height=heightScaled;var scaledCtx=scaled.getContext('2d');var scaledPixels=scaledCtx.getImageData(0,0,widthScaled,heightScaled);for(var y=0;y<heightScaled;y++){for(var x=0;x<widthScaled;x++){var index=(Math.floor(y/scale)*this.width+Math.floor(x/scale))*4;var indexScaled=(y*widthScaled+x)*4;scaledPixels.data[indexScaled]=origPixels.data[index];scaledPixels.data[indexScaled+1]=origPixels.data[index+1];scaledPixels.data[indexScaled+2]=origPixels.data[index+2];scaledPixels.data[indexScaled+3]=origPixels.data[index+3];}}
scaledCtx.putImageData(scaledPixels,0,0);this.data=scaled;},draw:function(targetX,targetY,sourceX,sourceY,width,height){if(!this.loaded){return;}
var scale=ig.system.scale;sourceX=sourceX?sourceX*scale:0;sourceY=sourceY?sourceY*scale:0;width=(width?width:this.width)*scale;height=(height?height:this.height)*scale;ig.system.context.drawImage(this.data,sourceX,sourceY,width,height,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),width,height);ig.Image.drawCount++;},drawTile:function(targetX,targetY,tile,tileWidth,tileHeight,flipX,flipY){tileHeight=tileHeight?tileHeight:tileWidth;if(!this.loaded||tileWidth>this.width||tileHeight>this.height){return;}
var scale=ig.system.scale;var tileWidthScaled=Math.floor(tileWidth*scale);var tileHeightScaled=Math.floor(tileHeight*scale);var scaleX=flipX?-1:1;var scaleY=flipY?-1:1;if(flipX||flipY){ig.system.context.save();ig.system.context.scale(scaleX,scaleY);}
ig.system.context.drawImage(this.data,(Math.floor(tile*tileWidth)%this.width)*scale,(Math.floor(tile*tileWidth/this.width)*tileHeight)*scale,tileWidthScaled,tileHeightScaled,ig.system.getDrawPos(targetX)*scaleX-(flipX?tileWidthScaled:0),ig.system.getDrawPos(targetY)*scaleY-(flipY?tileHeightScaled:0),tileWidthScaled,tileHeightScaled);if(flipX||flipY){ig.system.context.restore();}
ig.Image.drawCount++;}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var path in ig.Image.cache){ig.Image.cache[path].reload();}};});

// lib/impact/font.js
ig.baked=true;ig.module('impact.font').requires('impact.image').defines(function(){"use strict";ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(ev){this._loadMetrics(this.data);this.parent(ev);this.height-=2;},widthForString:function(text){if(text.indexOf('\n')!==-1){var lines=text.split('\n');var width=0;for(var i=0;i<lines.length;i++){width=Math.max(width,this._widthForLine(lines[i]));}
return width;}
else{return this._widthForLine(text);}},_widthForLine:function(text){var width=0;for(var i=0;i<text.length;i++){width+=this.widthMap[text.charCodeAt(i)-this.firstChar];}
if(text.length>0){width+=this.letterSpacing*(text.length-1);}
return width;},heightForString:function(text){return text.split('\n').length*(this.height+this.lineSpacing);},draw:function(text,x,y,align){if(typeof(text)!='string'){text=text.toString();}
if(text.indexOf('\n')!==-1){var lines=text.split('\n');var lineHeight=this.height+this.lineSpacing;for(var i=0;i<lines.length;i++){this.draw(lines[i],x,y+i*lineHeight,align);}
return;}
if(align==ig.Font.ALIGN.RIGHT||align==ig.Font.ALIGN.CENTER){var width=this._widthForLine(text);x-=align==ig.Font.ALIGN.CENTER?width/2:width;}
if(this.alpha!==1){ig.system.context.globalAlpha=this.alpha;}
for(var i=0;i<text.length;i++){var c=text.charCodeAt(i);x+=this._drawChar(c-this.firstChar,x,y);}
if(this.alpha!==1){ig.system.context.globalAlpha=1;}
ig.Image.drawCount+=text.length;},_drawChar:function(c,targetX,targetY){if(!this.loaded||c<0||c>=this.indices.length){return 0;}
var scale=ig.system.scale;var charX=this.indices[c]*scale;var charY=0;var charWidth=this.widthMap[c]*scale;var charHeight=this.height*scale;ig.system.context.drawImage(this.data,charX,charY,charWidth,charHeight,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),charWidth,charHeight);return this.widthMap[c]+this.letterSpacing;},_loadMetrics:function(image){this.widthMap=[];this.indices=[];var px=ig.getImagePixels(image,0,image.height-1,image.width,1);var currentWidth=0;for(var x=0;x<image.width;x++){var index=x*4+3;if(px.data[index]>127){currentWidth++;}
else if(px.data[index]<128&&currentWidth){this.widthMap.push(currentWidth);this.indices.push(x-currentWidth);currentWidth=0;}}
this.widthMap.push(currentWidth);this.indices.push(x-currentWidth);}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2};});

// lib/impact/sound.js
ig.baked=true;ig.module('impact.sound').defines(function(){"use strict";ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(!ig.Sound.enabled||!window.Audio){ig.Sound.enabled=false;return;}
var probe=new Audio();for(var i=0;i<ig.Sound.use.length;i++){var format=ig.Sound.use[i];if(probe.canPlayType(format.mime)){this.format=format;break;}}
if(!this.format){ig.Sound.enabled=false;}
if(ig.Sound.enabled&&ig.Sound.useWebAudio){this.audioContext=new AudioContext();this.boundWebAudioUnlock=this.unlockWebAudio.bind(this);ig.system.canvas.addEventListener('touchstart',this.boundWebAudioUnlock,false);ig.system.canvas.addEventListener('mousedown',this.boundWebAudioUnlock,false);}},unlockWebAudio:function(){ig.system.canvas.removeEventListener('touchstart',this.boundWebAudioUnlock,false);ig.system.canvas.removeEventListener('mousedown',this.boundWebAudioUnlock,false);var buffer=this.audioContext.createBuffer(1,1,22050);var source=this.audioContext.createBufferSource();source.buffer=buffer;source.connect(this.audioContext.destination);source.start(0);},load:function(path,multiChannel,loadCallback){if(multiChannel&&ig.Sound.useWebAudio){return this.loadWebAudio(path,multiChannel,loadCallback);}
else{return this.loadHTML5Audio(path,multiChannel,loadCallback);}},loadWebAudio:function(path,multiChannel,loadCallback){var realPath=ig.prefix+path.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[path]){return this.clips[path];}
var audioSource=new ig.Sound.WebAudioSource();this.clips[path]=audioSource;var request=new XMLHttpRequest();request.open('GET',realPath,true);request.responseType='arraybuffer';var that=this;request.onload=function(ev){that.audioContext.decodeAudioData(request.response,function(buffer){audioSource.buffer=buffer;if(loadCallback){loadCallback(path,true,ev);}},function(ev){if(loadCallback){loadCallback(path,false,ev);}});};request.onerror=function(ev){if(loadCallback){loadCallback(path,false,ev);}};request.send();return audioSource;},loadHTML5Audio:function(path,multiChannel,loadCallback){var realPath=ig.prefix+path.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[path]){if(this.clips[path]instanceof ig.Sound.WebAudioSource){return this.clips[path];}
if(multiChannel&&this.clips[path].length<ig.Sound.channels){for(var i=this.clips[path].length;i<ig.Sound.channels;i++){var a=new Audio(realPath);a.load();this.clips[path].push(a);}}
return this.clips[path][0];}
var clip=new Audio(realPath);if(loadCallback){if(ig.ua.mobile){setTimeout(function(){loadCallback(path,true,null);},0);}
else{clip.addEventListener('canplaythrough',function cb(ev){clip.removeEventListener('canplaythrough',cb,false);loadCallback(path,true,ev);},false);clip.addEventListener('error',function(ev){loadCallback(path,false,ev);},false);}}
clip.preload='auto';clip.load();this.clips[path]=[clip];if(multiChannel){for(var i=1;i<ig.Sound.channels;i++){var a=new Audio(realPath);a.load();this.clips[path].push(a);}}
return clip;},get:function(path){var channels=this.clips[path];if(channels&&channels instanceof ig.Sound.WebAudioSource){return channels;}
for(var i=0,clip;clip=channels[i++];){if(clip.paused||clip.ended){if(clip.ended){clip.currentTime=0;}
return clip;}}
channels[0].pause();channels[0].currentTime=0;return channels[0];}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:false,_volume:1,_loop:false,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)});Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});},add:function(music,name){if(!ig.Sound.enabled){return;}
var path=music instanceof ig.Sound?music.path:music;var track=ig.soundManager.load(path,false);if(track instanceof ig.Sound.WebAudioSource){ig.system.stopRunLoop();throw("Sound '"+path+"' loaded as Multichannel but used for Music. "+"Set the multiChannel param to false when loading, e.g.: new ig.Sound(path, false)");}
track.loop=this._loop;track.volume=this._volume;track.addEventListener('ended',this._endedCallbackBound,false);this.tracks.push(track);if(name){this.namedTracks[name]=track;}
if(!this.currentTrack){this.currentTrack=track;}},next:function(){if(!this.tracks.length){return;}
this.stop();this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length;this.currentTrack=this.tracks[this.currentIndex];this.play();},pause:function(){if(!this.currentTrack){return;}
this.currentTrack.pause();},stop:function(){if(!this.currentTrack){return;}
this.currentTrack.pause();this.currentTrack.currentTime=0;},play:function(name){if(name&&this.namedTracks[name]){var newTrack=this.namedTracks[name];if(newTrack!=this.currentTrack){this.stop();this.currentTrack=newTrack;}}
else if(!this.currentTrack){return;}
this.currentTrack.play();},getLooping:function(){return this._loop;},setLooping:function(l){this._loop=l;for(var i in this.tracks){this.tracks[i].loop=l;}},getVolume:function(){return this._volume;},setVolume:function(v){this._volume=v.limit(0,1);for(var i in this.tracks){this.tracks[i].volume=this._volume;}},fadeOut:function(time){if(!this.currentTrack){return;}
clearInterval(this._fadeInterval);this._fadeTimer=new ig.Timer(time);this._fadeInterval=setInterval(this._fadeStep.bind(this),50);},_fadeStep:function(){var v=this._fadeTimer.delta().map(-this._fadeTimer.target,0,1,0).limit(0,1)*this._volume;if(v<=0.01){this.stop();this.currentTrack.volume=this._volume;clearInterval(this._fadeInterval);}
else{this.currentTrack.volume=v;}},_endedCallback:function(){if(this._loop){this.play();}
else{this.next();}}});ig.Sound=ig.Class.extend({path:'',volume:1,currentClip:null,multiChannel:true,_loop:false,init:function(path,multiChannel){this.path=path;this.multiChannel=(multiChannel!==false);Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});this.load();},getLooping:function(){return this._loop;},setLooping:function(loop){this._loop=loop;if(this.currentClip){this.currentClip.loop=loop;}},load:function(loadCallback){if(!ig.Sound.enabled){if(loadCallback){loadCallback(this.path,true);}
return;}
if(ig.ready){ig.soundManager.load(this.path,this.multiChannel,loadCallback);}
else{ig.addResource(this);}},play:function(){if(!ig.Sound.enabled){return;}
this.currentClip=ig.soundManager.get(this.path);this.currentClip.loop=this._loop;this.currentClip.volume=ig.soundManager.volume*this.volume;this.currentClip.play();},stop:function(){if(this.currentClip){this.currentClip.pause();this.currentClip.currentTime=0;}}});ig.Sound.WebAudioSource=ig.Class.extend({sources:[],gain:null,buffer:null,_loop:false,init:function(){this.gain=ig.soundManager.audioContext.createGain();this.gain.connect(ig.soundManager.audioContext.destination);Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)});},play:function(){if(!this.buffer){return;}
var source=ig.soundManager.audioContext.createBufferSource();source.buffer=this.buffer;source.connect(this.gain);source.loop=this._loop;var that=this;this.sources.push(source);source.onended=function(){that.sources.erase(source);};source.start(0);},pause:function(){for(var i=0;i<this.sources.length;i++){try{this.sources[i].stop();}catch(err){}}},getLooping:function(){return this._loop;},setLooping:function(loop){this._loop=loop;for(var i=0;i<this.sources.length;i++){this.sources[i].loop=loop;}},getVolume:function(){return this.gain.gain.value;},setVolume:function(volume){this.gain.gain.value=volume;}});ig.Sound.FORMAT={MP3:{ext:'mp3',mime:'audio/mpeg'},M4A:{ext:'m4a',mime:'audio/mp4; codecs=mp4a.40.2'},OGG:{ext:'ogg',mime:'audio/ogg; codecs=vorbis'},WEBM:{ext:'webm',mime:'audio/webm; codecs=vorbis'},CAF:{ext:'caf',mime:'audio/x-caf'}};ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3];ig.Sound.channels=4;ig.Sound.enabled=true;ig.normalizeVendorAttribute(window,'AudioContext');ig.Sound.useWebAudio=!!window.AudioContext;});

// lib/impact/loader.js
ig.baked=true;ig.module('impact.loader').requires('impact.image','impact.font','impact.sound').defines(function(){"use strict";ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:false,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(gameClass,resources){this.gameClass=gameClass;this.resources=resources;this._loadCallbackBound=this._loadCallback.bind(this);for(var i=0;i<this.resources.length;i++){this._unloaded.push(this.resources[i].path);}},load:function(){ig.system.clear('#000');if(!this.resources.length){this.end();return;}
for(var i=0;i<this.resources.length;i++){this.loadResource(this.resources[i]);}
this._intervalId=setInterval(this.draw.bind(this),16);},loadResource:function(res){res.load(this._loadCallbackBound);},end:function(){if(this.done){return;}
this.done=true;clearInterval(this._intervalId);ig.system.setGame(this.gameClass);},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;var s=ig.system.scale;var w=(ig.system.width*0.6).floor();var h=(ig.system.height*0.1).floor();var x=(ig.system.width*0.5-w/2).floor();var y=(ig.system.height*0.5-h/2).floor();ig.system.context.fillStyle='#000';ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);ig.system.context.fillStyle='#fff';ig.system.context.fillRect(x*s,y*s,w*s,h*s);ig.system.context.fillStyle='#000';ig.system.context.fillRect(x*s+s,y*s+s,w*s-s-s,h*s-s-s);ig.system.context.fillStyle='#fff';ig.system.context.fillRect(x*s,y*s,w*s*this._drawStatus,h*s);},_loadCallback:function(path,status){if(status){this._unloaded.erase(path);}
else{throw('Failed to load resource: '+path);}
this.status=1-(this._unloaded.length/this.resources.length);if(this._unloaded.length==0){setTimeout(this.end.bind(this),250);}}});});

// lib/impact/timer.js
ig.baked=true;ig.module('impact.timer').defines(function(){"use strict";ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(seconds){this.base=ig.Timer.time;this.last=ig.Timer.time;this.target=seconds||0;},set:function(seconds){this.target=seconds||0;this.base=ig.Timer.time;this.pausedAt=0;},reset:function(){this.base=ig.Timer.time;this.pausedAt=0;},tick:function(){var delta=ig.Timer.time-this.last;this.last=ig.Timer.time;return(this.pausedAt?0:delta);},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target;},pause:function(){if(!this.pausedAt){this.pausedAt=ig.Timer.time;}},unpause:function(){if(this.pausedAt){this.base+=ig.Timer.time-this.pausedAt;this.pausedAt=0;}}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var current=Date.now();var delta=(current-ig.Timer._last)/1000;ig.Timer.time+=Math.min(delta,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=current;};});

// lib/impact/system.js
ig.baked=true;ig.module('impact.system').requires('impact.timer','impact.image').defines(function(){"use strict";ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:false,delegate:null,clock:null,canvas:null,context:null,init:function(canvasId,fps,width,height,scale){this.fps=fps;this.clock=new ig.Timer();this.canvas=ig.$(canvasId);this.resize(width,height,scale);this.context=this.canvas.getContext('2d');this.getDrawPos=ig.System.drawMode;if(this.scale!=1){ig.System.scaleMode=ig.System.SCALE.CRISP;}
ig.System.scaleMode(this.canvas,this.context);},resize:function(width,height,scale){this.width=width;this.height=height;this.scale=scale||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight;},setGame:function(gameClass){if(this.running){this.newGameClass=gameClass;}
else{this.setGameNow(gameClass);}},setGameNow:function(gameClass){ig.game=new(gameClass)();ig.system.setDelegate(ig.game);},setDelegate:function(object){if(typeof(object.run)=='function'){this.delegate=object;this.startRunLoop();}else{throw('System.setDelegate: No run() function in object');}},stopRunLoop:function(){ig.clearAnimation(this.animationId);this.running=false;},startRunLoop:function(){this.stopRunLoop();this.animationId=ig.setAnimation(this.run.bind(this));this.running=true;},clear:function(color){this.context.fillStyle=color;this.context.fillRect(0,0,this.realWidth,this.realHeight);},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();if(this.newGameClass){this.setGameNow(this.newGameClass);this.newGameClass=null;}},getDrawPos:null});ig.System.DRAW={AUTHENTIC:function(p){return Math.round(p)*this.scale;},SMOOTH:function(p){return Math.round(p*this.scale);},SUBPIXEL:function(p){return p*this.scale;}};ig.System.drawMode=ig.System.DRAW.SMOOTH;ig.System.SCALE={CRISP:function(canvas,context){ig.setVendorAttribute(context,'imageSmoothingEnabled',false);canvas.style.imageRendering='-moz-crisp-edges';canvas.style.imageRendering='-o-crisp-edges';canvas.style.imageRendering='-webkit-optimize-contrast';canvas.style.imageRendering='crisp-edges';canvas.style.msInterpolationMode='nearest-neighbor';},SMOOTH:function(canvas,context){ig.setVendorAttribute(context,'imageSmoothingEnabled',true);canvas.style.imageRendering='';canvas.style.msInterpolationMode='';}};ig.System.scaleMode=ig.System.SCALE.SMOOTH;});

// lib/impact/input.js
ig.baked=true;ig.module('impact.input').defines(function(){"use strict";ig.KEY={'MOUSE1':-1,'MOUSE2':-3,'MWHEEL_UP':-4,'MWHEEL_DOWN':-5,'BACKSPACE':8,'TAB':9,'ENTER':13,'PAUSE':19,'CAPS':20,'ESC':27,'SPACE':32,'PAGE_UP':33,'PAGE_DOWN':34,'END':35,'HOME':36,'LEFT_ARROW':37,'UP_ARROW':38,'RIGHT_ARROW':39,'DOWN_ARROW':40,'INSERT':45,'DELETE':46,'_0':48,'_1':49,'_2':50,'_3':51,'_4':52,'_5':53,'_6':54,'_7':55,'_8':56,'_9':57,'A':65,'B':66,'C':67,'D':68,'E':69,'F':70,'G':71,'H':72,'I':73,'J':74,'K':75,'L':76,'M':77,'N':78,'O':79,'P':80,'Q':81,'R':82,'S':83,'T':84,'U':85,'V':86,'W':87,'X':88,'Y':89,'Z':90,'NUMPAD_0':96,'NUMPAD_1':97,'NUMPAD_2':98,'NUMPAD_3':99,'NUMPAD_4':100,'NUMPAD_5':101,'NUMPAD_6':102,'NUMPAD_7':103,'NUMPAD_8':104,'NUMPAD_9':105,'MULTIPLY':106,'ADD':107,'SUBSTRACT':109,'DECIMAL':110,'DIVIDE':111,'F1':112,'F2':113,'F3':114,'F4':115,'F5':116,'F6':117,'F7':118,'F8':119,'F9':120,'F10':121,'F11':122,'F12':123,'SHIFT':16,'CTRL':17,'ALT':18,'PLUS':187,'COMMA':188,'MINUS':189,'PERIOD':190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:false,isUsingKeyboard:false,isUsingAccelerometer:false,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){if(this.isUsingMouse){return;}
this.isUsingMouse=true;ig.system.canvas.addEventListener('wheel',this.mousewheel.bind(this),false);ig.system.canvas.addEventListener('contextmenu',this.contextmenu.bind(this),false);ig.system.canvas.addEventListener('mousedown',this.keydown.bind(this),false);ig.system.canvas.addEventListener('mouseup',this.keyup.bind(this),false);ig.system.canvas.addEventListener('mousemove',this.mousemove.bind(this),false);if(ig.ua.touchDevice){ig.system.canvas.addEventListener('touchstart',this.keydown.bind(this),false);ig.system.canvas.addEventListener('touchend',this.keyup.bind(this),false);ig.system.canvas.addEventListener('touchcancel',this.keyup.bind(this),false);ig.system.canvas.addEventListener('touchmove',this.mousemove.bind(this),false);ig.system.canvas.addEventListener('MSPointerDown',this.keydown.bind(this),false);ig.system.canvas.addEventListener('MSPointerUp',this.keyup.bind(this),false);ig.system.canvas.addEventListener('MSPointerMove',this.mousemove.bind(this),false);ig.system.canvas.style.msTouchAction='none';}},initKeyboard:function(){if(this.isUsingKeyboard){return;}
this.isUsingKeyboard=true;window.addEventListener('keydown',this.keydown.bind(this),false);window.addEventListener('keyup',this.keyup.bind(this),false);},initAccelerometer:function(){if(this.isUsingAccelerometer){return;}
this.isUsingAccelerometer=true;window.addEventListener('devicemotion',this.devicemotion.bind(this),false);},mousewheel:function(event){var code=event.deltaY<0?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN;var action=this.bindings[code];if(action){this.actions[action]=true;this.presses[action]=true;this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();}},mousemove:function(event){var internalWidth=ig.system.canvas.offsetWidth||ig.system.realWidth;var scale=ig.system.scale*(internalWidth/ig.system.realWidth);var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
var ev=event.touches?event.touches[0]:event;this.mouse.x=(ev.clientX-pos.left)/scale;this.mouse.y=(ev.clientY-pos.top)/scale;},contextmenu:function(event){if(this.bindings[ig.KEY.MOUSE2]){event.stopPropagation();event.preventDefault();}},keydown:function(event){var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keydown'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);if(code<0&&!ig.ua.mobile){window.focus();}
if(event.type=='touchstart'||event.type=='mousedown'){this.mousemove(event);}
var action=this.bindings[code];if(action){this.actions[action]=true;if(!this.locks[action]){this.presses[action]=true;this.locks[action]=true;}
event.preventDefault();}},keyup:function(event){var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keyup'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);var action=this.bindings[code];if(action){this.delayedKeyup[action]=true;event.preventDefault();}},devicemotion:function(event){this.accel=event.accelerationIncludingGravity;},bind:function(key,action){if(key<0){this.initMouse();}
else if(key>0){this.initKeyboard();}
this.bindings[key]=action;},bindTouch:function(selector,action){var element=ig.$(selector);var that=this;element.addEventListener('touchstart',function(ev){that.touchStart(ev,action);},false);element.addEventListener('touchend',function(ev){that.touchEnd(ev,action);},false);element.addEventListener('MSPointerDown',function(ev){that.touchStart(ev,action);},false);element.addEventListener('MSPointerUp',function(ev){that.touchEnd(ev,action);},false);},unbind:function(key){var action=this.bindings[key];this.delayedKeyup[action]=true;this.bindings[key]=null;},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={};},state:function(action){return this.actions[action];},pressed:function(action){return this.presses[action];},released:function(action){return!!this.delayedKeyup[action];},clearPressed:function(){for(var action in this.delayedKeyup){this.actions[action]=false;this.locks[action]=false;}
this.delayedKeyup={};this.presses={};},touchStart:function(event,action){this.actions[action]=true;this.presses[action]=true;event.stopPropagation();event.preventDefault();return false;},touchEnd:function(event,action){this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();return false;}});});

// lib/impact/impact.js
ig.baked=true;ig.module('impact.impact').requires('dom.ready','impact.loader','impact.system','impact.input','impact.sound').defines(function(){"use strict";ig.main=function(canvasId,gameClass,fps,width,height,scale,loaderClass){ig.system=new ig.System(canvasId,fps,width,height,scale||1);ig.input=new ig.Input();ig.soundManager=new ig.SoundManager();ig.music=new ig.Music();ig.ready=true;var loader=new(loaderClass||ig.Loader)(gameClass,ig.resources);loader.load();};});

// lib/impact/animation.js
ig.baked=true;ig.module('impact.animation').requires('impact.timer','impact.image').defines(function(){"use strict";ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(path,width,height){this.width=width;this.height=height;this.image=new ig.Image(path);}});ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:false,y:false},pivot:{x:0,y:0},frameTime:0,frame:0,tile:0,stop:false,loopCount:0,alpha:1,angle:0,init:function(sheet,frameTime,sequence,stop){this.sheet=sheet;this.pivot={x:sheet.width/2,y:sheet.height/2};this.timer=new ig.Timer();this.frameTime=frameTime;this.sequence=sequence;this.stop=!!stop;this.tile=this.sequence[0];},rewind:function(){this.timer.set();this.loopCount=0;this.frame=0;this.tile=this.sequence[0];return this;},gotoFrame:function(f){this.timer.set(this.frameTime*-f-0.0001);this.update();},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length));},update:function(){var frameTotal=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(frameTotal/this.sequence.length);if(this.stop&&this.loopCount>0){this.frame=this.sequence.length-1;}
else{this.frame=frameTotal%this.sequence.length;}
this.tile=this.sequence[this.frame];},draw:function(targetX,targetY){var bbsize=Math.max(this.sheet.width,this.sheet.height);if(targetX>ig.system.width||targetY>ig.system.height||targetX+bbsize<0||targetY+bbsize<0){return;}
if(this.alpha!=1){ig.system.context.globalAlpha=this.alpha;}
if(this.angle==0){this.sheet.image.drawTile(targetX,targetY,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y);}
else{ig.system.context.save();ig.system.context.translate(ig.system.getDrawPos(targetX+this.pivot.x),ig.system.getDrawPos(targetY+this.pivot.y));ig.system.context.rotate(this.angle);this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y);ig.system.context.restore();}
if(this.alpha!=1){ig.system.context.globalAlpha=1;}}});});

// lib/impact/entity.js
ig.baked=true;ig.module('impact.entity').requires('impact.animation','impact.impact').defines(function(){"use strict";ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:false,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:false,slopeStanding:{min:(44).toRad(),max:(136).toRad()},init:function(x,y,settings){this.id=++ig.Entity._lastId;this.pos.x=this.last.x=x;this.pos.y=this.last.y=y;ig.merge(this,settings);},reset:function(x,y,settings){var proto=this.constructor.prototype;this.pos.x=x;this.pos.y=y;this.last.x=x;this.last.y=y;this.vel.x=proto.vel.x;this.vel.y=proto.vel.y;this.accel.x=proto.accel.x;this.accel.y=proto.accel.y;this.health=proto.health;this._killed=proto._killed;this.standing=proto.standing;this.type=proto.type;this.checkAgainst=proto.checkAgainst;this.collides=proto.collides;ig.merge(this,settings);},addAnim:function(name,frameTime,sequence,stop){if(!this.animSheet){throw('No animSheet to add the animation '+name+' to.');}
var a=new ig.Animation(this.animSheet,frameTime,sequence,stop);this.anims[name]=a;if(!this.currentAnim){this.currentAnim=a;}
return a;},update:function(){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var mx=this.vel.x*ig.system.tick;var my=this.vel.y*ig.system.tick;var res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,mx,my,this.size.x,this.size.y);this.handleMovementTrace(res);if(this.currentAnim){this.currentAnim.update();}},getNewVelocity:function(vel,accel,friction,max){if(accel){return(vel+accel*ig.system.tick).limit(-max,max);}
else if(friction){var delta=friction*ig.system.tick;if(vel-delta>0){return vel-delta;}
else if(vel+delta<0){return vel+delta;}
else{return 0;}}
return vel.limit(-max,max);},handleMovementTrace:function(res){this.standing=false;if(res.collision.y){if(this.bounciness>0&&Math.abs(this.vel.y)>this.minBounceVelocity){this.vel.y*=-this.bounciness;}
else{if(this.vel.y>0){this.standing=true;}
this.vel.y=0;}}
if(res.collision.x){if(this.bounciness>0&&Math.abs(this.vel.x)>this.minBounceVelocity){this.vel.x*=-this.bounciness;}
else{this.vel.x=0;}}
if(res.collision.slope){var s=res.collision.slope;if(this.bounciness>0){var proj=this.vel.x*s.nx+this.vel.y*s.ny;this.vel.x=(this.vel.x-s.nx*proj*2)*this.bounciness;this.vel.y=(this.vel.y-s.ny*proj*2)*this.bounciness;}
else{var lengthSquared=s.x*s.x+s.y*s.y;var dot=(this.vel.x*s.x+this.vel.y*s.y)/lengthSquared;this.vel.x=s.x*dot;this.vel.y=s.y*dot;var angle=Math.atan2(s.x,s.y);if(angle>this.slopeStanding.min&&angle<this.slopeStanding.max){this.standing=true;}}}
this.pos=res.pos;},draw:function(){if(this.currentAnim){this.currentAnim.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y);}},kill:function(){ig.game.removeEntity(this);},receiveDamage:function(amount,from){this.health-=amount;if(this.health<=0){this.kill();}},touches:function(other){return!(this.pos.x>=other.pos.x+other.size.x||this.pos.x+this.size.x<=other.pos.x||this.pos.y>=other.pos.y+other.size.y||this.pos.y+this.size.y<=other.pos.y);},distanceTo:function(other){var xd=(this.pos.x+this.size.x/2)-(other.pos.x+other.size.x/2);var yd=(this.pos.y+this.size.y/2)-(other.pos.y+other.size.y/2);return Math.sqrt(xd*xd+yd*yd);},angleTo:function(other){return Math.atan2((other.pos.y+other.size.y/2)-(this.pos.y+this.size.y/2),(other.pos.x+other.size.x/2)-(this.pos.x+this.size.x/2));},check:function(other){},collideWith:function(other,axis){},ready:function(){},erase:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.checkPair=function(a,b){if(a.checkAgainst&b.type){a.check(b);}
if(b.checkAgainst&a.type){b.check(a);}
if(a.collides&&b.collides&&a.collides+b.collides>ig.Entity.COLLIDES.ACTIVE){ig.Entity.solveCollision(a,b);}};ig.Entity.solveCollision=function(a,b){var weak=null;if(a.collides==ig.Entity.COLLIDES.LITE||b.collides==ig.Entity.COLLIDES.FIXED){weak=a;}
else if(b.collides==ig.Entity.COLLIDES.LITE||a.collides==ig.Entity.COLLIDES.FIXED){weak=b;}
if(a.last.x+a.size.x>b.last.x&&a.last.x<b.last.x+b.size.x){if(a.last.y<b.last.y){ig.Entity.seperateOnYAxis(a,b,weak);}
else{ig.Entity.seperateOnYAxis(b,a,weak);}
a.collideWith(b,'y');b.collideWith(a,'y');}
else if(a.last.y+a.size.y>b.last.y&&a.last.y<b.last.y+b.size.y){if(a.last.x<b.last.x){ig.Entity.seperateOnXAxis(a,b,weak);}
else{ig.Entity.seperateOnXAxis(b,a,weak);}
a.collideWith(b,'x');b.collideWith(a,'x');}};ig.Entity.seperateOnXAxis=function(left,right,weak){var nudge=(left.pos.x+left.size.x-right.pos.x);if(weak){var strong=left===weak?right:left;weak.vel.x=-weak.vel.x*weak.bounciness+strong.vel.x;var resWeak=ig.game.collisionMap.trace(weak.pos.x,weak.pos.y,weak==left?-nudge:nudge,0,weak.size.x,weak.size.y);weak.pos.x=resWeak.pos.x;}
else{var v2=(left.vel.x-right.vel.x)/2;left.vel.x=-v2;right.vel.x=v2;var resLeft=ig.game.collisionMap.trace(left.pos.x,left.pos.y,-nudge/2,0,left.size.x,left.size.y);left.pos.x=Math.floor(resLeft.pos.x);var resRight=ig.game.collisionMap.trace(right.pos.x,right.pos.y,nudge/2,0,right.size.x,right.size.y);right.pos.x=Math.ceil(resRight.pos.x);}};ig.Entity.seperateOnYAxis=function(top,bottom,weak){var nudge=(top.pos.y+top.size.y-bottom.pos.y);if(weak){var strong=top===weak?bottom:top;weak.vel.y=-weak.vel.y*weak.bounciness+strong.vel.y;var nudgeX=0;if(weak==top&&Math.abs(weak.vel.y-strong.vel.y)<weak.minBounceVelocity){weak.standing=true;nudgeX=strong.vel.x*ig.system.tick;}
var resWeak=ig.game.collisionMap.trace(weak.pos.x,weak.pos.y,nudgeX,weak==top?-nudge:nudge,weak.size.x,weak.size.y);weak.pos.y=resWeak.pos.y;weak.pos.x=resWeak.pos.x;}
else if(ig.game.gravity&&(bottom.standing||top.vel.y>0)){var resTop=ig.game.collisionMap.trace(top.pos.x,top.pos.y,0,-(top.pos.y+top.size.y-bottom.pos.y),top.size.x,top.size.y);top.pos.y=resTop.pos.y;if(top.bounciness>0&&top.vel.y>top.minBounceVelocity){top.vel.y*=-top.bounciness;}
else{top.standing=true;top.vel.y=0;}}
else{var v2=(top.vel.y-bottom.vel.y)/2;top.vel.y=-v2;bottom.vel.y=v2;var nudgeX=bottom.vel.x*ig.system.tick;var resTop=ig.game.collisionMap.trace(top.pos.x,top.pos.y,nudgeX,-nudge/2,top.size.x,top.size.y);top.pos.y=resTop.pos.y;var resBottom=ig.game.collisionMap.trace(bottom.pos.x,bottom.pos.y,0,nudge/2,bottom.size.x,bottom.size.y);bottom.pos.y=resBottom.pos.y;}};});

// lib/impact/map.js
ig.baked=true;ig.module('impact.map').defines(function(){"use strict";ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,pxWidth:1,pxHeight:1,data:[[]],name:null,init:function(tilesize,data){this.tilesize=tilesize;this.data=data;this.height=data.length;this.width=data[0].length;this.pxWidth=this.width*this.tilesize;this.pxHeight=this.height*this.tilesize;},getTile:function(x,y){var tx=Math.floor(x/this.tilesize);var ty=Math.floor(y/this.tilesize);if((tx>=0&&tx<this.width)&&(ty>=0&&ty<this.height)){return this.data[ty][tx];}
else{return 0;}},setTile:function(x,y,tile){var tx=Math.floor(x/this.tilesize);var ty=Math.floor(y/this.tilesize);if((tx>=0&&tx<this.width)&&(ty>=0&&ty<this.height)){this.data[ty][tx]=tile;}}});});

// lib/impact/collision-map.js
ig.baked=true;ig.module('impact.collision-map').requires('impact.map').defines(function(){"use strict";ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(tilesize,data,tiledef){this.parent(tilesize,data);this.tiledef=tiledef||ig.CollisionMap.defaultTileDef;for(var t in this.tiledef){if(t|0>this.lastSlope){this.lastSlope=t|0;}}},trace:function(x,y,vx,vy,objectWidth,objectHeight){var res={collision:{x:false,y:false,slope:false},pos:{x:x,y:y},tile:{x:0,y:0}};var steps=Math.ceil((Math.max(Math.abs(vx),Math.abs(vy))+0.1)/this.tilesize);if(steps>1){var sx=vx/steps;var sy=vy/steps;for(var i=0;i<steps&&(sx||sy);i++){this._traceStep(res,x,y,sx,sy,objectWidth,objectHeight,vx,vy,i);x=res.pos.x;y=res.pos.y;if(res.collision.x){sx=0;vx=0;}
if(res.collision.y){sy=0;vy=0;}
if(res.collision.slope){break;}}}
else{this._traceStep(res,x,y,vx,vy,objectWidth,objectHeight,vx,vy,0);}
return res;},_traceStep:function(res,x,y,vx,vy,width,height,rvx,rvy,step){res.pos.x+=vx;res.pos.y+=vy;var t=0;if(vx){var pxOffsetX=(vx>0?width:0);var tileOffsetX=(vx<0?this.tilesize:0);var firstTileY=Math.max(Math.floor(y/this.tilesize),0);var lastTileY=Math.min(Math.ceil((y+height)/this.tilesize),this.height);var tileX=Math.floor((res.pos.x+pxOffsetX)/this.tilesize);var prevTileX=Math.floor((x+pxOffsetX)/this.tilesize);if(step>0||tileX==prevTileX||prevTileX<0||prevTileX>=this.width){prevTileX=-1;}
if(tileX>=0&&tileX<this.width){for(var tileY=firstTileY;tileY<lastTileY;tileY++){if(prevTileX!=-1){t=this.data[tileY][prevTileX];if(t>1&&t<=this.lastSlope&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,prevTileX,tileY)){break;}}
t=this.data[tileY][tileX];if(t==1||t>this.lastSlope||(t>1&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY))){if(t>1&&t<=this.lastSlope&&res.collision.slope){break;}
res.collision.x=true;res.tile.x=t;x=res.pos.x=tileX*this.tilesize-pxOffsetX+tileOffsetX;rvx=0;break;}}}}
if(vy){var pxOffsetY=(vy>0?height:0);var tileOffsetY=(vy<0?this.tilesize:0);var firstTileX=Math.max(Math.floor(res.pos.x/this.tilesize),0);var lastTileX=Math.min(Math.ceil((res.pos.x+width)/this.tilesize),this.width);var tileY=Math.floor((res.pos.y+pxOffsetY)/this.tilesize);var prevTileY=Math.floor((y+pxOffsetY)/this.tilesize);if(step>0||tileY==prevTileY||prevTileY<0||prevTileY>=this.height){prevTileY=-1;}
if(tileY>=0&&tileY<this.height){for(var tileX=firstTileX;tileX<lastTileX;tileX++){if(prevTileY!=-1){t=this.data[prevTileY][tileX];if(t>1&&t<=this.lastSlope&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,prevTileY)){break;}}
t=this.data[tileY][tileX];if(t==1||t>this.lastSlope||(t>1&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY))){if(t>1&&t<=this.lastSlope&&res.collision.slope){break;}
res.collision.y=true;res.tile.y=t;res.pos.y=tileY*this.tilesize-pxOffsetY+tileOffsetY;break;}}}}},_checkTileDef:function(res,t,x,y,vx,vy,width,height,tileX,tileY){var def=this.tiledef[t];if(!def){return false;}
var lx=(tileX+def[0])*this.tilesize,ly=(tileY+def[1])*this.tilesize,lvx=(def[2]-def[0])*this.tilesize,lvy=(def[3]-def[1])*this.tilesize,solid=def[4];var tx=x+vx+(lvy<0?width:0)-lx,ty=y+vy+(lvx>0?height:0)-ly;if(lvx*ty-lvy*tx>0){if(vx*-lvy+vy*lvx<0){return solid;}
var length=Math.sqrt(lvx*lvx+lvy*lvy);var nx=lvy/length,ny=-lvx/length;var proj=tx*nx+ty*ny;var px=nx*proj,py=ny*proj;if(px*px+py*py>=vx*vx+vy*vy){return solid||(lvx*(ty-vy)-lvy*(tx-vx)<0.5);}
res.pos.x=x+vx-px;res.pos.y=y+vy-py;res.collision.slope={x:lvx,y:lvy,nx:nx,ny:ny};return true;}
return false;}});var H=1/2,N=1/3,M=2/3,SOLID=true,NON_SOLID=false;ig.CollisionMap.defaultTileDef={5:[0,1,1,M,SOLID],6:[0,M,1,N,SOLID],7:[0,N,1,0,SOLID],3:[0,1,1,H,SOLID],4:[0,H,1,0,SOLID],2:[0,1,1,0,SOLID],10:[H,1,1,0,SOLID],21:[0,1,H,0,SOLID],32:[M,1,1,0,SOLID],43:[N,1,M,0,SOLID],54:[0,1,N,0,SOLID],27:[0,0,1,N,SOLID],28:[0,N,1,M,SOLID],29:[0,M,1,1,SOLID],25:[0,0,1,H,SOLID],26:[0,H,1,1,SOLID],24:[0,0,1,1,SOLID],11:[0,0,H,1,SOLID],22:[H,0,1,1,SOLID],33:[0,0,N,1,SOLID],44:[N,0,M,1,SOLID],55:[M,0,1,1,SOLID],16:[1,N,0,0,SOLID],17:[1,M,0,N,SOLID],18:[1,1,0,M,SOLID],14:[1,H,0,0,SOLID],15:[1,1,0,H,SOLID],13:[1,1,0,0,SOLID],8:[H,1,0,0,SOLID],19:[1,1,H,0,SOLID],30:[N,1,0,0,SOLID],41:[M,1,N,0,SOLID],52:[1,1,M,0,SOLID],38:[1,M,0,1,SOLID],39:[1,N,0,M,SOLID],40:[1,0,0,N,SOLID],36:[1,H,0,1,SOLID],37:[1,0,0,H,SOLID],35:[1,0,0,1,SOLID],9:[1,0,H,1,SOLID],20:[H,0,0,1,SOLID],31:[1,0,M,1,SOLID],42:[M,0,N,1,SOLID],53:[N,0,0,1,SOLID],12:[0,0,1,0,NON_SOLID],23:[1,1,0,1,NON_SOLID],34:[1,0,1,1,NON_SOLID],45:[0,1,0,0,NON_SOLID]};ig.CollisionMap.staticNoCollision={trace:function(x,y,vx,vy){return{collision:{x:false,y:false,slope:false},pos:{x:x+vx,y:y+vy},tile:{x:0,y:0}};}};});

// lib/impact/background-map.js
ig.baked=true;ig.module('impact.background-map').requires('impact.map','impact.image').defines(function(){"use strict";ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:false,tilesetName:'',foreground:false,enabled:true,preRender:false,preRenderedChunks:null,chunkSize:512,debugChunks:false,anims:{},init:function(tilesize,data,tileset){this.parent(tilesize,data);this.setTileset(tileset);},setTileset:function(tileset){this.tilesetName=tileset instanceof ig.Image?tileset.path:tileset;this.tiles=new ig.Image(this.tilesetName);this.preRenderedChunks=null;},setScreenPos:function(x,y){this.scroll.x=x/this.distance;this.scroll.y=y/this.distance;},preRenderMapToChunks:function(){var totalWidth=this.width*this.tilesize*ig.system.scale,totalHeight=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(totalWidth,totalHeight),this.chunkSize);var chunkCols=Math.ceil(totalWidth/this.chunkSize),chunkRows=Math.ceil(totalHeight/this.chunkSize);this.preRenderedChunks=[];for(var y=0;y<chunkRows;y++){this.preRenderedChunks[y]=[];for(var x=0;x<chunkCols;x++){var chunkWidth=(x==chunkCols-1)?totalWidth-x*this.chunkSize:this.chunkSize;var chunkHeight=(y==chunkRows-1)?totalHeight-y*this.chunkSize:this.chunkSize;this.preRenderedChunks[y][x]=this.preRenderChunk(x,y,chunkWidth,chunkHeight);}}},preRenderChunk:function(cx,cy,w,h){var tw=w/this.tilesize/ig.system.scale+1,th=h/this.tilesize/ig.system.scale+1;var nx=(cx*this.chunkSize/ig.system.scale)%this.tilesize,ny=(cy*this.chunkSize/ig.system.scale)%this.tilesize;var tx=Math.floor(cx*this.chunkSize/this.tilesize/ig.system.scale),ty=Math.floor(cy*this.chunkSize/this.tilesize/ig.system.scale);var chunk=ig.$new('canvas');chunk.width=w;chunk.height=h;chunk.retinaResolutionEnabled=false;var chunkContext=chunk.getContext('2d');ig.System.scaleMode(chunk,chunkContext);var screenContext=ig.system.context;ig.system.context=chunkContext;for(var x=0;x<tw;x++){for(var y=0;y<th;y++){if(x+tx<this.width&&y+ty<this.height){var tile=this.data[y+ty][x+tx];if(tile){this.tiles.drawTile(x*this.tilesize-nx,y*this.tilesize-ny,tile-1,this.tilesize);}}}}
ig.system.context=screenContext;var image=new Image();image.src=chunk.toDataURL();image.width=chunk.width;image.height=chunk.height;return image;},draw:function(){if(!this.tiles.loaded||!this.enabled){return;}
if(this.preRender){this.drawPreRendered();}
else{this.drawTiled();}},drawPreRendered:function(){if(!this.preRenderedChunks){this.preRenderMapToChunks();}
var dx=ig.system.getDrawPos(this.scroll.x),dy=ig.system.getDrawPos(this.scroll.y);if(this.repeat){var w=this.width*this.tilesize*ig.system.scale;dx=(dx%w+w)%w;var h=this.height*this.tilesize*ig.system.scale;dy=(dy%h+h)%h;}
var minChunkX=Math.max(Math.floor(dx/this.chunkSize),0),minChunkY=Math.max(Math.floor(dy/this.chunkSize),0),maxChunkX=Math.ceil((dx+ig.system.realWidth)/this.chunkSize),maxChunkY=Math.ceil((dy+ig.system.realHeight)/this.chunkSize),maxRealChunkX=this.preRenderedChunks[0].length,maxRealChunkY=this.preRenderedChunks.length;if(!this.repeat){maxChunkX=Math.min(maxChunkX,maxRealChunkX);maxChunkY=Math.min(maxChunkY,maxRealChunkY);}
var nudgeY=0;for(var cy=minChunkY;cy<maxChunkY;cy++){var nudgeX=0;for(var cx=minChunkX;cx<maxChunkX;cx++){var chunk=this.preRenderedChunks[cy%maxRealChunkY][cx%maxRealChunkX];var x=-dx+cx*this.chunkSize-nudgeX;var y=-dy+cy*this.chunkSize-nudgeY;ig.system.context.drawImage(chunk,x,y);ig.Image.drawCount++;if(this.debugChunks){ig.system.context.strokeStyle='#f0f';ig.system.context.strokeRect(x,y,this.chunkSize,this.chunkSize);}
if(this.repeat&&chunk.width<this.chunkSize&&x+chunk.width<ig.system.realWidth){nudgeX+=this.chunkSize-chunk.width;if(cy==minChunkY){maxChunkX++;}}}
if(this.repeat&&chunk.height<this.chunkSize&&y+chunk.height<ig.system.realHeight){nudgeY+=this.chunkSize-chunk.height;maxChunkY++;}}},drawTiled:function(){var tile=0,anim=null,tileOffsetX=(this.scroll.x/this.tilesize).toInt(),tileOffsetY=(this.scroll.y/this.tilesize).toInt(),pxOffsetX=this.scroll.x%this.tilesize,pxOffsetY=this.scroll.y%this.tilesize,pxMinX=-pxOffsetX-this.tilesize,pxMinY=-pxOffsetY-this.tilesize,pxMaxX=ig.system.width+this.tilesize-pxOffsetX,pxMaxY=ig.system.height+this.tilesize-pxOffsetY;for(var mapY=-1,pxY=pxMinY;pxY<pxMaxY;mapY++,pxY+=this.tilesize){var tileY=mapY+tileOffsetY;if(tileY>=this.height||tileY<0){if(!this.repeat){continue;}
tileY=(tileY%this.height+this.height)%this.height;}
for(var mapX=-1,pxX=pxMinX;pxX<pxMaxX;mapX++,pxX+=this.tilesize){var tileX=mapX+tileOffsetX;if(tileX>=this.width||tileX<0){if(!this.repeat){continue;}
tileX=(tileX%this.width+this.width)%this.width;}
if((tile=this.data[tileY][tileX])){if((anim=this.anims[tile-1])){anim.draw(pxX,pxY);}
else{this.tiles.drawTile(pxX,pxY,tile-1,this.tilesize);}}}}}});});

// lib/impact/game.js
ig.baked=true;ig.module('impact.game').requires('impact.impact','impact.entity','impact.collision-map','impact.background-map').defines(function(){"use strict";ig.Game=ig.Class.extend({clearColor:'#000000',gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:false,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:false,staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;ig.game=this;return null;},loadLevel:function(data){this.screen={x:0,y:0};this.entities=[];this.namedEntities={};for(var i=0;i<data.entities.length;i++){var ent=data.entities[i];this.spawnEntity(ent.type,ent.x,ent.y,ent.settings);}
this.sortEntities();this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(var i=0;i<data.layer.length;i++){var ld=data.layer[i];if(ld.name=='collision'){this.collisionMap=new ig.CollisionMap(ld.tilesize,ld.data);}
else{var newMap=new ig.BackgroundMap(ld.tilesize,ld.data,ld.tilesetName);newMap.anims=this.backgroundAnims[ld.tilesetName]||{};newMap.repeat=ld.repeat;newMap.distance=ld.distance;newMap.foreground=!!ld.foreground;newMap.preRender=!!ld.preRender;newMap.name=ld.name;this.backgroundMaps.push(newMap);}}
for(var i=0;i<this.entities.length;i++){this.entities[i].ready();}},loadLevelDeferred:function(data){this._levelToLoad=data;},getMapByName:function(name){if(name=='collision'){return this.collisionMap;}
for(var i=0;i<this.backgroundMaps.length;i++){if(this.backgroundMaps[i].name==name){return this.backgroundMaps[i];}}
return null;},getEntityByName:function(name){return this.namedEntities[name];},getEntitiesByType:function(type){var entityClass=typeof(type)==='string'?ig.global[type]:type;var a=[];for(var i=0;i<this.entities.length;i++){var ent=this.entities[i];if(ent instanceof entityClass&&!ent._killed){a.push(ent);}}
return a;},spawnEntity:function(type,x,y,settings){var entityClass=typeof(type)==='string'?ig.global[type]:type;if(!entityClass){throw("Can't spawn entity of type "+type);}
var ent=new(entityClass)(x,y,settings||{});this.entities.push(ent);if(ent.name){this.namedEntities[ent.name]=ent;}
return ent;},sortEntities:function(){this.entities.sort(this.sortBy);},sortEntitiesDeferred:function(){this._doSortEntities=true;},removeEntity:function(ent){if(ent.name){delete this.namedEntities[ent.name];}
ent._killed=true;ent.type=ig.Entity.TYPE.NONE;ent.checkAgainst=ig.Entity.TYPE.NONE;ent.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(ent);},run:function(){this.update();this.draw();},update:function(){if(this._levelToLoad){this.loadLevel(this._levelToLoad);this._levelToLoad=null;}
this.updateEntities();this.checkEntities();for(var i=0;i<this._deferredKill.length;i++){this._deferredKill[i].erase();this.entities.erase(this._deferredKill[i]);}
this._deferredKill=[];if(this._doSortEntities||this.autoSort){this.sortEntities();this._doSortEntities=false;}
for(var tileset in this.backgroundAnims){var anims=this.backgroundAnims[tileset];for(var a in anims){anims[a].update();}}},updateEntities:function(){for(var i=0;i<this.entities.length;i++){var ent=this.entities[i];if(!ent._killed){ent.update();}}},draw:function(){if(this.clearColor){ig.system.clear(this.clearColor);}
this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var mapIndex;for(mapIndex=0;mapIndex<this.backgroundMaps.length;mapIndex++){var map=this.backgroundMaps[mapIndex];if(map.foreground){break;}
map.setScreenPos(this.screen.x,this.screen.y);map.draw();}
this.drawEntities();for(mapIndex;mapIndex<this.backgroundMaps.length;mapIndex++){var map=this.backgroundMaps[mapIndex];map.setScreenPos(this.screen.x,this.screen.y);map.draw();}},drawEntities:function(){for(var i=0;i<this.entities.length;i++){this.entities[i].draw();}},checkEntities:function(){var hash={};for(var e=0;e<this.entities.length;e++){var entity=this.entities[e];if(entity.type==ig.Entity.TYPE.NONE&&entity.checkAgainst==ig.Entity.TYPE.NONE&&entity.collides==ig.Entity.COLLIDES.NEVER){continue;}
var checked={},xmin=Math.floor(entity.pos.x/this.cellSize),ymin=Math.floor(entity.pos.y/this.cellSize),xmax=Math.floor((entity.pos.x+entity.size.x)/this.cellSize)+1,ymax=Math.floor((entity.pos.y+entity.size.y)/this.cellSize)+1;for(var x=xmin;x<xmax;x++){for(var y=ymin;y<ymax;y++){if(!hash[x]){hash[x]={};hash[x][y]=[entity];}
else if(!hash[x][y]){hash[x][y]=[entity];}
else{var cell=hash[x][y];for(var c=0;c<cell.length;c++){if(entity.touches(cell[c])&&!checked[cell[c].id]){checked[cell[c].id]=true;ig.Entity.checkPair(entity,cell[c]);}}
cell.push(entity);}}}}}});ig.Game.SORT={Z_INDEX:function(a,b){return a.zIndex-b.zIndex;},POS_X:function(a,b){return(a.pos.x+a.size.x)-(b.pos.x+b.size.x);},POS_Y:function(a,b){return(a.pos.y+a.size.y)-(b.pos.y+b.size.y);}};});

// lib/plugins/patches/fps-limit-patch.js
ig.baked=true;ig.module("plugins.patches.fps-limit-patch").requires('impact.system','impact.impact').defines(function(){var version="1.0.0";var enableFPSLock=true;var targetFPS=60;var fpsLockThreshold=63;var fpsLockMethod={forcedTimeout:true};ig.System.inject({fps:targetFPS});if(ig.system){ig.system.fps=targetFPS;}
ig.normalizeVendorAttribute(window,'requestAnimationFrame');if(window.requestAnimationFrame){var next=1,anims={};window.ig.setAnimation=function(callback,element){var current=next++;anims[current]=true;var frameInterval=(1000/targetFPS),fpsCounter=targetFPS;var tick=0,lastTime=0,delay=0,elapsed=0;var animate=function(){if(!anims[current]){return;}
timestamp=Date.now();lastTime=tick;tick=timestamp;elapsed=tick-lastTime;fpsCounter=fpsCounter*0.8+0.2*(1000/elapsed);if(enableFPSLock){if(fpsCounter>targetFPS&&fpsCounter>=fpsLockThreshold){delay=Math.min(Math.max(frameInterval*2+lastTime-timestamp,0),frameInterval);if(fpsLockMethod.forcedTimeout){setTimeout(function(){window.requestAnimationFrame(animate,element);},delay);callback(timestamp);}}else{window.requestAnimationFrame(animate,element);callback();}}
else{window.requestAnimationFrame(animate,element);callback();}};window.requestAnimationFrame(animate,element);return current;};window.ig.clearAnimation=function(id){delete anims[id];};}
else{window.ig.setAnimation=function(callback,element){return window.setInterval(callback,1000/targetFPS);};window.ig.clearAnimation=function(id){window.clearInterval(id);};}});

// lib/plugins/patches/timer-patch.js
ig.baked=true;ig.module("plugins.patches.timer-patch").requires('impact.timer').defines(function(){ig.Timer.step=function(){var current=Date.now();var delta=(current-ig.Timer._last)/1000;if(delta<0){delta=0;}
ig.Timer.time+=Math.min(delta,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=current;};});

// lib/plugins/patches/user-agent-patch.js
ig.baked=true;ig.module("plugins.patches.user-agent-patch").requires("impact.impact").defines(function(){ig.ua.is_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);ig.ua.is_safari_or_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent);ig.ua.iOS6_tag=/OS 6_/i.test(navigator.userAgent);ig.ua.iOS6=(ig.ua.iPhone||ig.ua.iPad)&&ig.ua.iOS6_tag;ig.ua.iOSgt5=ig.ua.iOS&&parseInt((navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/)[1])>5;ig.ua.HTCONE=/HTC_One/i.test(navigator.userAgent);ig.ua.Kindle=/Silk/i.test(navigator.userAgent);ig.ua.touchDevice=('ontouchstart'in window)||(window.navigator.msMaxTouchPoints)||(window.navigator.maxTouchPoints);ig.ua.is_mac=(navigator.platform==='MacIntel');ig.ua.iOS=(ig.ua.touchDevice&&ig.ua.is_mac)||ig.ua.iOS;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.iOS6||ig.ua.winPhone||ig.ua.Kindle||/mobile/i.test(navigator.userAgent);});

// lib/plugins/patches/webkit-image-smoothing-patch.js
ig.baked=true;ig.module("plugins.patches.webkit-image-smoothing-patch").defines(function(){if(ig.System)
{ig.System.SCALE={CRISP:function(canvas,context){var el=context;var attr="imageSmoothingEnabled";var val=false;var uc=attr.charAt(0).toUpperCase()+attr.substr(1);el[attr]=el["ms"+uc]=el["moz"+uc]=el["o"+uc]=val;canvas.style.imageRendering="-moz-crisp-edges";canvas.style.imageRendering="-o-crisp-edges";canvas.style.imageRendering="-webkit-optimize-contrast";canvas.style.imageRendering="crisp-edges";canvas.style.msInterpolationMode="nearest-neighbor";},SMOOTH:function(canvas,context){var el=context;var attr="imageSmoothingEnabled";var val=true;var uc=attr.charAt(0).toUpperCase()+attr.substr(1);el[attr]=el["ms"+uc]=el["o"+uc]=val;canvas.style.imageRendering="";canvas.style.msInterpolationMode="";}};ig.System.scaleMode=ig.System.SCALE.SMOOTH;}});

// lib/plugins/patches/windowfocus-onMouseDown-patch.js
ig.baked=true;ig.module("plugins.patches.windowfocus-onMouseDown-patch").requires("impact.input").defines(function(){var iframetest=false;(function inIframeTest(){try
{iframetest=(window.self!==window.top);if(iframetest===false)
{var frames=window.frames;iframetest=(frames.length>0);}}
catch(e)
{iframetest=true;}})();ig.Input.inject({keydown:function(event)
{var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keydown'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);if(iframetest&&code<0){window.focus();}
if(event.type=='touchstart'||event.type=='mousedown'){this.mousemove(event);}
var action=this.bindings[code];if(action){this.actions[action]=true;if(!this.locks[action]){this.presses[action]=true;this.locks[action]=true;}
event.stopPropagation();event.preventDefault();}}})});

// lib/plugins/patches/input-patch.js
ig.baked=true;ig.module("plugins.patches.input-patch").requires('impact.input').defines(function(){ig.Input.inject({initMouse:function(){this.parent();ig.system.canvas.addEventListener('mouseleave',this.mouseleave.bind(this),false);},mousemove:function(event){this.parent(event);try{ig.soundHandler.unlockWebAudio();}catch(error){}},mouseleave:function(event){this.clearState("click");},keyup:function(event){this.parent(event);if(ig.visibilityHandler){ig.visibilityHandler.onChange("focus");}
try{ig.soundHandler.unlockWebAudio();}catch(error){}},clearState:function(action){this.actions[action]=false;},clearAllState:function(){for(var action in this.actions){this.clearState(action);}}})});

// lib/plugins/data/vector.js
ig.baked=true;ig.module('plugins.data.vector').defines(function(){Vector2=function(x,y){this.x=x||0;this.y=y||0;};Vector2.prototype={valType:"number",neg:function(){this.x=-this.x;this.y=-this.y;return this;},row:function(y){if(typeof(y)===this.valType)
{this.y=y;}
return this.y;},col:function(x){if(typeof(x)===this.valType)
{this.x=x;}
return this.x;},add:function(v){if(v instanceof Vector2){this.x+=v.x;this.y+=v.y;}else{this.x+=v;this.y+=v;}
return this;},sub:function(v){if(v instanceof Vector2){this.x-=v.x;this.y-=v.y;}else{this.x-=v;this.y-=v;}
return this;},mul:function(v){if(v instanceof Vector2){this.x*=v.x;this.y*=v.y;}else{this.x*=v;this.y*=v;}
return this;},div:function(v){if(v instanceof Vector2){if(v.x!=0)this.x/=v.x;if(v.y!=0)this.y/=v.y;}else{if(v!=0){this.x/=v;this.y/=v;}}
return this;},equals:function(v){return this.x==v.x&&this.y==v.y;},dot:function(v){return this.x*v.x+this.y*v.y;},cross:function(v){return this.x*v.y-this.y*v.x},length:function(){return Math.sqrt(this.dot(this));},norm:function(){return this.divide(this.length());},min:function(){return Math.min(this.x,this.y);},max:function(){return Math.max(this.x,this.y);},toAngles:function(){return-Math.atan2(-this.y,this.x);},angleTo:function(a){return Math.acos(this.dot(a)/(this.length()*a.length()));},toArray:function(n){return[this.x,this.y].slice(0,n||2);},clone:function(){return new Vector2(this.x,this.y);},set:function(x,y){this.x=x;this.y=y;return this;},unit:function(){var mag=this.length();if(mag>0){return new Vector2(this.x/mag,this.y/mag);}
else
{throw("Divide by 0 error in unitVector function of vector:"+this);return new Vector2(0,0);}},turnRight:function(){var temp=this.x;this.x=-this.y;this.y=temp;return this;},turnLeft:function(){var temp=this.x;this.x=this.y;this.y=-temp;return this;},rotate:function(angle){var vector=this.clone();this.x=vector.x*Math.cos(angle)-vector.y*Math.sin(angle);this.y=vector.x*Math.sin(angle)+vector.y*Math.cos(angle);return this;},};Vector2.negative=function(v){return new Vector2(-v.x,-v.y);};Vector2.add=function(a,b){if(b instanceof Vector2)return new Vector2(a.x+b.x,a.y+b.y);else return new Vector2(a.x+v,a.y+v);};Vector2.subtract=function(a,b){if(b instanceof Vector2)return new Vector2(a.x-b.x,a.y-b.y);else return new Vector2(a.x-v,a.y-v);};Vector2.multiply=function(a,b){if(b instanceof Vector2)return new Vector2(a.x*b.x,a.y*b.y);else return new Vector2(a.x*v,a.y*v);};Vector2.divide=function(a,b){if(b instanceof Vector2)return new Vector2(a.x/b.x,a.y/b.y);else return new Vector2(a.x/v,a.y/v);};Vector2.equals=function(a,b){return a.x==b.x&&a.y==b.y;};Vector2.dot=function(a,b){return a.x*b.x+a.y*b.y;};Vector2.cross=function(a,b){return a.x*b.y-a.y*b.x;};});

// lib/plugins/data/color-rgb.js
ig.baked=true;ig.module('plugins.data.color-rgb').defines(function(){ColorRGB=function(r,g,b,a){this.r=r||0;this.g=g||0;this.b=b||0;this.a=a||0;};ColorRGB.prototype={setRandomColor:function()
{this.r=Math.round(Math.random()*255);this.g=Math.round(Math.random()*255);this.b=Math.round(Math.random()*255);},getStyle:function()
{return"rgba("+this.r+","+
this.g+","+
this.b+","+
this.a+")";},getHex:function(){var r=this.r.toString(16);var g=this.g.toString(16);var b=this.b.toString(16);var padding=2;while(r.length<padding){r="0"+r;}
while(g.length<padding){g="0"+g;}
while(b.length<padding){b="0"+b;}
return"#"+r+g+b;},getInvertedColor:function()
{return new ColorRGB(255-this.r,255-this.g,255-this.b,255-this.a);},clone:function(){return new ColorRGB(this.r,this.g,this.b,this.a);}};});

// lib/plugins/font/font-info.js
ig.baked=true;ig.module('plugins.font.font-info').requires('impact.impact').defines(function(){ig.FontInfo=ig.Class.extend({fonts:[{name:'montserrat',source:'media/fonts/montserrat'}],init:function(){this.registerCssFont();},registerCssFont:function(){if(this.fonts.length>0){var newStyle=document.createElement('style');newStyle.type="text/css";var textNode='';for(var i=0;i<this.fonts.length;i++){var font=this.fonts[i];textNode+="@font-face {font-family: '"+font.name+"';src: url('"+font.source+".eot');src: url('"+font.source+".eot?#iefix') format('embedded-opentype'),url('"+font.source+".woff2') format('woff2'),url('"+font.source+".woff') format('woff'),url('"+font.source+".ttf') format('truetype'),url('"+font.source+".svg#svgFontName') format('svg')}";}
newStyle.appendChild(document.createTextNode(textNode));document.head.appendChild(newStyle);}},isValid:function(){for(var i=0;i<this.fonts.length;i++){var font=this.fonts[i];if(!this._isValidName(font.source))
return false;}
return true;},_isValidName:function(name){var regexp=/^[a-z0-9-\/]+$/;var check=name;if(check.search(regexp)==-1)
return false;else
return true;},});});

// lib/plugins/font/font-loader.js
ig.baked=true;ig.module('plugins.font.font-loader').requires('impact.impact','plugins.font.font-info','impact.loader').defines(function(){ig.FontLoader=ig.Class.extend({fontInfo:new ig.FontInfo(),onload:false,onerror:false,init:function(onload,onerror){this.onload=onload;this.onerror=onerror;},load:function(){if(this.fontInfo.isValid()){this._loadByLib();}else{console.error('Only lowercased alphanumeric and dash are allowed for font file name!. Please check the font path');}},_loadByLib:function(){var observers=[];for(var i=0;i<this.fontInfo.fonts.length;i++){var observer=new FontFaceObserver(this.fontInfo.fonts[i].name);observers.push(observer.load());}
Promise.all(observers).then(this.onload).catch(this.onerror);},});ig.Loader.inject({parentLoad:false,load:function(){this.parentLoad=this.parent;new ig.FontLoader(this.onFontLoad.bind(this),this.onFontError.bind(this)).load();},onFontLoad:function(fonts){this.parentLoad();},onFontError:function(err){console.error('Font is not loaded');this.parentLoad();},});});

// lib/plugins/handlers/dom-handler.js
ig.baked=true;ig.module('plugins.handlers.dom-handler').defines(function(){ig.DomHandler=ig.Class.extend({version:"1.1.2",JQUERYAVAILABLE:false,init:function(){this.JQUERYAVAILABLE=this._jqueryAvailable();},_jqueryAvailable:function(){return(typeof jQuery!=="undefined");},addEvent:function(elem,eventName,eventFunction,userCapture){if(this.JQUERYAVAILABLE){elem.on(eventName,eventFunction);}else{elem.addEventListener(eventName,eventFunction,userCapture);}},create:function(domElement){if(this.JQUERYAVAILABLE){var newDomElement=$("<"+domElement+">");return newDomElement;}else{var newDomElement=ig.$new(domElement);return newDomElement;}},getElementByClass:function(classname){if(this.JQUERYAVAILABLE){var string="."+classname;return $(string);}else{return document.getElementsByClassName(classname);}},getElementById:function(id){if(this.JQUERYAVAILABLE){var jqueryObject=$(id);if(jqueryObject.length>0){return $(id);}else{return null;}}else{return ig.$(id);}},appendChild:function(appender,appendee){if(this.JQUERYAVAILABLE){appender.append(appendee);}else{appender.appendChild(appendee);}},appendToBody:function(domElement){if(this.JQUERYAVAILABLE){$("body").append(domElement);}else{document.body.appendChild(domElement);}},appendToHead:function(domElement){if(this.JQUERYAVAILABLE){$("head").append(domElement);}else{document.head.appendChild(domElement);}},removeChild:function(parent,child){if(this.JQUERYAVAILABLE){parent.remove(child);}else{parent.removeChild(child);}},removeFromBody:function(domElement){if(this.JQUERYAVAILABLE){$(domElement).remove();}else{document.body.removeChild(domElement);}},removeFromHead:function(domElement){if(this.JQUERYAVAILABLE){$(domElement).remove();}else{document.head.removeChild(domElement);}},text:function(elem,txt){if(this.JQUERYAVAILABLE){elem.text(txt);}else{elem.innerText=txt;}},val:function(elem,val){if(this.JQUERYAVAILABLE){elem.val(val);}else{elem.value=val;}},getVal:function(elem){if(this.JQUERYAVAILABLE){return elem.val();}else{return elem.value;}},getAttr:function(elem,attr){if(this.JQUERYAVAILABLE){return elem.attr(attr);}else{return elem.getAttribute(attr);}},getText:function(elem){if(this.JQUERYAVAILABLE){return elem.text();}else{return elem.innerText;}},html:function(elem,content){if(this.JQUERYAVAILABLE){elem.html(content);}else{elem.innerHTML=content;}},resize:function(elem,w,h){if(this.JQUERYAVAILABLE){elem.width(w.toFixed(2));elem.height(h.toFixed(2));}else{var tempVisibility=elem.style.visibility;var styleString="width:"+w.toFixed(2)+"px; height:"+h.toFixed(2)+"px;";this.attr(elem,"style",styleString);elem.style.visibility=tempVisibility;}},resizeOffsetLeft:function(elem,w,h,l){if(this.JQUERYAVAILABLE){elem.width(w.toFixed(2));elem.height(h.toFixed(2));elem.css('left',l);}else{var tempVisibility=elem.style.visibility;var styleString="width:"+w.toFixed(2)+"px; height:"+h.toFixed(2)+"px; left: "+l.toFixed(2)+"px;";this.attr(elem,"style",styleString);elem.style.visibility=tempVisibility;}},resizeOffset:function(elem,w,h,l,t){if(this.JQUERYAVAILABLE){elem.width(w.toFixed(2));elem.height(h.toFixed(2));elem.css('left',l);elem.css('top',t);}else{var tempVisibility=elem.style.visibility;var styleString="width:"+w.toFixed(2)+"px; height:"+h.toFixed(2)+"px; left: "+l.toFixed(2)+"px; top: "+t.toFixed(2)+"px;";this.attr(elem,"style",styleString);elem.style.visibility=tempVisibility;}},css:function(elem,keys){if(this.JQUERYAVAILABLE){elem.css(keys);}else{var styleString="";for(var key in keys){styleString+=key+":"+keys[key]+";";}
this.attr(elem,"style",styleString);}},getOffsets:function(elem){if(this.JQUERYAVAILABLE){var offsets=elem.offset();return{left:offsets.left,top:offsets.top};}else{return{left:elem.offsetLeft,top:elem.offsetTop};}},attr:function(elem,key,value){if(typeof(value)==="undefined"){if(this.JQUERYAVAILABLE){return elem.attr(key);}else{return elem.getAttribute(key);}}else{if(this.JQUERYAVAILABLE){elem.attr(key,value);}else{elem.setAttribute(key,value);}}},show:function(elem){if(!elem||typeof(elem)==="undefined"){return;}
if(this.JQUERYAVAILABLE){elem.show();elem.css("visibility","visible");}else{if(elem){if(elem.style){elem.style.visibility="visible";}else{if(elem[0]){elem[0].style.visibility="visible";}}}}},hide:function(elem){if(!elem||typeof(elem)==="undefined"){return;}
if(this.JQUERYAVAILABLE){elem.hide();elem.css("visibility","hidden");}else{if(elem){if(elem.style){elem.style.visibility="hidden";}else{if(elem[0]){elem[0].style.visibility="hidden";}}}}},getQueryVariable:function(variable){var query=window.location.search.substring(1);var vars=query.split('&');for(var i=0;i<vars.length;i++){var pair=vars[i].match(/([^=]+?)=(.+)/);if(pair&&decodeURIComponent(pair[1])==variable){return decodeURIComponent(pair[2]);}}},forcedDeviceDetection:function(){var device=this.getQueryVariable("device");if(device){switch(device){case'mobile':console.log('serving mobile version ...');ig.ua.mobile=true;break;case'desktop':console.log('serving desktop version ...');ig.ua.mobile=false;break;default:console.log('serving universal version ...');break;}}else{console.log('serving universal version ...');}},forcedDeviceRotation:function(){var force_rotate=this.getQueryVariable("force-rotate");if(force_rotate){switch(force_rotate){case'portrait':console.log('force rotate to portrait')
window.orientation=0;break;case'landscape':console.log('force rotate to horizontal')
window.orientation=90;break;default:alert('wrong command/type in param force-rotate. Defaulting value to portrait');window.orientation=0;}}},setZIndex:function(elem,val){if(this.JQUERYAVAILABLE){elem.css("zIndex",val);}else{if(elem){if(elem.style){elem.style.zIndex=val;}else{if(elem[0]){elem[0].style.zIndex=val;}}}}}});});

// lib/plugins/handlers/size-handler.js
ig.baked=true;ig.module('plugins.handlers.size-handler').requires('plugins.data.vector').defines(function(){ig.SizeHandler=ig.Class.extend({portraitMode:true,disableStretchToFitOnMobileFlag:false,enableStretchToFitOnAntiPortraitModeFlag:true,enableScalingLimitsOnMobileFlag:false,minScalingOnMobile:0.0,maxScalingOnMobile:1.0,enableStretchToFitOnDesktopFlag:false,enableScalingLimitsOnDesktopFlag:false,minScalingOnDesktop:0.0,maxScalingOnDesktop:1.0,desktop:{actualSize:new Vector2(window.innerWidth,window.innerHeight),actualResolution:new Vector2(1080,1080)},mobile:{actualSize:new Vector2(window.innerWidth,window.innerHeight),actualResolution:new Vector2(1080,1080)},windowSize:new Vector2(window.innerWidth,window.innerHeight),scaleRatioMultiplier:new Vector2(1,1),sizeRatio:new Vector2(1,1),scale:1,domHandler:null,dynamicClickableEntityDivs:{},coreDivsToResize:['#canvas','#play','#orientate'],adsToResize:{'MobileAdInGamePreroll':{'box-width':_SETTINGS['Ad']['Mobile']['Preroll']['Width']+2,'box-height':_SETTINGS['Ad']['Mobile']['Preroll']['Height']+20,},'MobileAdInGameEnd':{'box-width':_SETTINGS['Ad']['Mobile']['End']['Width']+2,'box-height':_SETTINGS['Ad']['Mobile']['End']['Height']+20,},'MobileAdInGamePreroll2':{'box-width':_SETTINGS['Ad']['Mobile']['Preroll']['Width']+2,'box-height':_SETTINGS['Ad']['Mobile']['Preroll']['Height']+20,},'MobileAdInGameEnd2':{'box-width':_SETTINGS['Ad']['Mobile']['End']['Width']+2,'box-height':_SETTINGS['Ad']['Mobile']['End']['Height']+20,},'MobileAdInGamePreroll3':{'box-width':_SETTINGS['Ad']['Mobile']['Preroll']['Width']+2,'box-height':_SETTINGS['Ad']['Mobile']['Preroll']['Height']+20,},'MobileAdInGameEnd3':{'box-width':_SETTINGS['Ad']['Mobile']['End']['Width']+2,'box-height':_SETTINGS['Ad']['Mobile']['End']['Height']+20,},},init:function(domHandler)
{this.domHandler=domHandler;if(typeof(domHandler)==="undefined")
{throw"undefined Dom Handler for Size Handler";}
this.sizeCalcs();this.eventListenerSetup();this.samsungFix();},sizeCalcs:function()
{this.windowSize=new Vector2(window.innerWidth,window.innerHeight);if(ig.ua.mobile)
{this.mobile.actualSize=new Vector2(window.innerWidth,window.innerHeight);var mobileTempSize=new Vector2(this.mobile.actualResolution.x,this.mobile.actualResolution.y);this.scaleRatioMultiplier=new Vector2(this.mobile.actualSize.x/mobileTempSize.x,this.mobile.actualSize.y/mobileTempSize.y);if(this.disableStretchToFitOnMobileFlag){var multiplier=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y);if(this.enableScalingLimitsOnMobileFlag){multiplier=multiplier.limit(this.minScalingOnMobile,this.maxScalingOnMobile);}
this.mobile.actualSize.x=mobileTempSize.x*multiplier;this.mobile.actualSize.y=mobileTempSize.y*multiplier;this.scaleRatioMultiplier.x=multiplier;this.scaleRatioMultiplier.y=multiplier;}else{this.sizeRatio.x=this.scaleRatioMultiplier.x;this.sizeRatio.y=this.scaleRatioMultiplier.y;this.scaleRatioMultiplier.x=1;this.scaleRatioMultiplier.y=1;}}
else
{this.desktop.actualSize=new Vector2(window.innerWidth,window.innerHeight);var desktopTempSize=new Vector2(this.desktop.actualResolution.x,this.desktop.actualResolution.y);this.scaleRatioMultiplier=new Vector2(this.desktop.actualSize.x/desktopTempSize.x,this.desktop.actualSize.y/desktopTempSize.y);if(this.enableStretchToFitOnDesktopFlag){this.sizeRatio.x=this.scaleRatioMultiplier.x;this.sizeRatio.y=this.scaleRatioMultiplier.y;this.scaleRatioMultiplier.x=1;this.scaleRatioMultiplier.y=1;}else{var multiplier=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y);if(this.enableScalingLimitsOnDesktopFlag){multiplier=multiplier.limit(this.minScalingOnDesktop,this.maxScalingOnDesktop);}
this.desktop.actualSize.x=desktopTempSize.x*multiplier;this.desktop.actualSize.y=desktopTempSize.y*multiplier;this.scaleRatioMultiplier.x=multiplier;this.scaleRatioMultiplier.y=multiplier;}}},resizeLayers:function(width,height)
{for(var index=0;index<this.coreDivsToResize.length;index++)
{var elem=ig.domHandler.getElementById(this.coreDivsToResize[index]);if(ig.ua.mobile)
{if(this.disableStretchToFitOnMobileFlag){var l=Math.floor(((ig.sizeHandler.windowSize.x/2)-(ig.sizeHandler.mobile.actualSize.x/2)));var t=Math.floor(((ig.sizeHandler.windowSize.y/2)-(ig.sizeHandler.mobile.actualSize.y/2)));if(l<0)l=0;if(t<0)t=0;ig.domHandler.resizeOffset(elem,Math.floor(ig.sizeHandler.mobile.actualSize.x),Math.floor(ig.sizeHandler.mobile.actualSize.y),l,t);var test=false;if(this.portraitMode){test=window.innerHeight<window.innerWidth;}
else{test=window.innerHeight>window.innerWidth;}
if(test){if(this.enableStretchToFitOnAntiPortraitModeFlag){ig.domHandler.resizeOffset(elem,Math.floor(window.innerWidth),Math.floor(window.innerHeight),0,0);}else{var scaleRatioMultiplier=new Vector2(window.innerWidth/this.mobile.actualResolution.y,window.innerHeight/this.mobile.actualResolution.x);var temp_multiplier=Math.min(scaleRatioMultiplier.x,scaleRatioMultiplier.y);var w=this.mobile.actualResolution.y*temp_multiplier;var h=this.mobile.actualResolution.x*temp_multiplier;var l=Math.floor(((ig.sizeHandler.windowSize.x/2)-(w/2)));var t=Math.floor(((ig.sizeHandler.windowSize.y/2)-(h/2)));if(l<0)l=0;if(t<0)t=0;ig.domHandler.resizeOffset(elem,Math.floor(w),Math.floor(h),l,t);}}}else{ig.domHandler.resize(elem,Math.floor(ig.sizeHandler.mobile.actualSize.x),Math.floor(ig.sizeHandler.mobile.actualSize.y));}}
else
{if(this.enableStretchToFitOnDesktopFlag){ig.domHandler.resize(elem,Math.floor(ig.sizeHandler.desktop.actualSize.x),Math.floor(ig.sizeHandler.desktop.actualSize.y));}else{var l=Math.floor(((ig.sizeHandler.windowSize.x/2)-(ig.sizeHandler.desktop.actualSize.x/2)));var t=Math.floor(((ig.sizeHandler.windowSize.y/2)-(ig.sizeHandler.desktop.actualSize.y/2)));if(l<0)l=0;if(t<0)t=0;ig.domHandler.resizeOffset(elem,Math.floor(ig.sizeHandler.desktop.actualSize.x),Math.floor(ig.sizeHandler.desktop.actualSize.y),l,t);}}}
for(var key in this.adsToResize)
{var keyDiv=ig.domHandler.getElementById('#'+key);var keyBox=ig.domHandler.getElementById('#'+key+'-Box');var divLeft=(window.innerWidth-this.adsToResize[key]['box-width'])/2+"px";var divTop=(window.innerHeight-this.adsToResize[key]['box-height'])/2+"px";if(keyDiv)
{ig.domHandler.css(keyDiv,{width:window.innerWidth,height:window.innerHeight});}
if(keyBox)
{ig.domHandler.css(keyBox,{left:divLeft,top:divTop});}}
var canvas=ig.domHandler.getElementById("#canvas");var offsets=ig.domHandler.getOffsets(canvas);var offsetLeft=offsets.left;var offsetTop=offsets.top;var aspectRatioMin=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);for(var key in this.dynamicClickableEntityDivs)
{var div=ig.domHandler.getElementById("#"+key);if(ig.ua.mobile){var posX=this.dynamicClickableEntityDivs[key]['entity_pos_x'];var posY=this.dynamicClickableEntityDivs[key]['entity_pos_y'];var sizeX=this.dynamicClickableEntityDivs[key]['width'];var sizeY=this.dynamicClickableEntityDivs[key]['height'];if(this.disableStretchToFitOnMobileFlag){var divleft=Math.floor(offsetLeft+posX*this.scaleRatioMultiplier.x)+"px";var divtop=Math.floor(offsetTop+posY*this.scaleRatioMultiplier.y)+"px";var divwidth=Math.floor(sizeX*this.scaleRatioMultiplier.x)+"px";var divheight=Math.floor(sizeY*this.scaleRatioMultiplier.y)+"px";}else{var divleft=Math.floor(posX*this.sizeRatio.x)+"px";var divtop=Math.floor(posY*this.sizeRatio.y)+"px";var divwidth=Math.floor(sizeX*this.sizeRatio.x)+"px";var divheight=Math.floor(sizeY*this.sizeRatio.y)+"px";}
ig.domHandler.css(div,{float:"left",position:"absolute",left:divleft,top:divtop,width:divwidth,height:divheight,"z-index":3});}
else
{var posX=this.dynamicClickableEntityDivs[key]['entity_pos_x'];var posY=this.dynamicClickableEntityDivs[key]['entity_pos_y'];var sizeX=this.dynamicClickableEntityDivs[key]['width'];var sizeY=this.dynamicClickableEntityDivs[key]['height'];if(this.enableStretchToFitOnDesktopFlag){var divleft=Math.floor(posX*this.sizeRatio.x)+"px";var divtop=Math.floor(posY*this.sizeRatio.y)+"px";var divwidth=Math.floor(sizeX*this.sizeRatio.x)+"px";var divheight=Math.floor(sizeY*this.sizeRatio.y)+"px";}else{var divleft=Math.floor(offsetLeft+posX*this.scaleRatioMultiplier.x)+"px";var divtop=Math.floor(offsetTop+posY*this.scaleRatioMultiplier.y)+"px";var divwidth=Math.floor(sizeX*this.scaleRatioMultiplier.x)+"px";var divheight=Math.floor(sizeY*this.scaleRatioMultiplier.y)+"px";}
ig.domHandler.css(div,{float:"left",position:"absolute",left:divleft,top:divtop,width:divwidth,height:divheight,"z-index":3});}
if(this.dynamicClickableEntityDivs[key]['font-size']){var fontSize=this.dynamicClickableEntityDivs[key]['font-size'];ig.domHandler.css(div,{"font-size":(fontSize*aspectRatioMin)+"px"});}}
$('#ajaxbar').width(this.windowSize.x);$('#ajaxbar').height(this.windowSize.y);},resize:function()
{this.sizeCalcs();this.resizeLayers();},reorient:function()
{console.log('changing orientation ...');if(ig.ua.mobile){var test=false;if(this.portraitMode){test=window.innerHeight<window.innerWidth;}
else{test=window.innerHeight>window.innerWidth;}
var orientate=this.domHandler.getElementById("#orientate");var canvas=this.domHandler.getElementById("#game");if(test){this.domHandler.show(orientate);this.domHandler.hide(canvas);}else{this.domHandler.show(canvas);this.domHandler.hide(orientate);}}
if(!ig.ua.mobile)
{this.resize();}
else
{this.resize();this.resizeAds();}},resizeAds:function()
{for(var key in this.adsToResize)
{var keyDiv=ig.domHandler.getElementById('#'+key);var keyBox=ig.domHandler.getElementById('#'+key+'-Box');var divLeft=(window.innerWidth-this.adsToResize[key]['box-width'])/2+"px";var divTop=(window.innerHeight-this.adsToResize[key]['box-height'])/2+"px";if(keyDiv)
{ig.domHandler.css(keyDiv,{width:window.innerWidth,height:window.innerHeight});}
if(keyBox)
{ig.domHandler.css(keyBox,{left:divLeft,top:divTop});}}},samsungFix:function()
{if(!ig.ua.android)return;if(parseFloat(navigator.userAgent.slice(navigator.userAgent.indexOf("Android")+8,navigator.userAgent.indexOf("Android")+11))<4.2)return;if(navigator.userAgent.indexOf("GT")<0)return;if(navigator.userAgent.indexOf("Chrome")>0)return;if(navigator.userAgent.indexOf("Firefox")>0)return;document.addEventListener("touchstart",function(evt){evt.preventDefault();return false;},false);document.addEventListener("touchmove",function(evt){evt.preventDefault();return false;},false);document.addEventListener("touchend",function(evt){evt.preventDefault();return false;},false);},orientationInterval:null,orientationTimeout:null,orientationHandler:function(){this.reorient();window.scrollTo(0,1);},orientationDelayHandler:function(){if(this.orientationInterval==null)
{this.orientationInterval=window.setInterval(this.orientationHandler.bind(this),100);}
if(this.orientationTimeout==null)
{this.orientationTimeout=window.setTimeout(function(){this.clearAllIntervals()}.bind(this),2000);}},clearAllIntervals:function()
{window.clearInterval(this.orientationInterval);this.orientationInterval=null;window.clearTimeout(this.orientationTimeout);this.orientationTimeout=null;},eventListenerSetup:function()
{if(ig.ua.iOS)
{window.addEventListener("orientationchange",this.orientationDelayHandler.bind(this));window.addEventListener("resize",this.orientationDelayHandler.bind(this));}
else
{window.addEventListener("orientationchange",this.orientationHandler.bind(this));window.addEventListener("resize",this.orientationHandler.bind(this));}
document.addEventListener("touchmove",function(e){window.scrollTo(0,1);e.preventDefault();},{passive:false});this.chromePullDownRefreshFix();},chromePullDownRefreshFix:function()
{var a=window.chrome||navigator.userAgent.match('CriOS'),b='ontouchstart'in document.documentElement;if(a&&b){var c=!1,d=!1,e=0,f=!1;try{CSS.supports('overscroll-behavior-y','contain')&&(c=!0)}catch(a){}
try{if(c)return document.body.style.overscrollBehaviorY='contain';}
catch(a){}
var g=document.head||document.body,h=document.createElement('style');h.type='text/css',h.styleSheet?h.styleSheet.cssText='\n      ::-webkit-scrollbar {\n        width: 500x;\n      }\n      ::-webkit-scrollbar-thumb {\n        border-radius: 500px;\n        background-color: rgba(0, 0, 0, 0.2);\n      }\n      body {\n        -webkit-overflow-scrolling: auto!important;\n      }\n    ':h.appendChild(document.createTextNode('\n      ::-webkit-scrollbar {\n        width: 500px;\n      }\n      ::-webkit-scrollbar-thumb {\n        border-radius: 500px;\n        background-color: rgba(0, 0, 0, 0.2);\n      }\n      body {\n        -webkit-overflow-scrolling: auto!important;\n      }\n    ')),g.appendChild(h);try{addEventListener('test',null,{get passive(){d=!0}})}catch(a){}
var i=function(a){e=a.touches[0].clientY},j=function(a){var b=a.touches[0].clientY,c=b-e;return e=b,0<c},k=function(a){1!==a.touches.length||(i(a),f=0===window.pageYOffset)},l=function(a){if(f&&(f=!1,j(a)))return a.preventDefault()};document.addEventListener('touchstart',k,!!d&&{passive:!0}),document.addEventListener('touchmove',l,!!d&&{passive:!1})}},});});

// lib/plugins/handlers/api-handler.js
ig.baked=true;ig.module('plugins.handlers.api-handler').defines(function(){ig.ApiHandler=ig.Class.extend({apiAvailable:{MJSPreroll:function()
{if(ig.ua.mobile)
{if(ig.domHandler.JQUERYAVAILABLE)
{if(_SETTINGS&&_SETTINGS['Ad']['Mobile']['Preroll']['Enabled'])
{MobileAdInGamePreroll.Initialize();}}}},MJSHeader:function()
{if(ig.ua.mobile)
{if(ig.domHandler.JQUERYAVAILABLE)
{if(_SETTINGS['Ad']['Mobile']['Header']['Enabled'])
{MobileAdInGameHeader.Initialize();}}}},MJSFooter:function()
{if(ig.ua.mobile)
{if(ig.domHandler.JQUERYAVAILABLE)
{if(_SETTINGS['Ad']['Mobile']['Footer']['Enabled'])
{MobileAdInGameFooter.Initialize();}}}},MJSEnd:function()
{if(ig.ua.mobile)
{if(ig.domHandler.JQUERYAVAILABLE)
{if(_SETTINGS['Ad']['Mobile']['End']['Enabled'])
{MobileAdInGameEnd.Initialize();}}}},},run:function(apiId,params)
{if(this.apiAvailable[apiId])
{this.apiAvailable[apiId](params);}},});});

// lib/plugins/audio/sound-player.js
ig.baked=true;ig.module('plugins.audio.sound-player').defines(function(){SoundPlayer=ig.Class.extend({tagName:"SoundPlayer",stayMuteFlag:false,debug:false,init:function(list,options){if(this.debug)
{console.log(this.tagName);}},play:function(id){if(this.debug)
{console.log("play sound ",id);}},stop:function(id){if(this.debug)
{console.log("stop sound ")}},volume:function(value){if(this.debug)
{console.log("set volume");}},mute:function(flagChange){if(this.debug)
{console.log("mute");}
if(typeof(flagChange)==="undefined")
{this.stayMuteFlag=true;}
else
{if(flagChange)
{this.stayMuteFlag=true;}}},unmute:function(flagChange){if(this.debug)
{console.log("unmute");}
if(typeof(flagChange)==="undefined")
{this.stayMuteFlag=false;}
else
{if(flagChange)
{this.stayMuteFlag=false;}}}});});

// lib/plugins/audio/impact-music-player.js
ig.baked=true;ig.module('plugins.audio.impact-music-player').requires('plugins.audio.sound-player').defines(function(){ImpactMusicPlayer=SoundPlayer.extend({tagName:"ImpactMusicPlayer",bgmPlaying:false,soundList:{},init:function(list,options){this.parent(list,options);for(var soundName in list)
{this.soundList[soundName]=soundName;var string=list[soundName].path+".*";ig.music.add(string,soundName);}
if(options)
{if(options.loop)
{ig.music.loop=options.loop;}}},play:function(id)
{if(!this.stayMuteFlag)
{this.bgmPlaying=true;if(typeof(id)==="undefined")
{ig.music.play(id);}
else
{ig.music.play();}}},stop:function(id)
{this.bgmPlaying=false;ig.music.pause();},volume:function(value)
{var temp=value;console.log("impactmusic:",temp);if(temp<0)
{ig.music.volume=0;return;}
if(isNaN(value))
{ig.music.volume=1;}
else if(value>1)
{ig.music.volume=1;}
else
{ig.music.volume=value;}},getVolume:function()
{return ig.music.volume;},mute:function(option)
{this.parent(option);if(this.bgmPlaying)
{this.stop();}},unmute:function(option)
{this.parent(option);this.play();}});});

// lib/plugins/audio/impact-sound-player.js
ig.baked=true;ig.module('plugins.audio.impact-sound-player').requires('plugins.audio.sound-player').defines(function(){ImpactSoundPlayer=SoundPlayer.extend({tagName:"ImpactSoundPlayer",soundList:{},init:function(list,options){this.parent(list,options);for(var soundName in list)
{var soundPath=list[soundName].path;var pathOgg=soundPath+ig.Sound.FORMAT.OGG.ext;var pathMp3=soundPath+ig.Sound.FORMAT.MP3.ext;var string=soundPath+".*";var sound=new ig.Sound(string);this.soundList[soundName]=sound;}},play:function(id)
{if(!this.stayMuteFlag)
{if(typeof(id)==="object")
{console.log(id+" exists")
id.play();}
else if(typeof(id)==="string")
{this.soundList[id].play();}}},stop:function(id)
{this.parent(id);id.stop();},volume:function(value)
{var temp=value;if(temp<0)
{ig.soundManager.volume=0;return;}
if(isNaN(value))
{ig.soundManager.volume=1;}
else if(value>1)
{ig.soundManager.volume=1;}
else
{ig.soundManager.volume=value;}},getVolume:function()
{return ig.soundManager.volume;},mute:function(option){this.parent(option);ig.Sound.enabled=false;},unmute:function(option){this.parent(option);ig.Sound.enabled=true;}});});

// lib/plugins/audio/howler-player.js
ig.baked=true;ig.module('plugins.audio.howler-player').requires('plugins.audio.sound-player').defines(function(){HowlerPlayer=SoundPlayer.extend({tagName:"HowlerPlayer",soundList:{},init:function(list,options){this.parent(list,options);for(var soundName in list)
{var soundPath=list[soundName].path;var pathOgg=soundPath+"."+ig.Sound.FORMAT.OGG.ext;var pathMp3=soundPath+"."+ig.Sound.FORMAT.MP3.ext;var sound=new Howl({src:[pathOgg,pathMp3]});this.soundList[soundName]=sound;}},play:function(id)
{if(Howler.ctx&&Howler.ctx.state!=="running"){return Howler.ctx.resume();}
if(!this.stayMuteFlag)
{if(typeof(id)==="object")
{id.play();}
else if(typeof(id)==="string")
{this.soundList[id].play();}}},stop:function(id)
{this.parent(id);if(typeof(id)==="object")
{id.stop();}
else if(typeof(id)==="string")
{this.soundList[id].stop();}},volume:function(value)
{var temp=value;for(var sound in this.soundList)
{if(temp<0)
{this.soundList[sound].volume(0);return;}
if(isNaN(value))
{this.soundList[sound].volume(1);}
else if(value>1)
{this.soundList[sound].volume(1);}
else
{this.soundList[sound].volume(value);}}},getVolume:function()
{for(var sound in this.soundList)
{return this.soundList[sound].volume();}},mute:function(option){this.parent(option);Howler.mute(true);},unmute:function(option){this.parent(option);Howler.mute(false);}});});

// lib/plugins/audio/howler-music-player.js
ig.baked=true;ig.module('plugins.audio.howler-music-player').requires('plugins.audio.sound-player').defines(function(){HowlerMusicPlayer=SoundPlayer.extend({tagName:"HowlerMusicPlayer",bgmPlaying:false,soundList:{},init:function(list,options){this.parent(list,options);for(var soundName in list)
{var soundPath=list[soundName].path;var pathOgg=soundPath+"."+ig.Sound.FORMAT.OGG.ext;var pathMp3=soundPath+"."+ig.Sound.FORMAT.MP3.ext;var sound=new Howl({src:[pathOgg,pathMp3],loop:true,autoplay:false,onend:function(){}.bind(this)});this.soundList[soundName]=sound;}},play:function(id)
{if(!this.stayMuteFlag)
{if(this.bgmPlaying)
{return;}
if(typeof(id)==="object")
{this.bgmPlaying=true;id.play();}
else if(typeof(id)==="string")
{this.bgmPlaying=true;this.soundList[id].play();}
else
{for(var key in this.soundList)
{this.soundList[key].play();this.bgmPlaying=true;return;}}}},stop:function(id)
{this.parent(id);if(!this.bgmPlaying)
{return;}
for(var key in this.soundList)
{this.soundList[key].stop();}
this.bgmPlaying=false;},volume:function(value)
{var temp=value;console.log("howler",value);for(var sound in this.soundList)
{if(temp<0)
{this.soundList[sound].volume(0);return;}
if(isNaN(value))
{this.soundList[sound].volume(1);}
else if(value>1)
{this.soundList[sound].volume(1);}
else
{this.soundList[sound].volume(value);}}},getVolume:function()
{for(var sound in this.soundList)
{return this.soundList[sound].volume();}},mute:function(option){this.parent(option);Howler.mute(true);},unmute:function(option){this.parent(option);Howler.mute(false);}});});

// lib/plugins/audio/jukebox-player.js
ig.baked=true;ig.module('plugins.audio.jukebox-player').requires('plugins.audio.sound-player').defines(function(){JukeboxPlayer=SoundPlayer.extend({tagName:"JukeboxPlayer",bgmPlaying:false,soundList:{},jukeboxPlayer:null,pausePosition:0,premuteVolume:0,minVolume:0.001,init:function(list,options){this.parent(list,options);for(var soundName in list)
{this.soundList[soundName]=soundName;var string=list[soundName].path+".*";var soundPath=list[soundName].path;var pathOgg=soundPath+"."+ig.Sound.FORMAT.OGG.ext;var pathMp3=soundPath+"."+ig.Sound.FORMAT.MP3.ext;var loop=false;if(options)
{if(options.loop)
{loop=options.loop;}}
this.jukeboxPlayer=new jukebox.Player({resources:[pathOgg,pathMp3],autoplay:false,spritemap:{music:{start:list[soundName].startMp3,end:list[soundName].endMp3,loop:true}}});}},play:function(id)
{if(!this.stayMuteFlag)
{this.bgmPlaying=true;if(this.pausePosition)
{console.log("resume")
this.jukeboxPlayer.resume(this.pausePosition);}
else
{console.log("play")
this.jukeboxPlayer.play(this.jukeboxPlayer.settings.spritemap.music.start,true);}
this.premuteVolume=this.getVolume();}},stop:function(id)
{this.bgmPlaying=false;this.pausePosition=this.jukeboxPlayer.pause();},volume:function(value)
{var temp=value;console.log("jukebox:",temp);if(temp<=0)
{this.jukeboxPlayer.setVolume(this.minVolume);return;}
if(isNaN(value))
{this.jukeboxPlayer.setVolume(1);}
else if(value>1)
{this.jukeboxPlayer.setVolume(1);}
else
{this.jukeboxPlayer.setVolume(value);}},getVolume:function()
{return this.jukeboxPlayer.getVolume();},mute:function(option)
{this.parent(option);if(this.bgmPlaying)
{console.log("jukebox",this.premuteVolume);if(!this.stayMuteFlag)
{this.premuteVolume=this.getVolume();}
this.jukeboxPlayer.pause();this.jukeboxPlayer.setVolume(this.minVolume);}},unmute:function(option)
{this.parent(option);if(!this.stayMuteFlag)
{console.log("jukebox",this.premuteVolume);this.jukeboxPlayer.setVolume(this.premuteVolume);this.jukeboxPlayer.resume();}}});});

// lib/plugins/audio/webaudio-music-player.js
ig.baked=true;ig.module('plugins.audio.webaudio-music-player').requires('plugins.audio.sound-player').defines(function(){WebaudioMusicPlayer=SoundPlayer.extend({tagName:"WebaudioMusicPlayer",bgmPlaying:false,isSupported:false,muteFlag:false,pausedTime:0,webaudio:null,useHTML5Audio:false,audio:null,inactiveAudio:null,codecs:null,reinitOnPlay:false,inputList:null,_volume:1,soundList:{},init:function(list){this.webaudio={compatibility:{},gainNode:null,buffer:null,source_loop:{},source_once:{}};try{if(Howler&&Howler.ctx){this.webaudio.context=Howler.ctx;}else if(ig&&ig.webaudio_ctx){this.webaudio.context=ig.webaudio_ctx;}else{this.AudioContext=window.AudioContext||window.webkitAudioContext;this.webaudio.context=new this.AudioContext();ig.webaudio_ctx=this.webaudio.context;}
this.isSupported=true;}catch(e){console.log('Web Audio API not supported in this browser.');this.webaudio=null;this.useHTML5Audio=true;}
if(this.useHTML5Audio){if(typeof(Audio)!=='undefined'){try{new Audio();}catch(e){this.useHTML5Audio=false;}}else{this.useHTML5Audio=false;}}
if(this.useHTML5Audio){this.audio=new Audio();this.isSupported=true;this.initHTML5Audio(list);}
if(!this.isSupported){return null;}
if(this.webaudio){this.inputList=list;this.initWebAudio(list);}},initWebAudio:function(list){if(ig.ua.iOS){this.initIOSWebAudioUnlock();}
this.webaudio.gainNode=(typeof this.webaudio.context.createGain==='undefined')?this.webaudio.context.createGainNode():this.webaudio.context.createGain();this.webaudio.gainNode.connect(this.webaudio.context.destination);this.webaudio.gainNode.gain.value=this._volume;this.webaudio.buffer=null;var start='start',stop='stop',buffer=this.webaudio.context.createBufferSource();if(typeof buffer.start!=='function'){start='noteOn';}
this.webaudio.compatibility.start=start;if(typeof buffer.stop!=='function'){stop='noteOff';}
this.webaudio.compatibility.stop=stop;for(var soundName in list)
{this.soundList[soundName]=soundName;var soundPath=list[soundName].path;var pathOgg=soundPath+"."+ig.Sound.FORMAT.OGG.ext;var pathMp3=soundPath+"."+ig.Sound.FORMAT.MP3.ext;var path=pathOgg;if(ig.ua.mobile){if(ig.ua.iOS){path=pathMp3;}}else{var ua=navigator.userAgent.toLowerCase();if(ua.indexOf('safari')!=-1){if(ua.indexOf('chrome')<=-1){path=pathMp3;}}
if(ua.indexOf("win64")){path=pathMp3;}}
var req=new XMLHttpRequest();req.open('GET',path,true);req.responseType='arraybuffer';req.onload=function(){this.webaudio.context.decodeAudioData(req.response,function(buffer){this.webaudio.buffer=buffer;this.webaudio.source_loop={};if(this.bgmPlaying){this.play(null,true);}else{this.stop();}}.bind(this),function(){console.log('Error decoding audio "'+path+'".');});}.bind(this);req.send();if(req.readyState==4){if(typeof(Audio)!=='undefined'){this.useHTML5Audio=true;try{new Audio();}catch(e){this.useHTML5Audio=false;}
if(this.useHTML5Audio){console.log('Using HTML5 Audio');this.webaudio=null;this.audio=new Audio();this.isSupported=true;this.initHTML5Audio(list);}}}
return;}},initIOSWebAudioUnlock:function(){if(!this.webaudio)return;webaudio=this.webaudio;var unlock=function(){var ctx=webaudio.context;var buffer=ctx.createBuffer(1,1,22050);var source=ctx.createBufferSource();source.buffer=buffer;source.connect(ctx.destination);if(typeof source.start==='undefined'){source.noteOn(0);}else{source.start(0);}
setTimeout(function(){if((source.playbackState===source.PLAYING_STATE||source.playbackState===source.FINISHED_STATE)){window.removeEventListener('touchend',unlock,false);}}.bind(this),0);};window.addEventListener('touchend',unlock,false);},initHTML5Audio:function(list){if(!this.useHTML5Audio||!this.audio)return;var audio=this.audio;this.codecs={};this.codecs={mp3:!!audio.canPlayType('audio/mpeg;').replace(/^no$/,''),opus:!!audio.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,''),ogg:!!audio.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,''),wav:!!audio.canPlayType('audio/wav; codecs="1"').replace(/^no$/,''),aac:!!audio.canPlayType('audio/aac;').replace(/^no$/,''),m4a:!!(audio.canPlayType('audio/x-m4a;')||audio.canPlayType('audio/m4a;')||audio.canPlayType('audio/aac;')).replace(/^no$/,''),mp4:!!(audio.canPlayType('audio/x-mp4;')||audio.canPlayType('audio/mp4;')||audio.canPlayType('audio/aac;')).replace(/^no$/,''),weba:!!audio.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,'')};this.is={ff:Boolean(!(window.mozInnerScreenX==null)&&/firefox/.test(navigator.userAgent.toLowerCase())),ie:Boolean(document.all&&!window.opera),opera:Boolean(window.opera),chrome:Boolean(window.chrome),safari:Boolean(!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase())&&window.getComputedStyle&&!window.globalStorage&&!window.opera)};this.playDelay=-60;this.stopDelay=30;if(this.is.chrome)this.playDelay=-25;if(this.is.chrome)this.stopDelay=25;if(this.is.ff)this.playDelay=-25;if(this.is.ff)this.stopDelay=85;if(this.is.opera)this.playDelay=5;if(this.is.opera)this.stopDelay=0;for(var soundName in list)
{this.soundList[soundName]=soundName;var soundPath=list[soundName].path;var pathOgg=soundPath+"."+ig.Sound.FORMAT.OGG.ext;var pathMp3=soundPath+"."+ig.Sound.FORMAT.MP3.ext;var path=null;if(this.codecs[ig.Sound.FORMAT.OGG.ext.toLowerCase()]){path=pathOgg;}else if(this.codecs[ig.Sound.FORMAT.MP3.ext.toLowerCase()]){path=pathMp3;}
if(!path)continue;if(ig.ua.mobile){if(ig.ua.iOS){path=pathMp3;}}else{var ua=navigator.userAgent.toLowerCase();if(ua.indexOf('safari')!=-1){if(ua.indexOf('chrome')<=-1){path=pathMp3;}}}
this.audio.addEventListener('error',function(){if(this.audio.error&&this.audio.error.code===4){this.isSupported=false;}},false);this.audio.src=path;this.audio._pos=0;this.audio.preload='auto';this.audio.volume=this._volume;this.inactiveAudio=new Audio();this.inactiveAudio.src=path;this.inactiveAudio._pos=0;this.inactiveAudio.preload='auto';this.inactiveAudio.volume=this._volume;this.inactiveAudio.load();var listener=function(){this._duration=this.audio.duration;if(!this._loaded){this._loaded=true;}
if(this.bgmPlaying){this.play(null,true);}else{this.stop();}
this.audio.removeEventListener('canplaythrough',listener,false);}.bind(this);this.audio.addEventListener('canplaythrough',listener,false);this.audio.load();return;}},play:function(offset,onInit)
{if(!this.isSupported)return;this.bgmPlaying=true;if(this.webaudio){if(!onInit&&this.reinitOnPlay){if(this.webaudio.source_loop.buffer==this.webaudio.buffer){if(this.webaudio.source_loop._playing){this.webaudio.source_loop[this.webaudio.compatibility.stop](0);this.webaudio.source_loop._playing=false;var d=this.webaudio.context.currentTime-this.webaudio.source_loop._startTime;this.pausedTime+=d;this.pausedTime=this.pausedTime%this.webaudio.source_loop.buffer.duration;this.webaudio.source_loop._startTime=0;if(this.webaudio.compatibility.start==='noteOn'){this.webaudio.source_once[this.webaudio.compatibility.stop](0);}}
try{this.webaudio.context.close();this.webaudio.context=new this.AudioContext();this.webaudio.gainNode=this.webaudio.context.createGain();this.webaudio.gainNode.connect(this.webaudio.context.destination);this.webaudio.gainNode.gain.value=this._volume;var start='start',stop='stop',buffer=this.webaudio.context.createBufferSource();if(typeof buffer.start!=='function'){start='noteOn';}
this.webaudio.compatibility.start=start;if(typeof buffer.stop!=='function'){stop='noteOff';}
this.webaudio.compatibility.stop=stop;this.webaudio.source_loop={};this.play(null,true);}catch(e){}}}
if(!this.webaudio.buffer){this.bgmPlaying=true;return;}
if(!this.muteFlag)
{this.bgmPlaying=true;if(this.webaudio.source_loop._playing){}else{this.webaudio.source_loop=this.webaudio.context.createBufferSource();this.webaudio.source_loop.buffer=this.webaudio.buffer;this.webaudio.source_loop.loop=true;this.webaudio.source_loop.connect(this.webaudio.gainNode);if(offset==null||isNaN(offset)){offset=0;if(this.pausedTime){offset=this.pausedTime;}}
this.webaudio.source_loop._startTime=this.webaudio.context.currentTime;if(this.webaudio.compatibility.start==='noteOn'){this.webaudio.source_once=this.webaudio.context.createBufferSource();this.webaudio.source_once.buffer=this.webaudio.buffer;this.webaudio.source_once.connect(this.webaudio.gainNode);this.webaudio.source_once.noteGrainOn(0,offset,this.webaudio.buffer.duration-offset);this.webaudio.source_loop[this.webaudio.compatibility.start](this.webaudio.context.currentTime+(this.webaudio.buffer.duration-offset));}else{this.webaudio.source_loop[this.webaudio.compatibility.start](0,offset);}
this.webaudio.source_loop._playing=true;}}
return;}
if(this.audio){var node=this.audio;if(!this.muteFlag)
{this.bgmPlaying=true;if(isNaN(offset)){offset=0;if(this.pausedTime){offset=this.pausedTime;}}
var duration=this._duration-offset;if(this._onEndTimer){clearTimeout(this._onEndTimer);this._onEndTimer=null;}
this._onEndTimer=setTimeout(function(){this.audio.currentTime=0;this.audio.pause();this.pausedTime=0;if(this.inactiveAudio){var temp=this.audio;this.audio=this.inactiveAudio;this.inactiveAudio=temp;}
this.play();}.bind(this),duration*1000+this.playDelay);if(node.readyState===4||!node.readyState&&navigator.isCocoonJS){node.readyState=4;node.currentTime=offset;node.muted=this.muteFlag||node.muted;node.volume=this._volume;setTimeout(function(){node.play();},0);}else{clearTimeout(this._onEndTimer);this._onEndTimer=null;(function(){var listener=function(){if(typeof(this.play=='function')){this.play();node.removeEventListener('canplaythrough',listener,false);}}.bind(this);node.addEventListener('canplaythrough',listener,false);}.bind(this))();}}}},stop:function()
{this.bgmPlaying=false;if(!this.isSupported)return;if(this.webaudio){if(this.webaudio.source_loop._playing){this.webaudio.source_loop[this.webaudio.compatibility.stop](0);this.webaudio.source_loop._playing=false;var d=this.webaudio.context.currentTime-this.webaudio.source_loop._startTime;this.pausedTime+=d;this.pausedTime=this.pausedTime%this.webaudio.source_loop.buffer.duration;this.webaudio.source_loop._startTime=0;if(this.webaudio.compatibility.start==='noteOn'){this.webaudio.source_once[this.webaudio.compatibility.stop](0);}}
return;}
if(this.audio){var node=this.audio;if(node.readyState==4){this.pausedTime=node.currentTime;node.currentTime=0;node.pause();clearTimeout(this._onEndTimer);this._onEndTimer=null;}}},volume:function(value)
{if(isNaN(value)||value==null)return this.getVolume();if(!this.isSupported)return;this._volume=value;if(this._volume<0){this._volume=0;}else if(this._volume>1){this._volume=1;}
if(this.webaudio){if(!this.webaudio.gainNode)return;this.webaudio.gainNode.gain.value=this._volume;return;}
if(this.audio){this.audio.volume=this._volume;if(this.inactiveAudio){this.inactiveAudio.volume=this._volume;}}},getVolume:function()
{if(!this.isSupported)return 0;return this._volume;if(this.webaudio){if(!this.webaudio.gainNode)return 0;return this.webaudio.gainNode.gain.value;}
if(this.audio){var node=this.audio;return node.volume;}},mute:function(flagChange)
{this.parent(flagChange);if(this.muteFlag==false){this.muteFlag=true;if(this.bgmPlaying)
{this.stop();this.bgmPlaying=true;}}},unmute:function(flagChange)
{this.parent(flagChange);if(this.stayMuteFlag){return;}
if(this.muteFlag==true){this.muteFlag=false;if(this.bgmPlaying)
{this.play();}}}});});

// lib/plugins/audio/sound-info.js
ig.baked=true;ig.module('plugins.audio.sound-info').defines(function(){SoundInfo=ig.Class.extend({FORMATS:{OGG:".ogg",MP3:".mp3",},sfx:{logosplash1:{path:"media/audio/opening/logosplash1"},logosplash2:{path:"media/audio/opening/logosplash2"},staticSound:{path:"media/audio/play/static"},openingSound:{path:"media/audio/branding/splash/opening"},click:{path:"media/audio/click"},nextcolumn:{path:"media/audio/nextcolumn"},pop:{path:"media/audio/pop"},insufficientfund:{path:"media/audio/insufficientfund"},gameWin:{path:"media/audio/gamewin"},gameLose:{path:"media/audio/gamelose"},unlock:{path:"media/audio/unlock"},extra_chance:{path:"media/audio/extra_chance"}},bgm:{background:{path:'media/audio/bgm',startOgg:0,endOgg:21.463,startMp3:0,endMp3:21.463}},});});

// lib/plugins/audio/sound-handler.js
ig.baked=true;ig.module('plugins.audio.sound-handler').requires('plugins.audio.impact-music-player','plugins.audio.impact-sound-player','plugins.audio.howler-player','plugins.audio.howler-music-player','plugins.audio.jukebox-player','plugins.audio.webaudio-music-player','plugins.audio.sound-info').defines(function(){ig.SoundHandler=ig.Class.extend({bgmPlayer:null,sfxPlayer:null,focusBlurMute:false,soundInfo:new SoundInfo(),init:function(){console.log("Initiating sound handler");if(ig.ua.mobile)
{this.sfxPlayer=new HowlerPlayer(this.soundInfo.sfx);this.bgmPlayer=new WebaudioMusicPlayer(this.soundInfo.bgm,{loop:true});if(!this.bgmPlayer.isSupported){this.bgmPlayer=new JukeboxPlayer(this.soundInfo.bgm,{loop:true});}}
else
{this.sfxPlayer=new HowlerPlayer(this.soundInfo.sfx);this.bgmPlayer=new WebaudioMusicPlayer(this.soundInfo.bgm,{loop:true});if(!this.bgmPlayer.isSupported){this.bgmPlayer=new ImpactMusicPlayer(this.soundInfo.bgm,{loop:true});}}},unlockWebAudio:function(){if(Howler){if(Howler.ctx&&Howler.ctx.state!=="running"){Howler.ctx.resume();}
if(!Howler._audioUnlocked){if(typeof(Howler._unlockAudio)==="function"){Howler._unlockAudio();}}}
if(ig){if(ig.webaudio_ctx){if(ig.webaudio_ctx.state&&ig.webaudio_ctx.state!=="running"){ig.webaudio_ctx.resume();}}}
if(this.bgmPlayer.webaudio&&this.bgmPlayer.webaudio.context){if(this.bgmPlayer.webaudio.context.state&&this.bgmPlayer.webaudio.context.state!=="running"){this.bgmPlayer.webaudio.context.resume();}}},checkBGM:function()
{return this.bgmPlayer.stayMuteFlag;},checkSFX:function()
{return this.sfxPlayer.stayMuteFlag;},muteSFX:function(bool)
{if(this.sfxPlayer)
{this.sfxPlayer.mute(bool);}},muteBGM:function(bool)
{if(this.bgmPlayer)
{this.bgmPlayer.mute(bool);}},unmuteSFX:function(bool)
{if(this.sfxPlayer)
{this.sfxPlayer.unmute(bool);}},unmuteBGM:function(bool)
{if(this.bgmPlayer)
{this.bgmPlayer.unmute(bool);}},muteAll:function(bool)
{this.muteSFX(bool);this.muteBGM(bool);},unmuteAll:function(bool)
{this.unlockWebAudio();this.unmuteSFX(bool);this.unmuteBGM(bool);},forceMuteAll:function()
{if(!this.focusBlurMute)
{this.muteAll(false);}
this.focusBlurMute=true;},forceUnMuteAll:function()
{if(this.focusBlurMute)
{this.unmuteAll(false);this.focusBlurMute=false;}},saveVolume:function()
{if(this.sfxPlayer)
{ig.game.io.storageSet("soundVolume",this.sfxPlayer.getVolume());}
if(this.bgmPlayer)
{ig.game.io.storageSet("musicVolume",this.bgmPlayer.getVolume());}},forceLoopBGM:function()
{if(!this.focusBlurMute&&this.bgmPlayer.bgmPlaying)
{if(this.bgmPlayer)
{var jukebox=this.bgmPlayer.jukeboxPlayer;if(jukebox)
{var ua={ff:Boolean(!(window.mozInnerScreenX==null)&&/firefox/.test(navigator.userAgent.toLowerCase())),ie:Boolean(document.all&&!window.opera),opera:Boolean(window.opera),chrome:Boolean(window.chrome),safari:Boolean(!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase())&&window.getComputedStyle&&!window.globalStorage&&!window.opera)}
var delay=0.1;if(ig.ua.mobile){delay=0.115;if(ig.ua.android){delay=0.45;if(ua.chrome){delay=0.3;}}}
if(jukebox.settings.spritemap.music)
{var threshold=jukebox.settings.spritemap.music.end-delay;if(jukebox.getCurrentTime()>=threshold){var t=jukebox.settings.spritemap.music.start;if(ig.ua.android){if(!this.forcelooped){jukebox.play(t,true);this.forcelooped=true;setTimeout(function(){ig.soundHandler.forcelooped=false;},delay);}}else{jukebox.setCurrentTime(t);}}}}else if(this.bgmPlayer.tagName=="ImpactMusicPlayer"){var ua={ff:Boolean(!(window.mozInnerScreenX==null)&&/firefox/.test(navigator.userAgent.toLowerCase())),ie:Boolean(document.all&&!window.opera),opera:Boolean(window.opera),chrome:Boolean(window.chrome),safari:Boolean(!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase())&&window.getComputedStyle&&!window.globalStorage&&!window.opera)}
var delay=0.1;if(ig.ua.mobile){delay=0.115;if(ig.ua.android){delay=0.45;if(ua.chrome){delay=0.3;}}}
var fastforward=0;if(ig.soundManager.format.ext=="mp3"){fastforward=0.05;}
if(ig.music.currentTrack){var threshold=ig.music.currentTrack.duration-delay;if(ig.music.currentTrack.currentTime>=threshold){if(ig.ua.android){if(!this.forcelooped){ig.music.currentTrack.pause();ig.music.currentTrack.currentTime=fastforward;ig.music.currentTrack.play();this.forcelooped=true;setTimeout(function(){ig.soundHandler.forcelooped=false;},delay);}}else{ig.music.currentTrack.currentTime=fastforward;}}}}}}}});});

// lib/plugins/handlers/visibility-handler.js
ig.baked=true;ig.module('plugins.handlers.visibility-handler').requires('plugins.audio.sound-handler').defines(function(){ig.VisibilityHandler=ig.Class.extend({version:"1.1.2",config:{muteOnBlur:true,pauseOnBlur:true,clearInputStateOnBlur:true,allowResumeWithoutFocus:{desktop:true,mobile:{kaios:false,default:true}},handlerDelay:{desktop:0,mobile:{kaios:0,default:0}},autoFocusOnResume:{desktop:true,mobile:{kaios:false,default:true}},autoFocusAfterResume:{desktop:true,mobile:{kaios:false,default:true}}},browserPrefixes:["o","ms","moz","webkit"],browserPrefix:null,hiddenPropertyName:null,visibilityEventName:null,visibilityStateName:null,isShowingOverlay:false,isFocused:false,isPaused:false,init:function(){this.initVisibilityHandler();this.initFocusHandler();this.initPageTransitionHandler();ig.visibilityHandler=this;},pauseHandler:function(){if(this.config.clearInputStateOnBlur===true){if(typeof(ig.input)!=="undefined"&&ig.input!==null){if(typeof(ig.input.clearAllState)==="function"){ig.input.clearAllState();}}}
if(this.config.pauseOnBlur===true){if(typeof(ig.game)!=="undefined"&&ig.game!==null){if(typeof(ig.game.pauseGame)!=='undefined'){ig.game.pauseGame();}}}
if(this.config.muteOnBlur===true){if(typeof(ig.soundHandler)!=="undefined"&&ig.soundHandler!==null){if(typeof(ig.soundHandler.forceMuteAll)==="function"){ig.soundHandler.forceMuteAll();}}}},resumeHandler:function(){if(typeof(ig.input)!=="undefined"&&ig.input!==null){if(typeof(ig.input.clearAllState)==="function"){ig.input.clearAllState();}}
if(typeof(ig.game)!=="undefined"&&ig.game!==null){if(typeof(ig.game.resumeGame)!=='undefined'){ig.game.resumeGame();}}
if(typeof(ig.soundHandler)!=="undefined"&&ig.soundHandler!==null){if(typeof(ig.soundHandler.forceUnMuteAll)==="function"){ig.soundHandler.forceUnMuteAll();}}},initVisibilityHandler:function(){this.browserPrefix=this.getBrowserPrefix();this.hiddenPropertyName=this.getHiddenPropertyName(this.browserPrefix);this.visibilityEventName=this.getVisibilityEventName(this.browserPrefix);this.visibilityStateName=this.getVisibilityStateName(this.browserPrefix);if(this.visibilityEventName){document.addEventListener(this.visibilityEventName,this.onChange.bind(this),true);}},initFocusHandler:function(){window.addEventListener("blur",this.onChange.bind(this),true);document.addEventListener("blur",this.onChange.bind(this),true);document.addEventListener("focusout",this.onChange.bind(this),true);window.addEventListener("focus",this.onChange.bind(this),true);document.addEventListener("focus",this.onChange.bind(this),true);document.addEventListener("focusin",this.onChange.bind(this),true);},initPageTransitionHandler:function(){window.addEventListener("pagehide",this.onChange.bind(this),true);window.addEventListener("pageshow",this.onChange.bind(this),true);},getBrowserPrefix:function(){var browserPrefix=null;this.browserPrefixes.forEach(function(prefix){if(this.getHiddenPropertyName(prefix)in document){browserPrefix=prefix;return browserPrefix;}}.bind(this));return browserPrefix;},getHiddenPropertyName:function(prefix){return(prefix?prefix+"Hidden":"hidden");},getVisibilityEventName:function(prefix){return(prefix?prefix:"")+"visibilitychange";},getVisibilityStateName:function(prefix){return(prefix?prefix+"VisibilityState":"visibilityState");},hasView:function(){return!(document[this.hiddenPropertyName]||document[this.visibilityStateName]!=="visible");},hasFocus:function(){return(document.hasFocus()||this.isFocused);},onOverlayShow:function(){this.systemPaused();this.isShowingOverlay=true;},onOverlayHide:function(){this.isShowingOverlay=false;this.systemResumed();},systemPaused:function(event){if(this.isPaused){return false;}
this.pauseHandler();this.isPaused=true;return true;},systemResumed:function(event){if(!this.isPaused){return false;}
if(!this.hasView()||this.isShowingOverlay){return false;}
if(!this.hasFocus()){if(ig.ua.mobile){if(this.isKaiOS()){if(!this.config.allowResumeWithoutFocus.mobile.kaios){return false;}}
else{if(!this.config.allowResumeWithoutFocus.mobile.default){return false;}}}
else{if(!this.config.allowResumeWithoutFocus.desktop){return false;}}}
this.focusOnResume();this.resumeHandler();this.focusAfterResume();this.isPaused=false;return true;},isKaiOS:function(){return(/KAIOS/).test(navigator.userAgent)||false;},focusOnResume:function(){var canFocus=false;if(ig.ua.mobile){if(this.isKaiOS()){canFocus=this.config.autoFocusOnResume.mobile.kaios;}
else{canFocus=this.config.autoFocusOnResume.mobile.default;}}
else{canFocus=this.config.autoFocusOnResume.desktop;}
return canFocus;},focusAfterResume:function(){var canFocus=false;if(ig.ua.mobile){if(this.isKaiOS()){canFocus=this.config.autoFocusAfterResume.mobile.kaios;}
else{canFocus=this.config.autoFocusAfterResume.mobile.default;}}
else{canFocus=this.config.autoFocusAfterResume.desktop;}
return canFocus;},focus:function(canFocus){if(window.focus&&canFocus){if(document.activeElement&&typeof(document.activeElement.blur)==="function"){document.activeElement.blur();}
window.focus();}},handleDelayedEvent:function(event){if(!this.hasView()||event.type==='pause'||event.type==='pageHide'||event.type==='blur'||event.type==='focusout'){if(event.type==="blur"||event.type==="focusout"){var path=event.path||(event.composedPath&&event.composedPath());if(path&&path.length>2){return false;}
if(event.srcElement&&(event.srcElement.tagName==="INPUT"||event.srcElement.tagName==="TEXTAREA")){return false;}
this.isFocused=false;}
return this.systemPaused(event);}
else{if(event.type==="focus"||event.type==="focusin"){this.isFocused=true;}
return this.systemResumed(event);}},startDelayedEventHandler:function(event){if(ig.ua.mobile){if(this.isKaiOS()){if(this.config.handlerDelay.mobile.kaios>0){window.setTimeout(function(event){this.handleDelayedEvent(event);}.bind(this,event),this.config.handlerDelay.mobile);}
else{this.handleDelayedEvent(event);}}
else{if(this.config.handlerDelay.mobile.default>0){window.setTimeout(function(event){this.handleDelayedEvent(event);}.bind(this,event),this.config.handlerDelay.mobile);}
else{this.handleDelayedEvent(event);}}}
else{if(this.config.handlerDelay.desktop>0){window.setTimeout(function(event){this.handleDelayedEvent(event);}.bind(this,event),this.config.handlerDelay.desktop);}
else{this.handleDelayedEvent(event);}}},onChange:function(event){this.startDelayedEventHandler(event);}});});

// lib/plugins/io/storage.js
ig.baked=true;ig.module('plugins.io.storage').defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(i){return!ig.Storage.instance?null:ig.Storage.instance;},init:function(){ig.Storage.instance=this;},isCapable:function(){return!(typeof(window.localStorage)==='undefined');},isSet:function(key){return!(this.get(key)===null);},initUnset:function(key,value){if(this.get(key)===null)this.set(key,value);},get:function(key){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(key));}catch(e){return window.localStorage.getItem(key);}},getInt:function(key){return~~this.get(key);},getFloat:function(key){return parseFloat(this.get(key));},getBool:function(key){return!!this.get(key);},key:function(n){return this.isCapable()?window.localStorage.key(n):null;},set:function(key,value){if(!this.isCapable())return null;try{window.localStorage.setItem(key,JSON.stringify(value));}catch(e){console.log(e);}},setHighest:function(key,value){if(value>this.getFloat(key))this.set(key,value);},remove:function(key){if(!this.isCapable())return null;window.localStorage.removeItem(key);},clear:function(){if(!this.isCapable())return null;window.localStorage.clear();},});});

// lib/plugins/io/mouse.js
ig.baked=true;ig.module('plugins.io.mouse').requires('plugins.data.vector').defines(function(){Mouse=ig.Class.extend({pos:new Vector2(0,0),bindings:{click:[ig.KEY.MOUSE1]},init:function()
{ig.input.initMouse();for(var key in this.bindings)
{this[key]=key;for(var i=0;i<this.bindings[key].length;i++)
{ig.input.bind(this.bindings[key][i],key);}}},getLast:function()
{return this.pos;},getPos:function()
{var internalWidth=ig.system.canvas.offsetWidth||ig.system.realWidth;var scale=ig.system.scale*(internalWidth/ig.system.realWidth);var currentMousePosX=ig.input.mouse.x*scale;var currentMousePosY=ig.input.mouse.y*scale;this.pos.set(currentMousePosX/ig.sizeHandler.sizeRatio.x/ig.sizeHandler.scaleRatioMultiplier.x,currentMousePosY/ig.sizeHandler.sizeRatio.y/ig.sizeHandler.scaleRatioMultiplier.y);return this.pos.clone();}});});

// lib/plugins/io/keyboard.js
ig.baked=true;ig.module('plugins.io.keyboard').defines(function(){Keyboard=ig.Class.extend({bindings:{PREVENT_PAGE_SCROLLING_OVER_IFRAME:[ig.KEY.UP_ARROW,ig.KEY.DOWN_ARROW,ig.KEY.LEFT_ARROW,ig.KEY.RIGHT_ARROW,ig.KEY.PAGE_UP,ig.KEY.PAGE_DOWN],up:[ig.KEY.W,ig.KEY.UP_ARROW],right:[ig.KEY.D,ig.KEY.RIGHT_ARROW],left:[ig.KEY.A,ig.KEY.LEFT_ARROW],down:[ig.KEY.S,ig.KEY.DOWN_ARROW,ig.KEY.SPACE]},init:function()
{for(var key in this.bindings)
{this[key]=key;for(var i=0;i<this.bindings[key].length;i++)
{ig.input.bind(this.bindings[key][i],key);}}},});});

// lib/plugins/io/gamepad-input.js
ig.baked=true;ig.module('plugins.io.gamepad-input').defines(function(){"use strict";ig.PADKEY={'BUTTON_0':0,'PADBUTTON_1':1,'BUTTON_2':2,'BUTTON_3':3,'BUTTON_LEFT_BUMPER':4,'BUTTON_RIGHT_BUMPER':5,'BUTTON_LEFT_TRIGGER':6,'BUTTON_RIGHT_TRIGGER':7,'BUTTON_LEFT_JOYSTICK':10,'BUTTON_RIGHT_JOYSTICK':11,'BUTTON_DPAD_UP':12,'BUTTON_DPAD_DOWN':13,'BUTTON_DPAD_LEFT':14,'BUTTON_DPAD_RIGHT':15,'BUTTON_MENU':16,'AXIS_LEFT_JOYSTICK_X':0,'AXIS_LEFT_JOYSTICK_Y':1,'AXIS_RIGHT_JOYSTICK_X':2,'AXIS_RIGHT_JOYSTICK_Y':3},ig.GamepadInput=ig.Class.extend({isInit:false,isSupported:false,list:[],bindings:{},states:{},presses:{},releases:{},downLocks:{},upLocks:{},leftStick:{x:0,y:0},rightStick:{x:0,y:0},start:function()
{if(this.isInit){return;}
this.isInit=true;var systemSupportsGamepads=navigator.getGamepads||navigator.webkitGetGamepads;if(systemSupportsGamepads)
{if(!navigator.getGamepads)
{if(navigator.webkitGetGamepads)
{navigator.getGamepads=navigator.webkitGetGamepads;}}
this.list=navigator.getGamepads();}
this.isSupported=systemSupportsGamepads;},isAvailable:function()
{return this.isInit&&this.isSupported;},buttonPressed:function(b){if(typeof(b)=="object"){return b.pressed;}
return b==1.0;},buttonDown:function(code){var action=this.bindings[code];if(action){this.states[action]=true;if(!this.downLocks[action]){this.presses[action]=true;this.downLocks[action]=true;}}},buttonUp:function(code){var action=this.bindings[code];if(action){if(this.downLocks[action]){if(!this.upLocks[action]){this.states[action]=false;this.releases[action]=true;this.upLocks[action]=true;}}}},clearPressed:function(){for(var action in this.releases){this.states[action]=false;this.downLocks[action]=false;}
this.releases={};this.presses={};this.upLocks={};},bind:function(code,action){this.bindings[code]=action;},unbind:function(code)
{var action=this.bindings[code];this.releases[action]=true;this.bindings[code]=null;},unbindAll:function()
{this.bindings={};this.states={};this.presses={};this.releases={};this.downLocks={};this.upLocks={};},state:function(action){return this.states[action];},pressed:function(action){return this.presses[action];},released:function(action){return this.releases[action];},clamp:function(num,min,max){return num<min?min:(num>max?max:num);},pollGamepads:function(){if(!this.isSupported){return;}
this.leftStick.x=0;this.leftStick.y=0;this.rightStick.x=0;this.rightStick.y=0;this.list=navigator.getGamepads();for(var code in this.bindings){var atLeastOnePressed=false;for(var i=0;i<this.list.length;i++){var gamepad=this.list[i];if(!gamepad||!gamepad.buttons)continue;var pressed=this.buttonPressed(gamepad.buttons[code]);if(pressed){atLeastOnePressed=true;break;}}
if(atLeastOnePressed){this.buttonDown(code);}else{this.buttonUp(code);}}
for(var i=0;i<this.list.length;i++){var gamepad=this.list[i];if(!gamepad||!gamepad.axes)continue;var leftJoystickX=gamepad.axes[ig.GAMEPADINPUT.AXIS_LEFT_JOYSTICK_X];var leftJoystickY=gamepad.axes[ig.GAMEPADINPUT.AXIS_LEFT_JOYSTICK_Y];var rightJoystickX=gamepad.axes[ig.GAMEPADINPUT.AXIS_RIGHT_JOYSTICK_X];var rightJoystickY=gamepad.axes[ig.GAMEPADINPUT.AXIS_RIGHT_JOYSTICK_Y];this.leftStick.x+=isNaN(leftJoystickX)?0:leftJoystickX;this.leftStick.y+=isNaN(leftJoystickY)?0:leftJoystickY;this.rightStick.x+=isNaN(rightJoystickX)?0:rightJoystickX;this.rightStick.y+=isNaN(rightJoystickY)?0:rightJoystickY;}
if(this.list.length>0){this.leftStick.x=this.clamp(this.leftStick.x,-1,1);this.leftStick.y=this.clamp(this.leftStick.y,-1,1);this.rightStick.x=this.clamp(this.rightStick.x,-1,1);this.rightStick.y=this.clamp(this.rightStick.y,-1,1);}},});});

// lib/plugins/io/gamepad.js
ig.baked=true;ig.module('plugins.io.gamepad').requires('plugins.io.gamepad-input').defines(function(){Gamepad=ig.Class.extend({bindings:{padJump:[ig.PADKEY.BUTTON_0],},init:function()
{ig.gamepadInput.start();for(var key in this.bindings)
{for(var i=0;i<this.bindings[key].length;i++)
{ig.gamepadInput.bind(this.bindings[key][i],key);}}},press:function(key)
{},held:function(key)
{},release:function(key)
{},});});

// lib/plugins/io/multitouch.js
ig.baked=true;ig.module('plugins.io.multitouch').defines(function(){Multitouch=ig.Class.extend({init:function()
{ig.multitouchInput.start()},getTouchesPos:function()
{if(ig.ua.mobile)
{if(ig.multitouchInput.touches.length>0)
{var touchesPos=[];for(var ti=0;ti<ig.multitouchInput.touches.length;ti++)
{var touch=ig.multitouchInput.touches[ti];var touchX=touch.x;var touchY=touch.y;touchesPos.push({x:touchX,y:touchY});}
return touchesPos;}
else
{return null;}}}});});

// lib/plugins/io/multitouch-input.js
ig.baked=true;ig.module('plugins.io.multitouch-input').defines(function(){ig.MultitouchInput=ig.Class.extend({isStart:false,touches:[],multitouchCapable:false,lastEventUp:null,start:function(){if(this.isStart){return;}
this.isStart=true;if(navigator.maxTouchPoints&&navigator.maxTouchPoints>1){this.multitouchCapable=true;}
if(ig.ua.touchDevice){if(window.navigator.msPointerEnabled){ig.system.canvas.addEventListener('MSPointerDown',this.touchdown.bind(this),false);ig.system.canvas.addEventListener('MSPointerUp',this.touchup.bind(this),false);ig.system.canvas.addEventListener('MSPointerMove',this.touchmove.bind(this),false);ig.system.canvas.style.msContentZooming="none";ig.system.canvas.style.msTouchAction='none';}
ig.system.canvas.addEventListener('touchstart',this.touchdown.bind(this),false);ig.system.canvas.addEventListener('touchend',this.touchup.bind(this),false);ig.system.canvas.addEventListener('touchmove',this.touchmove.bind(this),false);}},touchmove:function(event){if(ig.ua.touchDevice){var internalWidth=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;var internalHeight=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight;var scaleX=ig.system.scale*(internalWidth/ig.system.realWidth);var scaleY=ig.system.scale*(internalHeight/ig.system.realHeight);if(event.touches){while(this.touches.length>0)
{this.touches.pop();}
if(!this.multitouchCapable){if(event.touches.length>1){this.multitouchCapable=true;}}
var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
for(var i=0;i<event.touches.length;i++)
{var touch=event.touches[i];if(touch){var touchX=(touch.clientX-pos.left)/scaleX;var touchY=(touch.clientY-pos.top)/scaleY;this.touches.push({x:touchX,y:touchY});}}}else{this.windowMove(event);}}
try{ig.soundHandler.unlockWebAudio();}catch(error){}},touchdown:function(event){var internalWidth=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;var internalHeight=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight;var scaleX=ig.system.scale*(internalWidth/ig.system.realWidth);var scaleY=ig.system.scale*(internalHeight/ig.system.realHeight);if(window.navigator.msPointerEnabled){this.windowKeyDown(event);}else{if(ig.ua.touchDevice){if(event.touches){while(this.touches.length>0)
{this.touches.pop();}
if(!this.multitouchCapable){if(event.touches.length>1){this.multitouchCapable=true;}}
var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
for(var i=0;i<event.touches.length;i++)
{var touch=event.touches[i];if(touch){var touchX=(touch.clientX-pos.left)/scaleX;var touchY=(touch.clientY-pos.top)/scaleY;this.touches.push({x:touchX,y:touchY});}}}}}},touchup:function(event){var internalWidth=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;var internalHeight=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight;var scaleX=ig.system.scale*(internalWidth/ig.system.realWidth);var scaleY=ig.system.scale*(internalHeight/ig.system.realHeight);if(window.navigator.msPointerEnabled){this.windowKeyUp(event);}else{this.lastEventUp=event;var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
if(ig.ua.touchDevice)
{var touch=event.changedTouches[0];var touchX=(touch.clientX-pos.left)/scaleX;var touchY=(touch.clientY-pos.top)/scaleY;for(var iTouch=0;iTouch<this.touches.length;iTouch++){if(this.touches[iTouch].x>=touchX-40&&this.touches[iTouch].x<=touchX+40){this.touches.splice(iTouch,1);}}}}
if(ig.visibilityHandler){ig.visibilityHandler.onChange("focus");}
try{ig.soundHandler.unlockWebAudio();}catch(error){}},windowKeyDown:function(event){var internalWidth=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;var internalHeight=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight;var scaleX=ig.system.scale*(internalWidth/ig.system.realWidth);var scaleY=ig.system.scale*(internalHeight/ig.system.realHeight);if(window.navigator.msPointerEnabled){var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
var pointerList=event.changedTouches?event.changedTouches:[event];for(var i=0;i<pointerList.length;++i){var pointerObj=pointerList[i];var pointerId=(typeof pointerObj.identifier!='undefined')?pointerObj.identifier:(typeof pointerObj.pointerId!='undefined')?pointerObj.pointerId:1;output+=pointerId+":";var clientX=pointerObj.clientX;var clientY=pointerObj.clientY;var touchX=(pointerObj.clientX-pos.left)/scaleX;var touchY=(pointerObj.clientY-pos.top)/scaleY;for(var tindex3=0;tindex3<this.touches.length;++tindex3){if(this.touches[tindex3].identifier==pointerId)
{this.touches.splice(tindex3,1);}}
this.touches.push({x:touchX,y:touchY,identifier:pointerId});}
var output=""+this.multitouchCapable+":";for(var k=0;k<this.touches.length;k++){output+=this.touches[k].identifier+":";}}},windowKeyUp:function(event){var pointerId=(typeof event.identifier!='undefined')?event.identifier:(typeof event.pointerId!='undefined')?event.pointerId:1;for(var tindex2=0;tindex2<this.touches.length;++tindex2){if(this.touches[tindex2].identifier==pointerId){this.touches.splice(tindex2,1);}}
while(this.touches.length>0){this.touches.pop();}
if(ig.visibilityHandler){ig.visibilityHandler.onChange("focus");}
try{ig.soundHandler.unlockWebAudio();}catch(error){}},windowMove:function(event){var internalWidth=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;var internalHeight=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight;var scaleX=ig.system.scale*(internalWidth/ig.system.realWidth);var scaleY=ig.system.scale*(internalHeight/ig.system.realHeight);var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
if(window.navigator.msPointerEnabled){var pointerId=(typeof event.identifier!='undefined')?event.identifier:(typeof event.pointerId!='undefined')?event.pointerId:1;for(var tindex=0;tindex<this.touches.length;++tindex){if(this.touches[tindex].identifier==pointerId){var touchX=(event.clientX-pos.left)/scaleX;var touchY=(event.clientY-pos.top)/scaleY;this.touches[tindex].x=touchX;this.touches[tindex].y=touchY;}}}
try{ig.soundHandler.unlockWebAudio();}catch(error){}},clear:function()
{for(var tindex=0;tindex<this.released.length;++tindex)
{if(this.released[tindex])
{this.released.splice(tindex,1);tindex--;}}},pollMultitouch:function(lengthTouches)
{if(!this.multitouchCapable)
{if(lengthTouches>1)
{this.multitouchCapable=true;}}},spliceFromArray:function(arrayToSplice,arrayToCheckWith)
{for(var i=0;i<arrayToCheckWith.length;i++)
{for(var j=0;j<arrayToSplice.length;j++)
{if(arrayToSplice[j].identifier===arrayToCheckWith[i].identifier)
{arrayToSplice.splice(j,1);j--;}}}},updateSizeProperties:function()
{var internalWidth=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;var internalHeight=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight;this.scaleX=ig.system.scale*(internalWidth/ig.system.realWidth);this.scaleY=ig.system.scale*(internalHeight/ig.system.realHeight);},upgrade:function(arrayToCheck,arrayToUpgradeTo,touch)
{var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
var touchX=(touch.clientX-pos.left)/this.scaleX;var touchY=(touch.clientY-pos.top)/this.scaleY;for(var iTouch=0;iTouch<arrayToCheck.length;iTouch++)
{if(typeof(arrayToCheck[iTouch].identifier)!==undefined&&typeof(touch.identifier)!==undefined&&touch.identifier===arrayToCheck[iTouch].identifier)
{arrayToCheck.splice(iTouch,1);arrayToUpgradeTo.push({identifier:touch.identifier,x:touchX,y:touchY});iTouch--;break;}}},updateArray:function(arrayToUpdate,touch)
{var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
var touchX=(touch.clientX-pos.left)/this.scaleX;var touchY=(touch.clientY-pos.top)/this.scaleY;for(var iTouch=0;iTouch<arrayToUpdate.length;iTouch++)
{if(typeof(arrayToUpdate[iTouch].identifier)!==undefined&&typeof(touch.identifier)!==undefined&&touch.identifier===arrayToUpdate[iTouch].identifier)
{arrayToUpdate[iTouch].x=touchX;arrayToUpdate[iTouch].y=touchY;break;}}}});});

// lib/plugins/io/fake-storage.js
ig.baked=true;ig.module('plugins.io.fake-storage').requires('impact.game').defines(function(){ig.FakeStorage=ig.Class.extend({tempData:{},init:function(){ig.FakeStorage.instance=this;},initUnset:function(key,value){if(this.get(key)===null)this.set(key,value);},set:function(key,value){this.tempData[key]=JSON.stringify(value);},setHighest:function(key,value){if(value>this.getFloat(key))this.set(key,value);},get:function(key){return typeof(this.tempData[key])=="undefined"?null:JSON.parse(this.tempData[key]);},getInt:function(key){return~~this.get(key);},getFloat:function(key){return parseFloat(this.get(key));},getBool:function(key){return!!this.get(key);},isSet:function(key){return!(this.get(key)===null);},remove:function(key){delete this.tempData[key];},clear:function(){this.tempData={};}});});

// lib/plugins/io/io-manager.js
ig.baked=true;ig.module('plugins.io.io-manager').requires('plugins.io.storage','plugins.io.mouse','plugins.io.keyboard','plugins.io.gamepad','plugins.io.multitouch','plugins.io.multitouch-input','plugins.io.gamepad-input','plugins.io.fake-storage').defines(function(){IoManager=ig.Class.extend({version:"1.0.0",storage:null,localStorageSupport:false,mouse:null,keyboard:null,multitouch:null,gamepad:null,init:function(){ig.multitouchInput=new ig.MultitouchInput();ig.gamepadInput=new ig.GamepadInput();this.unbindAll();this.initStorage();this.initMouse();this.initKeyboard();},unbindAll:function(){ig.input.unbindAll();ig.gamepadInput.unbindAll();},initStorage:function(){try{window.localStorage.setItem("test","test");window.localStorage.removeItem("test");this.storage=new ig.Storage();}catch(e){console.log("using fake storage")
this.storage=new ig.FakeStorage();}},initMouse:function(){this.mouse=new Mouse();},initKeyboard:function(){this.keyboard=new Keyboard();},initMultitouch:function(){this.multitouch=new Multitouch();},initGamepad:function(){this.gamepad=new Gamepad();},press:function(key){if(ig.input.pressed(key)){return true;}
if(this.gamepad&&this.gamepad.press(key)){return true;}
return false;},held:function(key){if(ig.input.state(key)){return true;}
if(this.gamepad&&this.gamepad.state(key)){return true;}
return false;},release:function(key){if(ig.input.released(key)){return true;}
if(this.gamepad&&this.gamepad.released(key)){return true;}
return false;},getClickPos:function(){return this.mouse.getPos();},getLastClickPos:function()
{return this.mouse.getLast();},getTouchesPos:function()
{return this.multitouch.getTouchesPos();},checkOverlap:function(input,x,y,w,h)
{if(input.x>x+w)
{return false;}
if(input.x<x)
{return false;}
if(input.y>y+h)
{return false;}
if(input.y<y)
{return false;}
return true;},clear:function()
{ig.multitouchInput.clear();},_supportsLocalStorage:function(){try{var test="test";localStorage.setItem(test,test);localStorage.removeItem(test);this.localStorageSupport='localStorage'in window&&window['localStorage']!==null;return this.localStorageSupport;}catch(e){return this.localStorageSupport;}},storageIsSet:function(key){if(typeof(this.storage.isSet)==="function"){return this.storage.isSet(key);}
return null;},storageGet:function(key){if(typeof(this.storage.get)==="function"){return this.storage.get(key);}
return null;},storageSet:function(key,string){if(typeof(this.storage.set)==="function"){return this.storage.set(key,string);}
return null;},assert:function(tag,actualValue,testValue){if(actualValue!==testValue){throw"actualValue:"+actualValue+" not equal to testValue:"+testValue+" at "+tag;}}});});

// lib/plugins/io/storage-manager.js
ig.baked=true;ig.module('plugins.io.storage-manager').requires('impact.game','plugins.io.io-manager').defines(function(){ig.Game.prototype.name="MJS-Game";ig.Game.prototype.version="1.0.0";ig.Game.prototype.sessionData={};ig.Game.prototype.initData=function(){return this.sessionData={sound:0.5,music:0.5,level:1,score:0};};ig.Game.prototype.setupStorageManager=function(){if(typeof(this.name)==="undefined"){console.error("Cannot found Game Name, Storage Manager Cancelled.");}else if(typeof(this.version)==="undefined"){console.error("Cannot found Game Version, Storage Manager Cancelled.");}else{if(!this.io){this.io=new IoManager();console.log("IO Manager doesn't existed. Initialize...");}
console.log("Plug in Storage Manager");this.storage=this.io.storage;this.storageName=this.name+"-v"+this.version;this.loadAll();}};ig.Game.prototype.loadAll=function(){var data=this.storage.get(this.storageName);if(data===null||typeof(data)==="undefined"){data=this.initData();}else{}
for(var key in data){this.sessionData[key]=data[key];}
this.storage.set(this.storageName,data);};ig.Game.prototype.saveAll=function(){var data=this.storage.get(this.storageName);for(var key in data){data[key]=this.sessionData[key];}
this.storage.set(this.storageName,data);};ig.Game.prototype.load=function(key){var data=this.storage.get(this.storageName);return data[key];};ig.Game.prototype.save=function(key,value){var data=this.storage.get(this.storageName);data[key]=value;this.storage.set(this.storageName,data);};});

// lib/plugins/splash-loader.js
ig.baked=true;ig.module('plugins.splash-loader').requires('impact.loader','impact.animation').defines(function(){ig.SplashLoader=ig.Loader.extend({tapToStartDivId:"tap-to-start",bgImage:new ig.Image('media/graphics/sprites/games/BG.png'),titleImage:new ig.Image('media/graphics/sprites/games/title.png'),barFrame:new ig.Image('media/graphics/splash/loading/loading_frame.png'),barFill:new ig.Image('media/graphics/splash/loading/loading_bar.png'),init:function(gameClass,resources){this.parent(gameClass,resources);ig.apiHandler.run("MJSPreroll");},end:function(){this._endParent=this.parent;this._drawStatus=1;if(_SETTINGS['TapToStartAudioUnlock']['Enabled']){this.tapToStartDiv(function(){this._endParent();if(typeof(ig.game)==='undefined'||ig.game==null){ig.system.setGame(this.gameClass);}}.bind(this));}
else{this._endParent();if(typeof(ig.game)==='undefined'||ig.game==null){ig.system.setGame(this.gameClass);}}
this.draw();},tapToStartDiv:function(onClickCallbackFunction){this.desktopCoverDIV=document.getElementById(this.tapToStartDivId);if(this.desktopCoverDIV){return;}
this.desktopCoverDIV=document.createElement("div");this.desktopCoverDIV.id=this.tapToStartDivId;this.desktopCoverDIV.setAttribute("class","play");this.desktopCoverDIV.setAttribute("style","position: absolute; display: block; z-index: 999999; background-color: rgba(23, 32, 53, 0.7); visibility: visible; font-size: 10vmin; text-align: center; vertical-align: middle; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;");this.desktopCoverDIV.innerHTML="<div style='color:white;background-color: rgba(255, 255, 255, 0.3); border: 2px solid #fff; font-size:20px; border-radius: 5px; position: relative; float: left; top: 50%; left: 50%; transform: translate(-50%, -50%);'><div style='padding:20px 50px; font-family: montserrat;'>"+_STRINGS["Splash"]["TapToStart"]+"</div></div>";var parentDIV=document.getElementById("play").parentNode||document.getElementById("ajaxbar");parentDIV.appendChild(this.desktopCoverDIV);try{if(typeof(ig.sizeHandler)!=="undefined"){if(typeof(ig.sizeHandler.coreDivsToResize)!=="undefined"){ig.sizeHandler.coreDivsToResize.push(("#"+this.tapToStartDivId));if(typeof(ig.sizeHandler.reorient)==="function"){ig.sizeHandler.reorient();}}}
else if(typeof(coreDivsToResize)!=="undefined"){coreDivsToResize.push(this.tapToStartDivId);if(typeof(sizeHandler)==="function"){sizeHandler();}}}catch(error){console.log(error);}
this.desktopCoverDIV.addEventListener("click",function(){ig.soundHandler.unlockWebAudio();this.desktopCoverDIV.setAttribute("style","visibility: hidden;");if(typeof(onClickCallbackFunction)==="function"){onClickCallbackFunction();}}.bind(this));},setupCustomAnimation:function(){this.animHeight=this.customAnim.height;this.animWidth=this.customAnim.width;this.customAnim=new ig.Animation(this.customAnim,0.025,[0,1,2,3,4,5,6,7]);},animate:function(){ig.Timer.step();this.customAnim.update();},drawCheck:0,draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;if(this.drawCheck===1)console.log('Font should be loaded before loader draw loop');if(this.drawCheck<2)this.drawCheck++;ig.system.context.fillStyle='#000';ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);var s=ig.system.scale;var drawPoint=ig.responsive.toAnchor(0,0,"center-middle");var center=ig.responsive.toAnchor(0,0,"center-middle");this.scaleX=(ig.system.width/1080);this.scaleY=(ig.system.height/1080);var scale=(this.scaleX>this.scaleY)?this.scaleX:this.scaleY;ig.responsive.drawScaledImage(this.bgImage,center.x,center.y,scale,scale,0.5,0.5);this.titleImage.draw(center.x-this.titleImage.width/2.0,center.y-this.titleImage.height/2-190);this.barFrame.draw(drawPoint.x-this.barFrame.width/2,drawPoint.y+200);var widthbar=this.barFrame.width*this._drawStatus;if(widthbar>0){this.barFill.draw(drawPoint.x-this.barFill.width/2,drawPoint.y+200+(this.barFrame.height-this.barFill.height)/2,0,0,widthbar,this.barFill.height);}
this.drawVersion();},drawVersion:function(){if(typeof(_SETTINGS.Versioning)!=="undefined"&&_SETTINGS.Versioning!==null){if(_SETTINGS.Versioning.DrawVersion){var ctx=ig.system.context;fontSize=_SETTINGS.Versioning.FontSize,fontFamily=_SETTINGS.Versioning.FontFamily,fillStyle=_SETTINGS.Versioning.FillStyle
ctx.save();ctx.textBaseline="bottom";ctx.textAlign="left";ctx.font=fontSize+" "+fontFamily||"10px Arial";ctx.fillStyle=fillStyle||'#ffffff';ctx.fillText("v"+_SETTINGS.Versioning.Version+"+build."+_SETTINGS.Versioning.Build,10,ig.system.height-10);ctx.restore();}}}});});

// lib/plugins/tween.js
ig.baked=true;ig.module('plugins.tween').requires('impact.entity').defines(function(){if(!Array.prototype.indexOf){Array.prototype.indexOf=function(el,start){var start=start||0;for(var i=0;i<this.length;++i){if(this[i]===el){return i;}}
return-1;};}
ig.Entity.prototype.tweens=[];ig.Entity.prototype._preTweenUpdate=ig.Entity.prototype.update;ig.Entity.prototype.update=function(){this._preTweenUpdate();if(this.tweens.length>0){var currentTweens=[];for(var i=0;i<this.tweens.length;i++){this.tweens[i].update();if(!this.tweens[i].complete)currentTweens.push(this.tweens[i]);}
this.tweens=currentTweens;}};ig.Entity.prototype.tween=function(props,duration,settings){var tween=new ig.Tween(this,props,duration,settings);this.tweens.push(tween);return tween;};ig.Entity.prototype.pauseTweens=function(){for(var i=0;i<this.tweens.length;i++){this.tweens[i].pause();}};ig.Entity.prototype.resumeTweens=function(){for(var i=0;i<this.tweens.length;i++){this.tweens[i].resume();}};ig.Entity.prototype.stopTweens=function(doComplete){for(var i=0;i<this.tweens.length;i++){this.tweens[i].stop(doComplete);}};ig.Tween=function(obj,properties,duration,settings){var _object=obj;var valuesStart={};var valuesEnd={};var valuesDelta={};var _elapsed=0;var timer=false;var started=false;var _props=properties;var _chained=false;this.duration=duration;this.complete=false;this.paused=false;this.easing=ig.Tween.Easing.Linear.EaseNone;this.onComplete=false;this.delay=0;this.loop=0;this.loopCount=-1;ig.merge(this,settings);this.loopNum=this.loopCount;this.chain=function(chainObj){_chained=chainObj;};this.initEnd=function(prop,from,to){if(typeof(from[prop])!=="object"){to[prop]=from[prop];}else{for(subprop in from[prop]){if(!to[prop])to[prop]={};this.initEnd(subprop,from[prop],to[prop]);}}};this.initStart=function(prop,end,from,to){if(typeof(from[prop])!=="object"){if(typeof(end[prop])!=="undefined")to[prop]=from[prop];}else{for(subprop in from[prop]){if(!to[prop])to[prop]={};if(typeof(end[prop])!=="undefined")this.initStart(subprop,end[prop],from[prop],to[prop]);}}};this.start=function(){this.complete=false;this.paused=false;this.loopNum=this.loopCount;_elapsed=0;if(_object.tweens.indexOf(this)==-1)_object.tweens.push(this);started=true;timer=new ig.Timer();for(var property in _props){this.initEnd(property,_props,valuesEnd);}
for(var property in valuesEnd){this.initStart(property,valuesEnd,_object,valuesStart);this.initDelta(property,valuesDelta,_object,valuesEnd);}};this.initDelta=function(prop,delta,start,end){if(typeof(end[prop])!=="object"){delta[prop]=end[prop]-start[prop];}else{for(subprop in end[prop]){if(!delta[prop])delta[prop]={};this.initDelta(subprop,delta[prop],start[prop],end[prop]);}}};this.propUpdate=function(prop,obj,start,delta,value){if(typeof(start[prop])!=="object"){if(typeof start[prop]!="undefined"){obj[prop]=start[prop]+delta[prop]*value;}else{obj[prop]=obj[prop];}}else{for(subprop in start[prop]){this.propUpdate(subprop,obj[prop],start[prop],delta[prop],value);}}};this.propSet=function(prop,from,to){if(typeof(from[prop])!=="object"){to[prop]=from[prop];}else{for(subprop in from[prop]){if(!to[prop])to[prop]={};this.propSet(subprop,from[prop],to[prop]);}}};this.update=function(){if(!started)return false;if(this.delay){if(timer.delta()<this.delay)return;this.delay=0;timer.reset();}
if(this.paused||this.complete)return false;var elapsed=(timer.delta()+_elapsed)/this.duration;elapsed=elapsed>1?1:elapsed;var value=this.easing(elapsed);for(property in valuesDelta){this.propUpdate(property,_object,valuesStart,valuesDelta,value);}
if(elapsed>=1){if(this.loopNum==0||!this.loop){this.complete=true;if(this.onComplete)this.onComplete();if(_chained)_chained.start();return false;}else if(this.loop==ig.Tween.Loop.Revert){for(property in valuesStart){this.propSet(property,valuesStart,_object);}
_elapsed=0;timer.reset();if(this.loopNum!=-1)this.loopNum--;}else if(this.loop==ig.Tween.Loop.Reverse){var _start={},_end={},_delta={};ig.merge(_start,valuesEnd);ig.merge(_end,valuesStart);ig.merge(valuesStart,_start);ig.merge(valuesEnd,_end);for(property in valuesEnd){this.initDelta(property,valuesDelta,_object,valuesEnd);}
_elapsed=0;timer.reset();if(this.loopNum!=-1)this.loopNum--;}}};this.pause=function(){this.paused=true;if(timer&&timer.delta)
{_elapsed+=timer.delta();}};this.resume=function(){this.paused=false;if(timer&&timer.reset){timer.reset();}};this.stop=function(doComplete){if(doComplete){this.paused=false;this.complete=false;this.loop=false;_elapsed+=duration;this.update();}
this.complete=true;}};ig.Tween.Loop={Revert:1,Reverse:2};ig.Tween.Easing={Linear:{},Quadratic:{},Cubic:{},Quartic:{},Quintic:{},Sinusoidal:{},Exponential:{},Circular:{},Elastic:{},Back:{},Bounce:{}};ig.Tween.Easing.Linear.EaseNone=function(k){return k;};ig.Tween.Easing.Quadratic.EaseIn=function(k){return k*k;};ig.Tween.Easing.Quadratic.EaseOut=function(k){return-k*(k-2);};ig.Tween.Easing.Quadratic.EaseInOut=function(k){if((k*=2)<1)return 0.5*k*k;return-0.5*(--k*(k-2)-1);};ig.Tween.Easing.Cubic.EaseIn=function(k){return k*k*k;};ig.Tween.Easing.Cubic.EaseOut=function(k){return--k*k*k+1;};ig.Tween.Easing.Cubic.EaseInOut=function(k){if((k*=2)<1)return 0.5*k*k*k;return 0.5*((k-=2)*k*k+2);};ig.Tween.Easing.Quartic.EaseIn=function(k){return k*k*k*k;};ig.Tween.Easing.Quartic.EaseOut=function(k){return-(--k*k*k*k-1);}
ig.Tween.Easing.Quartic.EaseInOut=function(k){if((k*=2)<1)return 0.5*k*k*k*k;return-0.5*((k-=2)*k*k*k-2);};ig.Tween.Easing.Quintic.EaseIn=function(k){return k*k*k*k*k;};ig.Tween.Easing.Quintic.EaseOut=function(k){return(k=k-1)*k*k*k*k+1;};ig.Tween.Easing.Quintic.EaseInOut=function(k){if((k*=2)<1)return 0.5*k*k*k*k*k;return 0.5*((k-=2)*k*k*k*k+2);};ig.Tween.Easing.Sinusoidal.EaseIn=function(k){return-Math.cos(k*Math.PI/2)+1;};ig.Tween.Easing.Sinusoidal.EaseOut=function(k){return Math.sin(k*Math.PI/2);};ig.Tween.Easing.Sinusoidal.EaseInOut=function(k){return-0.5*(Math.cos(Math.PI*k)-1);};ig.Tween.Easing.Exponential.EaseIn=function(k){return k==0?0:Math.pow(2,10*(k-1));};ig.Tween.Easing.Exponential.EaseOut=function(k){return k==1?1:-Math.pow(2,-10*k)+1;};ig.Tween.Easing.Exponential.EaseInOut=function(k){if(k==0)return 0;if(k==1)return 1;if((k*=2)<1)return 0.5*Math.pow(2,10*(k-1));return 0.5*(-Math.pow(2,-10*(k-1))+2);};ig.Tween.Easing.Circular.EaseIn=function(k){return-(Math.sqrt(1-k*k)-1);};ig.Tween.Easing.Circular.EaseOut=function(k){return Math.sqrt(1-(--k*k));};ig.Tween.Easing.Circular.EaseInOut=function(k){if((k/=0.5)<1)return-0.5*(Math.sqrt(1-k*k)-1);return 0.5*(Math.sqrt(1-(k-=2)*k)+1);};ig.Tween.Easing.Elastic.EaseIn=function(k){var s,a=0.1,p=0.4;if(k==0)return 0;if(k==1)return 1;if(!p)p=0.3;if(!a||a<1){a=1;s=p/4;}
else s=p/(2*Math.PI)*Math.asin(1/a);return-(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p));};ig.Tween.Easing.Elastic.EaseOut=function(k){var s,a=0.1,p=0.4;if(k==0)return 0;if(k==1)return 1;if(!p)p=0.3;if(!a||a<1){a=1;s=p/4;}
else s=p/(2*Math.PI)*Math.asin(1/a);return(a*Math.pow(2,-10*k)*Math.sin((k-s)*(2*Math.PI)/p)+1);};ig.Tween.Easing.Elastic.EaseInOut=function(k){var s,a=0.1,p=0.4;if(k==0)return 0;if(k==1)return 1;if(!p)p=0.3;if(!a||a<1){a=1;s=p/4;}
else s=p/(2*Math.PI)*Math.asin(1/a);if((k*=2)<1)return-0.5*(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p));return a*Math.pow(2,-10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)*0.5+1;};ig.Tween.Easing.Back.EaseIn=function(k){var s=1.70158;return k*k*((s+1)*k-s);};ig.Tween.Easing.Back.EaseOut=function(k){var s=1.70158;return(k=k-1)*k*((s+1)*k+s)+1;};ig.Tween.Easing.Back.EaseInOut=function(k){var s=1.70158*1.525;if((k*=2)<1)return 0.5*(k*k*((s+1)*k-s));return 0.5*((k-=2)*k*((s+1)*k+s)+2);};ig.Tween.Easing.Bounce.EaseIn=function(k){return 1-ig.Tween.Easing.Bounce.EaseOut(1-k);};ig.Tween.Easing.Bounce.EaseOut=function(k){if((k/=1)<(1/2.75)){return 7.5625*k*k;}else if(k<(2/2.75)){return 7.5625*(k-=(1.5/2.75))*k+0.75;}else if(k<(2.5/2.75)){return 7.5625*(k-=(2.25/2.75))*k+0.9375;}else{return 7.5625*(k-=(2.625/2.75))*k+0.984375;}};ig.Tween.Easing.Bounce.EaseInOut=function(k){if(k<0.5)return ig.Tween.Easing.Bounce.EaseIn(k*2)*0.5;return ig.Tween.Easing.Bounce.EaseOut(k*2-1)*0.5+0.5;};ig.Tween.Interpolation={Linear:function(v,k){var m=v.length-1;var f=m*k;var i=Math.floor(f);var fn=TWEEN.Interpolation.Utils.Linear;if(k<0){return fn(v[0],v[1],f);}
if(k>1){return fn(v[m],v[m-1],m-f);}
return fn(v[i],v[i+1>m?m:i+1],f-i);},};});

// lib/plugins/patches/entity-patch.js
ig.baked=true;ig.module("plugins.patches.entity-patch").requires('impact.entity').defines(function(){ig.Entity.inject({handleMovementTrace:function(res){this.standing=false;if(res.collision.y){if(this.bounciness>0&&Math.abs(this.vel.y)>this.minBounceVelocity){this.vel.y*=-this.bounciness;}
else{if(this.vel.y>0){this.standing=true;}
this.vel.y=0;}}
if(res.collision.x){if(this.bounciness>0&&Math.abs(this.vel.x)>this.minBounceVelocity){this.vel.x*=-this.bounciness;}
else{this.vel.x=0;}}
if(res.collision.slope){var s=res.collision.slope;if(this.bounciness>0){var proj=this.vel.x*s.nx+this.vel.y*s.ny;this.vel.x=(this.vel.x-s.nx*proj*2)*this.bounciness;this.vel.y=(this.vel.y-s.ny*proj*2)*this.bounciness;}
else{var lengthSquared=s.x*s.x+s.y*s.y;var dot=(this.vel.x*s.x+this.vel.y*s.y)/lengthSquared;this.vel.x=s.x*dot;this.vel.y=s.y*dot;var angle=Math.atan2(s.x,s.y);if(angle>this.slopeStanding.min&&angle<this.slopeStanding.max){this.standing=true;}}}
this.pos.x=res.pos.x;this.pos.y=res.pos.y;},update:function(){this.parent();if(this.clickableLayer!==null&&typeof(this.clickableLayer)!=='undefined'){if(this.clickableLayer.update!==null&&typeof(this.clickableLayer.update)==='function'){this.clickableLayer.update(this.pos.x,this.pos.y,this.size.x,this.size.y);}}}})});

// lib/plugins/tweens-handler.js
ig.baked=true;ig.module('plugins.tweens-handler').requires('impact.entity','plugins.tween',"plugins.patches.entity-patch").defines(function(){if(!Array.prototype.indexOf){Array.prototype.indexOf=function(el,start){var start=start||0;for(var i=0;i<this.length;++i){if(this[i]===el){return i;}}
return-1;};};ig.TweensHandler=ig.Class.extend({_tweens:[],_systemPausedTweens:[],init:function(){},getAll:function(){return this._tweens;},removeAll:function(){this._tweens=[];},add:function(tween){this._tweens.push(tween);},remove:function(tween){var i=this._tweens.indexOf(tween);if(i!==-1){this._tweens.splice(i,1);}},onSystemPause:function(){if(this._tweens.length===0){return false;}
var i=0,tween=null;while(i<this._tweens.length){tween=this._tweens[i];if(tween._isPlaying){this._systemPausedTweens.push(tween);tween.pause();}
i++;}
return true;},onSystemResume:function(){if(this._systemPausedTweens.length===0){return false;}
var i=0;while(i<this._systemPausedTweens.length){this._systemPausedTweens[i].resume();i++;}
this._systemPausedTweens=[];return true;},update:function(time,preserve){if(this._tweens.length===0){return false;}
var i=0;time=time!==undefined?time:ig.game.tweens.now();while(i<this._tweens.length){if(this._tweens[i].update(time)||preserve){i++;}
else
{this._tweens.splice(i,1);}}
return true;},now:function(){return Date.now();}});ig.TweenDef=ig.Class.extend({_ent:null,_valuesStart:{},_valuesEnd:{},_valuesStartRepeat:{},_duration:1000,_repeat:0,_yoyo:false,_isPlaying:false,_reversed:false,_delayTime:0,_startTime:null,_pauseTime:null,_easingFunction:ig.Tween.Easing.Linear.EaseNone,_interpolationFunction:ig.Tween.Interpolation.Linear,_chainedTweens:[],_onStartCallback:null,_onStartCallbackFired:false,_onUpdateCallback:null,_onCompleteCallback:null,_onStopCallback:null,_onPauseCallback:null,_onResumeCallback:null,_currentElapsed:0,init:function(object){this._object=object;},to:function(properties,duration){this._valuesEnd=properties;if(duration!==undefined){this._duration=duration;}
return this;},start:function(time){if(this._isPlaying){return this;}
ig.game.tweens.add(this);this._isPlaying=true;this._onStartCallbackFired=false;this._startTime=time!==undefined?time:ig.game.tweens.now();this._startTime+=this._delayTime;for(var property in this._valuesEnd){if(this._valuesEnd[property]instanceof Array){if(this._valuesEnd[property].length===0){continue;}
this._valuesEnd[property]=[this._object[property]].concat(this._valuesEnd[property]);}
if(this._object[property]===undefined){continue;}
this._valuesStart[property]=this._object[property];if((this._valuesStart[property]instanceof Array)===false){this._valuesStart[property]*=1.0;}
this._valuesStartRepeat[property]=this._valuesStart[property]||0;}
return this;},stop:function(){if(!this._isPlaying){return this;}
ig.game.tweens.remove(this);this._isPlaying=false;if(this._onStopCallback!==null){this._onStopCallback.call(this._object,this._object);}
this.stopChainedTweens();return this;},pause:function(){if(!this._isPlaying){return this;}
ig.game.tweens.remove(this);this._isPlaying=false;this._pauseTime=ig.game.tweens.now();if(this._onPauseCallback!==null){this._onPauseCallback.call(this._object,this._object);}
return this;},resume:function(){if(this._isPlaying){return this;}
if(!this._pauseTime){return this;}
var compensation=ig.game.tweens.now()-this._pauseTime;this._startTime+=compensation;ig.game.tweens.add(this);this._isPlaying=true;if(this._onResumeCallback!==null){this._onResumeCallback.call(this._object,this._object);}
this._pauseTime=null;return this;},end:function(){this.update(this._startTime+this._duration);return this;},stopChainedTweens:function(){for(var i=0,numChainedTweens=this._chainedTweens.length;i<numChainedTweens;i++){this._chainedTweens[i].stop();}},delay:function(amount){this._delayTime=amount;return this;},repeat:function(times){this._repeat=times;return this;},repeatDelay:function(amount){this._repeatDelayTime=amount;return this;},yoyo:function(yoyo){this._yoyo=yoyo;return this;},easing:function(easing){this._easingFunction=easing;return this;},interpolation:function(interpolation){this._interpolationFunction=interpolation;return this;},chain:function(){this._chainedTweens=arguments;return this;},onStart:function(callback){this._onStartCallback=callback;return this;},onUpdate:function(callback){this._onUpdateCallback=callback;return this;},onComplete:function(callback){this._onCompleteCallback=callback;return this;},onStop:function(callback){this._onStopCallback=callback;return this;},onPause:function(callback){this._onPauseCallback=callback;return this;},onResume:function(callback){this._onResumeCallback=callback;return this;},update:function(time){var property;var elapsed;var value;if(time<this._startTime){return true;}
if(this._onStartCallbackFired===false){if(this._onStartCallback!==null){this._onStartCallback.call(this._object,this._object);}
this._onStartCallbackFired=true;}
elapsed=(time-this._startTime)/this._duration;elapsed=elapsed>1?1:elapsed;this._currentElapsed=elapsed;value=this._easingFunction(elapsed);for(property in this._valuesEnd){if(this._valuesStart[property]===undefined){continue;}
var start=this._valuesStart[property]||0;var end=this._valuesEnd[property];if(end instanceof Array){this._object[property]=this._interpolationFunction(end,value);}else{if(typeof(end)==='string'){if(end.charAt(0)==='+'||end.charAt(0)==='-'){end=start+parseFloat(end);}else{end=parseFloat(end);}}
if(typeof(end)==="number"){this._object[property]=start+(end-start)*value;}}}
if(this._onUpdateCallback!==null){this._onUpdateCallback.call(this._object,this._object,value);}
if(elapsed===1){if(this._repeat>0){if(isFinite(this._repeat)){this._repeat--;}
for(property in this._valuesStartRepeat){if(typeof(this._valuesEnd[property])==='string'){this._valuesStartRepeat[property]=_valuesStartRepeat[property]+parseFloat(_valuesEnd[property]);}
if(this._yoyo){var tmp=this._valuesStartRepeat[property];this._valuesStartRepeat[property]=this._valuesEnd[property];this._valuesEnd[property]=tmp;}
this._valuesStart[property]=this._valuesStartRepeat[property];}
if(this._yoyo){this._reversed=!this._reversed;}
if(this._repeatDelayTime!==undefined){this._startTime=time+this._repeatDelayTime;}else{this._startTime=time+this._delayTime;}
return true;}else{if(this._onCompleteCallback!==null){this._onCompleteCallback.call(this._object,this._object);}
for(var i=0,numChainedTweens=this._chainedTweens.length;i<numChainedTweens;i++){this._chainedTweens[i].start(this._startTime+this._duration);}
return false;}}
return true;}});ig.Tween.Interpolation={Linear:function(v,k){var m=v.length-1;var f=m*k;var i=Math.floor(f);var fn=ig.Tween.Interpolation.Utils.Linear;if(k<0){return fn(v[0],v[1],f);}
if(k>1){return fn(v[m],v[m-1],m-f);}
return fn(v[i],v[i+1>m?m:i+1],f-i);},Bezier:function(v,k){var b=0;var n=v.length-1;var pw=Math.pow;var bn=ig.Tween.Interpolation.Utils.Bernstein;for(var i=0;i<=n;i++){b+=pw(1-k,n-i)*pw(k,i)*v[i]*bn(n,i);}
return b;},CatmullRom:function(v,k){var m=v.length-1;var f=m*k;var i=Math.floor(f);var fn=ig.Tween.Interpolation.Utils.CatmullRom;if(v[0]===v[m]){if(k<0){i=Math.floor(f=m*(1+k));}
return fn(v[(i-1+m)%m],v[i],v[(i+1)%m],v[(i+2)%m],f-i);}else{if(k<0){return v[0]-(fn(v[0],v[0],v[1],v[1],-f)-v[0]);}
if(k>1){return v[m]-(fn(v[m],v[m],v[m-1],v[m-1],f-m)-v[m]);}
return fn(v[i?i-1:0],v[i],v[m<i+1?m:i+1],v[m<i+2?m:i+2],f-i);}},Utils:{Linear:function(p0,p1,t){return(p1-p0)*t+p0;},Bernstein:function(n,i){var fc=ig.Tween.Interpolation.Utils.Factorial;return fc(n)/fc(i)/fc(n-i);},Factorial:(function(){var a=[1];return function(n){var s=1;if(a[n]){return a[n];}
for(var i=n;i>1;i--){s*=i;}
a[n]=s;return s;};})(),CatmullRom:function(p0,p1,p2,p3,t){var v0=(p2-p0)*0.5;var v1=(p3-p1)*0.5;var t2=t*t;var t3=t*t2;return(2*p1-2*p2+v0+v1)*t3+(-3*p1+3*p2-2*v0-v1)*t2+v0*t+p1;}}};});

// lib/plugins/url-parameters.js
ig.baked=true;ig.module('plugins.url-parameters').defines(function(){ig.UrlParameters=ig.Class.extend({init:function(){var iphone=getQueryVariable("iphone");switch(iphone){case'true':ig.ua.iPhone=true;console.log('iPhone mode')
break;}
var webview=getQueryVariable("webview");if(webview){switch(webview){case'true':ig.ua.is_uiwebview=true;console.log('webview mode')
break;}}
var debug=getQueryVariable("debug");if(debug){switch(debug){case'true':ig.game.showDebugMenu();console.log('debug mode')
break;}}
var view=getQueryVariable("view");switch(view){case'stats':ig.game.resetPlayerStats();ig.game.endGame();break;case'menu':if(ig.ua.mobile){}else{}
break;}
var ad=getQueryVariable("ad");switch(ad){case'true':break;}},});});

// lib/plugins/director.js
ig.baked=true;ig.module('plugins.director').requires('impact.impact').defines(function(){ig.Director=ig.Class.extend({init:function(theGame,initialLevels){this.game=theGame;this.levels=[];this.currentLevel=0;this.append(initialLevels);return;},loadLevel:function(levelNumber){for(var key in ig.sizeHandler.dynamicClickableEntityDivs)
{var div=ig.domHandler.getElementById("#"+key);ig.domHandler.hide(div);}
this.currentLevel=levelNumber;this.game.loadLevel(this.levels[levelNumber]);return true;},loadLevelWithoutEntities:function(levelNumber){this.currentLevel=levelNumber;this.game.loadLevelWithoutEntities(this.levels[levelNumber]);return true;},append:function(levels){newLevels=[];if(typeof(levels)==='object'){if(levels.constructor===(new Array).constructor){newLevels=levels;}
else{newLevels[0]=levels;}
this.levels=this.levels.concat(newLevels);return true;}
else{return false;}},nextLevel:function(){if(this.currentLevel+1<this.levels.length){return this.loadLevel(this.currentLevel+1);}
else{return false;}},previousLevel:function(){if(this.currentLevel-1>=0){return this.loadLevel(this.currentLevel-1);}
else{return false;}},jumpTo:function(requestedLevel){var levelNumber=null;for(i=0;i<this.levels.length;i++){if(this.levels[i]==requestedLevel){levelNumber=i;}}
if(levelNumber>=0){return this.loadLevel(levelNumber);}
else{return false;}},firstLevel:function(){return this.loadLevel(0);},lastLevel:function(){return this.loadLevel(this.levels.length-1);},reloadLevel:function(){return this.loadLevel(this.currentLevel);}});});

// lib/plugins/impact-storage.js
ig.baked=true;ig.module('plugins.impact-storage').requires('impact.game').defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(i){return!ig.Storage.instance?null:ig.Storage.instance;},init:function(){ig.Storage.instance=this;},isCapable:function(){return!(typeof(window.localStorage)==='undefined');},isSet:function(key){return!(this.get(key)===null);},initUnset:function(key,value){if(this.get(key)===null)this.set(key,value);},get:function(key){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(key));}catch(e){return window.localStorage.getItem(key);}},getInt:function(key){return~~this.get(key);},getFloat:function(key){return parseFloat(this.get(key));},getBool:function(key){return!!this.get(key);},key:function(n){return this.isCapable()?window.localStorage.key(n):null;},set:function(key,value){if(!this.isCapable())return null;try{window.localStorage.setItem(key,JSON.stringify(value));}catch(e){console.log(e);}},setHighest:function(key,value){if(value>this.getFloat(key))this.set(key,value);},remove:function(key){if(!this.isCapable())return null;window.localStorage.removeItem(key);},clear:function(){if(!this.isCapable())return null;window.localStorage.clear();}});});

// lib/plugins/fullscreen.js
ig.baked=true;ig.module('plugins.fullscreen').requires('impact.entity','plugins.handlers.size-handler','plugins.director').defines(function(){ig.Fullscreen={version:"1.0.0",enableFullscreenButton:true,_isEnabled:"notChecked",isEnabled:function(){if(this._isEnabled=="notChecked"){this._isEnabled=(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled)?true:false;}
return this._isEnabled;},isFullscreen:function(){if(ig.Fullscreen.isEnabled()&&(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement))return true;return false;},toggleFullscreen:function(){if(!ig.Fullscreen.isFullscreen()){ig.Fullscreen.requestFullscreen();}else{ig.Fullscreen.exitFullscreen();}
ig.sizeHandler.orientationDelayHandler();if(ig&&ig.visibilityHandler){ig.visibilityHandler.onChange("focus");}
try{ig.soundHandler.unlockWebAudio();}catch(error){}},requestFullscreen:function(){var elem=document.documentElement;if(elem.requestFullscreen){elem.requestFullscreen();return;}
if(elem.webkitRequestFullscreen){elem.webkitRequestFullscreen();return;}
if(elem.mozRequestFullScreen){elem.mozRequestFullScreen();return;}
if(elem.msRequestFullscreen){elem.msRequestFullscreen();return;}
console.log("no request fullscreen method available")},exitFullscreen:function(){if(document.exitFullscreen){document.exitFullscreen();return;}
if(document.webkitExitFullscreen){document.webkitExitFullscreen();return;}
if(document.mozCancelFullScreen){document.mozCancelFullScreen();return;}
if(document.msExitFullscreen){document.msExitFullscreen();return;}
console.log("no exit fullscreen method available")},divs:{}};ig.Director.inject({loadLevel:function(levelNumber){var divs=ig.Fullscreen.divs;for(var key in divs){var div=ig.domHandler.getElementById("#"+key);ig.domHandler.hide(div);}
return this.parent(levelNumber)}});ig.SizeHandler.inject({resize:function(){this.parent();var divs=ig.Fullscreen.divs;for(var key in divs){var aspectRatioMin=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);var div=ig.domHandler.getElementById("#"+key);var posX=divs[key]['entity_pos_x'];var posY=divs[key]['entity_pos_y'];var sizeX=divs[key]['width'];var sizeY=divs[key]['height'];var canvas=ig.domHandler.getElementById("#canvas");var offsets=ig.domHandler.getOffsets(canvas);if(ig.ua.mobile){var offsetLeft=offsets.left;var offsetTop=offsets.top;if(ig.sizeHandler.disableStretchToFitOnMobileFlag){var divleft=Math.floor(offsetLeft+posX*ig.sizeHandler.scaleRatioMultiplier.x)+"px";var divtop=Math.floor(offsetTop+posY*ig.sizeHandler.scaleRatioMultiplier.y)+"px";var divwidth=Math.floor(sizeX*ig.sizeHandler.scaleRatioMultiplier.x)+"px";var divheight=Math.floor(sizeY*ig.sizeHandler.scaleRatioMultiplier.y)+"px";}else{var divleft=Math.floor(posX*ig.sizeHandler.sizeRatio.x)+"px";var divtop=Math.floor(posY*ig.sizeHandler.sizeRatio.y)+"px";var divwidth=Math.floor(sizeX*ig.sizeHandler.sizeRatio.x)+"px";var divheight=Math.floor(sizeY*ig.sizeHandler.sizeRatio.y)+"px";}
ig.domHandler.css(div,{float:"left",position:"absolute",left:divleft,top:divtop,width:divwidth,height:divheight,"z-index":3});}
else{var offsetLeft=offsets.left;var offsetTop=offsets.top;var divleft=Math.floor(offsetLeft+posX*aspectRatioMin)+"px";var divtop=Math.floor(offsetTop+posY*aspectRatioMin)+"px";var divwidth=Math.floor(sizeX*aspectRatioMin)+"px";var divheight=Math.floor(sizeY*aspectRatioMin)+"px";ig.domHandler.css(div,{float:"left",position:"absolute",left:divleft,top:divtop,width:divwidth,height:divheight,"z-index":3});}
if(divs[key]['font-size']){var fontSize=divs[key]['font-size'];ig.domHandler.css(div,{"font-size":(fontSize*aspectRatioMin)+"px"});}}}});ig.FullscreenButton=ig.Entity.extend({enterImage:null,exitImage:null,isReady:false,zIndex:999999,identifier:null,prevPos:{x:0,y:0},invisImagePath:'media/graphics/misc/invisible.png',init:function(x,y,settings){this.parent(x,y,settings);if(ig.Fullscreen.isEnabled()&&ig.Fullscreen.enableFullscreenButton){if(this.enterImage.loaded){this.initSize();}else{this.enterImage.loadCallback=function(){this.initSize();}.bind(this);}}else{this.kill();}},kill:function(){this.parent();},destroy:function(){this.parent();console.log("destroy")},initSize:function(){this.size.x=this.enterImage.width;this.size.y=this.enterImage.height;this.createClickableLayer();this.isReady=true;},createClickableLayer:function(){this.identifier="fullscreen-button-layer";var id="#"+this.identifier;var elem=ig.domHandler.getElementById(id);if(elem){ig.domHandler.show(elem);ig.domHandler.attr(elem,'onclick',"ig.Fullscreen.toggleFullscreen()");}
else{this.createClickableOutboundLayer();}},update:function(x,y,width,height){var x=this.pos.x;var y=this.pos.y;if(this.isReady){if(this.prevPos.x===x&&this.prevPos.y===y){return;}
else{ig.Fullscreen.divs[this.identifier]={};ig.Fullscreen.divs[this.identifier]['width']=this.size.x;ig.Fullscreen.divs[this.identifier]['height']=this.size.y;ig.Fullscreen.divs[this.identifier]['entity_pos_x']=this.pos.x;ig.Fullscreen.divs[this.identifier]['entity_pos_y']=this.pos.y;var div=ig.domHandler.getElementById('#'+this.identifier);this.updateCSS(div);}
this.prevPos.x=x;this.prevPos.y=y;}},draw:function(){if(this.isReady){if(ig.Fullscreen.isFullscreen()){this.exitImage.draw(this.pos.x,this.pos.y);}
else{this.enterImage.draw(this.pos.x,this.pos.y);}}},createClickableOutboundLayer:function(){var id=this.identifier;var image_path=this.invisImagePath;var div=ig.domHandler.create("div");ig.domHandler.attr(div,"id",id);ig.domHandler.attr(div,"onclick","ig.Fullscreen.toggleFullscreen()");var newLink=ig.domHandler.create('a');var linkImg=ig.domHandler.create('img');ig.domHandler.css(linkImg,{width:"100%",height:"100%"});ig.domHandler.attr(linkImg,"src",image_path);ig.domHandler.addEvent(div,'mousemove',ig.input.mousemove.bind(ig.input),false);ig.domHandler.appendChild(newLink,linkImg);ig.domHandler.appendChild(div,newLink);ig.domHandler.appendToBody(div);ig.Fullscreen.divs[id]={};ig.Fullscreen.divs[id]['width']=this.size.x;ig.Fullscreen.divs[id]['height']=this.size.y;ig.Fullscreen.divs[id]['entity_pos_x']=this.pos.x;ig.Fullscreen.divs[id]['entity_pos_y']=this.pos.y;this.updateCSS(div);},updateCSS:function(div){var aspectRatioMin=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);if(ig.ua.mobile){var canvas=ig.domHandler.getElementById("#canvas");var offsets=ig.domHandler.getOffsets(canvas);var offsetLeft=offsets.left;var offsetTop=offsets.top;console.log(offsets.left)
if(ig.sizeHandler.disableStretchToFitOnMobileFlag){var divleft=Math.floor(offsetLeft+this.pos.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px";var divtop=Math.floor(offsetTop+this.pos.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px";var divwidth=Math.floor(this.size.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px";var divheight=Math.floor(this.size.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px";}else{var divleft=Math.floor(this.pos.x*ig.sizeHandler.sizeRatio.x)+"px";var divtop=Math.floor(this.pos.y*ig.sizeHandler.sizeRatio.y)+"px";var divwidth=Math.floor(this.size.x*ig.sizeHandler.sizeRatio.x)+"px";var divheight=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px";}
ig.domHandler.css(div,{float:"left",position:"absolute",left:divleft,top:divtop,width:divwidth,height:divheight,"z-index":3});}
else{var canvas=ig.domHandler.getElementById("#canvas");var offsets=ig.domHandler.getOffsets(canvas);var offsetLeft=offsets.left;var offsetTop=offsets.top;if(ig.sizeHandler.enableStretchToFitOnDesktopFlag){var divleft=Math.floor(offsetLeft+this.pos.x*ig.sizeHandler.sizeRatio.x)+"px";var divtop=Math.floor(offsetTop+this.pos.y*ig.sizeHandler.sizeRatio.y)+"px";var divwidth=Math.floor(this.size.x*ig.sizeHandler.sizeRatio.x)+"px";var divheight=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px";}else{var divleft=Math.floor(offsetLeft+this.pos.x*aspectRatioMin)+"px";var divtop=Math.floor(offsetTop+this.pos.y*aspectRatioMin)+"px";var divwidth=Math.floor(this.size.x*aspectRatioMin)+"px";var divheight=Math.floor(this.size.y*aspectRatioMin)+"px";}
ig.domHandler.css(div,{float:"left",position:"absolute",left:divleft,top:divtop,width:divwidth,height:divheight,"z-index":3});}}});});

// lib/plugins/scale.js
ig.baked=true;ig.module('plugins.scale').requires('impact.entity').defines(function()
{ig.Entity.inject({scale:{x:1,y:1},_offset:{x:0,y:0},_scale:{x:1,y:1},_size:{x:0,y:0},init:function(x,y,settings){this.parent(x,y,settings);this._offset.x=this.offset.x;this._offset.y=this.offset.y;this._size.x=this.size.x;this._size.y=this.size.y;this.setScale(this.scale.x,this.scale.y);},draw:function(){var ctx=ig.system.context;ctx.save();ctx.translate(ig.system.getDrawPos(this.pos.x.round()-this.offset.x-ig.game.screen.x),ig.system.getDrawPos(this.pos.y.round()-this.offset.y-ig.game.screen.y));ctx.scale(this._scale.x,this._scale.y);if(this.currentAnim!=null)
{this.currentAnim.draw(0,0);}
ctx.restore();},setScale:function(x,y){var oX=this.size.x,oY=this.size.y;this.scale.x=x||this.scale.x;this.scale.y=y||this.scale.y;this._scale.x=this.scale.x/ig.system.scale;this._scale.y=this.scale.y/ig.system.scale;this.offset.x=this._offset.x*this._scale.x;this.offset.y=this._offset.y*this._scale.y;this.size.x=this._size.x*this._scale.x;this.size.y=this._size.y*this._scale.y;this.pos.x+=(oX-this.size.x)/2;this.pos.y+=(oY-this.size.y)/2;},});});

// lib/plugins/responsive/responsive-utils.js
ig.baked=true;ig.module('plugins.responsive.responsive-utils').requires('impact.system').defines(function(){ig.responsive={width:0,height:0,halfWidth:0,halfHeight:0,originalWidth:0,originalHeight:0,fillScale:1,scaleX:1,scaleY:1,toAnchor:function(x,y,type){switch(type){case"top-left":case"left-top":return this.toAnchorTopLeft(x,y);case"top-center":case"center-top":case"top":return this.toAnchorTopCenter(x,y);case"top-right":case"right-top":return this.toAnchorTopRight(x,y);case"left-middle":case"middle-left":case"left":return this.toAnchorLeftMiddle(x,y);case"center-middle":case"middle-center":case"middle":case"center":return this.toAnchorCenterMiddle(x,y);case"right-middle":case"middle-right":case"right":return this.toAnchorRightMiddle(x,y);case"bottom-left":case"left-bottom":return this.toAnchorBottomLeft(x,y);case"bottom-center":case"center-bottom":case"bottom":return this.toAnchorBottomCenter(x,y);case"bottom-right":case"right-bottom":return this.toAnchorBottomRight(x,y);default:return this.toAnchorDefault(x,y);}},toAnchorDefault:function(x,y){return{x:x+(this.width-this.originalWidth)/2,y:y+(this.height-this.originalHeight)/2};},toAnchorCenterMiddle:function(x,y){return{x:x+this.halfWidth,y:y+this.halfHeight}},toAnchorLeftMiddle:function(x,y){return{x:x,y:y+this.halfHeight};},toAnchorTopCenter:function(x,y){return{x:x+this.halfWidth,y:y};},toAnchorRightMiddle:function(x,y){return{x:x+this.width,y:y+this.halfHeight};},toAnchorBottomCenter:function(x,y){return{x:x+this.halfWidth,y:y+this.height};},toAnchorTopLeft:function(x,y){return{x:x,y:y};},toAnchorBottomLeft:function(x,y){return{x:x,y:y+this.height};},toAnchorTopRight:function(x,y){return{x:x+this.width,y:y};},toAnchorBottomRight:function(x,y){return{x:x+this.width,y:y+this.height};},drawScaledImage:function(img,x,y,scaleX,scaleY,anchorX,anchorY){if(!anchorX)anchorX=0;if(!anchorY)anchorY=0;var ctx=ig.system.context;ctx.save();ctx.translate(x,y);if(scaleX!=1||scaleY!=1)ctx.scale(scaleX,scaleY);img.draw(-img.width*anchorX,-img.height*anchorY);ctx.restore();},}});

// lib/plugins/responsive/responsive-plugin.js
ig.baked=true;ig.module('plugins.responsive.responsive-plugin').requires('impact.system','impact.entity','plugins.handlers.size-handler','plugins.responsive.responsive-utils').defines(function(){ig.SizeHandler.inject({resize:function(){this.parent()},sizeCalcs:function(){if(!this.originalResolution){this.originalResolution=new Vector2(this.desktop.actualResolution.x,this.desktop.actualResolution.y);ig.responsive.originalWidth=this.desktop.actualResolution.x;ig.responsive.originalHeight=this.desktop.actualResolution.y;}
var innerWidth=window.innerWidth;var innerHeight=window.innerHeight;var newAspectRatio=innerWidth/innerHeight;var originalAspectRatio=this.originalResolution.x/this.originalResolution.y;var newWidth=0;var newHeight=0;this.windowSize=new Vector2(innerWidth,innerHeight);if(newAspectRatio<originalAspectRatio){newWidth=this.originalResolution.x;newHeight=newWidth/newAspectRatio;ig.responsive.scaleX=1;ig.responsive.scaleY=newHeight/this.originalResolution.y;}else{newHeight=this.originalResolution.y;newWidth=newHeight*newAspectRatio;ig.responsive.scaleX=newWidth/this.originalResolution.x;ig.responsive.scaleY=1;}
this.scaleRatioMultiplier=new Vector2(innerWidth/newWidth,innerHeight/newHeight);this.desktop.actualResolution=new Vector2(newWidth,newHeight);this.mobile.actualResolution=new Vector2(newWidth,newHeight);this.desktop.actualSize=new Vector2(innerWidth,innerHeight);this.mobile.actualSize=new Vector2(innerWidth,innerHeight);ig.responsive.width=newWidth;ig.responsive.height=newHeight;ig.responsive.halfWidth=newWidth/2;ig.responsive.halfHeight=newHeight/2;ig.responsive.fillScale=Math.max(ig.responsive.scaleX,ig.responsive.scaleY);},resizeLayers:function(width,height){ig.system.resize(ig.sizeHandler.desktop.actualResolution.x,ig.sizeHandler.desktop.actualResolution.y)
for(var index=0;index<this.coreDivsToResize.length;index++){var elem=ig.domHandler.getElementById(this.coreDivsToResize[index]);var l=Math.floor(((ig.sizeHandler.windowSize.x/2)-(ig.sizeHandler.desktop.actualSize.x/2)));var t=Math.floor(((ig.sizeHandler.windowSize.y/2)-(ig.sizeHandler.desktop.actualSize.y/2)));if(l<0)l=0;if(t<0)t=0;ig.domHandler.resizeOffset(elem,Math.floor(ig.sizeHandler.desktop.actualSize.x),Math.floor(ig.sizeHandler.desktop.actualSize.y),l,t);}
for(var key in this.adsToResize){var keyDiv=ig.domHandler.getElementById('#'+key);var keyBox=ig.domHandler.getElementById('#'+key+'-Box');var divLeft=(window.innerWidth-this.adsToResize[key]['box-width'])/2+"px";var divTop=(window.innerHeight-this.adsToResize[key]['box-height'])/2+"px";if(keyDiv){ig.domHandler.css(keyDiv,{width:window.innerWidth,height:window.innerHeight});}
if(keyBox){ig.domHandler.css(keyBox,{left:divLeft,top:divTop});}}
var canvas=ig.domHandler.getElementById("#canvas");var offsets=ig.domHandler.getOffsets(canvas);var offsetLeft=offsets.left;var offsetTop=offsets.top;var aspectRatioMin=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);for(var key in this.dynamicClickableEntityDivs){var div=ig.domHandler.getElementById("#"+key);var posX=this.dynamicClickableEntityDivs[key]['entity_pos_x'];var posY=this.dynamicClickableEntityDivs[key]['entity_pos_y'];var sizeX=this.dynamicClickableEntityDivs[key]['width'];var sizeY=this.dynamicClickableEntityDivs[key]['height'];var divleft=Math.floor(offsetLeft+posX*this.scaleRatioMultiplier.x)+"px";var divtop=Math.floor(offsetTop+posY*this.scaleRatioMultiplier.y)+"px";var divwidth=Math.floor(sizeX*this.scaleRatioMultiplier.x)+"px";var divheight=Math.floor(sizeY*this.scaleRatioMultiplier.y)+"px";ig.domHandler.css(div,{float:"left",position:"absolute",left:divleft,top:divtop,width:divwidth,height:divheight,"z-index":3});if(this.dynamicClickableEntityDivs[key]['font-size']){var fontSize=this.dynamicClickableEntityDivs[key]['font-size'];ig.domHandler.css(div,{"font-size":(fontSize*aspectRatioMin)+"px"});}}
$('#ajaxbar').width(this.windowSize.x);$('#ajaxbar').height(this.windowSize.y);},reorient:function(){if(!ig.ua.mobile){this.resize();}
else{this.resize();this.resizeAds();}
if(typeof(BABYLON)!='undefined')this.resizeBabylon();if(ig.game){ig.game.update();ig.game.draw();}},resizeBabylon:function(){var w=window.innerWidth;var h=window.innerHeight;var ratio=w/h;var oriW=ig.responsive.originalWidth
var oriH=ig.responsive.originalHeight
var oriRatio=oriW/oriH;var maxSize=Math.max(oriW,oriH);if(ig.ua.mobile)maxSize=640;minSize=Math.min(oriW,oriH);if(ratio>oriRatio){if(h>oriH)h=oriH;w=Math.floor((window.innerWidth/window.innerHeight)*h);if(w>maxSize)w=maxSize;h=Math.floor((window.innerHeight/window.innerWidth)*w);}else{if(w>oriW)w=oriW;h=Math.floor((window.innerHeight/window.innerWidth)*w);if(h>maxSize)h=maxSize;w=Math.floor((window.innerWidth/window.innerHeight)*h);}
var renderRatioW=1;var renderRatioH=1;if(window.innerWidth>maxSize){renderRatioW=window.innerWidth/maxSize;}
if(window.innerHeight>maxSize){renderRatioH=window.innerHeight/maxSize;}
wgl.system.engine.setSize(w,h);wgl.system.engine.resize();wgl.system.engine.setHardwareScalingLevel(Math.max(renderRatioW,renderRatioH));ig.gameScene.zoomFactor=1;if(ig.ua.mobile&&minSize<maxSize){ig.gameScene.zoomFactor=maxSize/minSize;}
ig.wglW=w;ig.wglH=h;ig.wglInnerW=window.innerWidth;ig.wglInnerH=window.innerHeight;console.log("babylon renderSize : ",wgl.system.engine.getRenderWidth(),wgl.system.engine.getRenderHeight(),"hwScalingLevel : ",wgl.system.engine.getHardwareScalingLevel());}});ig.Entity.inject({init:function(x,y,settings){this.parent(x,y,settings);this.anchorType="none";this.anchoredPositionX=x;this.anchoredPositionY=y;},setAnchoredPosition:function(x,y,anchorTo){if(!anchorTo)anchorTo="default";this.anchorType=anchorTo;this.anchoredPositionX=x;this.anchoredPositionY=y;},update:function(){this.parent();if(this.anchorType!=""&&this.anchorType!="none"){var point=ig.responsive.toAnchor(this.anchoredPositionX,this.anchoredPositionY,this.anchorType);this.pos.x=point.x;this.pos.y=point.y;}}});});this.START_BRANDING_SPLASH;

// lib/plugins/branding/splash.js
ig.baked=true;ig.module('plugins.branding.splash').requires('impact.impact','impact.entity').defines(function(){ig.BrandingSplash=ig.Class.extend({init:function(){ig.game.spawnEntity(EntityBranding,0,0);console.log("spawn branding")}});EntityBranding=ig.Entity.extend({autoUpdateScale:false,gravityFactor:0,size:{x:32,y:32},splash:new ig.Image('branding/splash1.png'),init:function(x,y,settings){this.parent(x,y,settings);if(ig.system.width<=320){this.size.x=320;this.size.y=200;}else{this.size.x=480;this.size.y=240;}
this.pos.x=(ig.system.width-this.size.x)/2;this.pos.y=-this.size.y-200;this.endPosY=(ig.system.height-this.size.y)/2;var tween1=this.tween({pos:{y:this.endPosY}},0.5,{easing:ig.Tween.Easing.Bounce.EaseIn});var tween2=this.tween({},2.5,{onComplete:function(){ig.game.director.loadLevel(ig.game.director.currentLevel);}});tween1.chain(tween2);tween1.start();this.currentAnim=this.anims.idle;},createClickableLayer:function(){console.log('Build clickable layer')
this.checkClickableLayer('branding-splash',_SETTINGS['Branding']['Logo']['Link'],_SETTINGS['Branding']['Logo']['NewWindow']);},doesClickableLayerExist:function(id){for(k in dynamicClickableEntityDivs){if(k==id)return true;}
return false;},checkClickableLayer:function(divID,outboundLink,open_new_window){if(typeof(wm)=='undefined'){if(this.doesClickableLayerExist(divID)){ig.game.showOverlay([divID]);$('#'+divID).find('[href]').attr('href',outboundLink);}else{this.createClickableOutboundLayer(divID,outboundLink,'media/graphics/misc/invisible.png',open_new_window);}}},createClickableOutboundLayer:function(id,outbound_link,image_path,open_new_window){var div=ig.$new('div');div.id=id;document.body.appendChild(div);var elem=$('#'+div.id);elem.css('float','left');elem.css('position','absolute');if(ig.ua.mobile){var heightRatio=window.innerHeight/mobileHeight;var widthRatio=window.innerWidth/mobileWidth;elem.css('left',this.pos.x*widthRatio);elem.css('top',this.pos.y*heightRatio);elem.css('width',this.size.x*widthRatio);elem.css('height',this.size.y*heightRatio);}else{var reference={x:(w/2)-(destW/2),y:(h/2)-(destH/2),}
console.log(reference.x,reference.y);elem.css('left',reference.x+this.pos.x*multiplier);elem.css('top',reference.y+this.pos.y*multiplier);elem.css('width',this.size.x*multiplier);elem.css('height',this.size.y*multiplier);}
if(open_new_window){elem.html('<a target=\'_blank\' href=\''+outbound_link+'\'><img style=\'width:100%;height:100%\' src=\''+image_path+'\'></a>');}else{elem.html('<a href=\''+outbound_link+'\'><img style=\'width:100%;height:100%\' src=\''+image_path+'\'></a>');}
dynamicClickableEntityDivs[id]={};dynamicClickableEntityDivs[id]['width']=this.size.x*multiplier;dynamicClickableEntityDivs[id]['height']=this.size.y*multiplier;dynamicClickableEntityDivs[id]['entity_pos_x']=this.pos.x;dynamicClickableEntityDivs[id]['entity_pos_y']=this.pos.y;},draw:function(){ig.system.context.fillStyle='#ffffff';ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);ig.system.context.fillStyle='#000';ig.system.context.font="12px Arial";ig.system.context.textAlign="left";if(ig.system.width<=320){ig.system.context.fillText("powered by MarketJS.com",ig.system.width-150,ig.system.height-15);}else{ig.system.context.fillText("powered by MarketJS.com",ig.system.width-160,ig.system.height-15);}
this.parent();if(this.splash)
{ig.system.context.drawImage(this.splash.data,0,0,this.splash.data.width,this.splash.data.height,this.pos.x,this.pos.y,this.size.x,this.size.y);}}});});this.END_BRANDING_SPLASH;

// lib/game/entities/buttons/button.js
ig.baked=true;ig.module('game.entities.buttons.button').requires('impact.entity','plugins.data.vector').defines(function(){EntityButton=ig.Entity.extend({collides:ig.Entity.COLLIDES.NEVER,type:ig.Entity.TYPE.A,size:new Vector2(48,48),fillColor:null,zIndex:95000,init:function(x,y,settings){this.parent(x,y,settings);if(!ig.global.wm)
{if(!isNaN(settings.zIndex))
{this.zIndex=settings.zIndex;}}
var r=Math.floor(Math.random()*256);var g=Math.floor(Math.random()*256);var b=Math.floor(Math.random()*256);var a=1;this.fillColor="rgba("+r+","+b+","+g+","+a+")";},clicked:function(){console.warn("no implementation on clicked()");},clicking:function(){console.warn("no implementation on clicking()");},released:function(){console.warn("no implementation on released()");},});});

// lib/plugins/clickable-div-layer.js
ig.baked=true;ig.module('plugins.clickable-div-layer').requires('plugins.data.vector').defines(function(){ClickableDivLayer=ig.Class.extend({version:"1.0.0",pos:new Vector2(0,0),size:new Vector2(0,0),identifier:null,invisImagePath:'media/graphics/misc/invisible.png',init:function(entity)
{this.pos=new Vector2(entity.pos.x,entity.pos.y);this.size=new Vector2(entity.size.x,entity.size.y);var div_layer_name="more-games";var link="https://www.marketjs.com";var newWindow=false;if(entity.div_layer_name)
{div_layer_name=entity.div_layer_name;}
if(entity.link)
{link=entity.link;}
if(entity.newWindow)
{newWindow=entity.newWindow;}
this.createClickableLayer(div_layer_name,link,newWindow);},createClickableLayer:function(divID,outboundLink,open_new_window)
{this.identifier=divID;var id="#"+divID;var elem=ig.domHandler.getElementById(id);if(elem)
{ig.domHandler.show(elem);ig.domHandler.attr(elem,'href',outboundLink);}
else
{this.createClickableOutboundLayer(divID,outboundLink,this.invisImagePath,open_new_window);}},update:function(x,y,width,height)
{if(this.pos.x==x&&this.pos.y==y)
{return;}
else
{this.pos.x=x;this.pos.y=y;ig.sizeHandler.dynamicClickableEntityDivs[this.identifier]={};ig.sizeHandler.dynamicClickableEntityDivs[this.identifier]['width']=this.size.x;ig.sizeHandler.dynamicClickableEntityDivs[this.identifier]['height']=this.size.y;ig.sizeHandler.dynamicClickableEntityDivs[this.identifier]['entity_pos_x']=this.pos.x;ig.sizeHandler.dynamicClickableEntityDivs[this.identifier]['entity_pos_y']=this.pos.y;ig.sizeHandler.resizeLayers();}},createClickableOutboundLayer:function(id,outbound_link,image_path,open_new_window)
{var div=ig.domHandler.create("div");ig.domHandler.attr(div,"id",id);var newLink=ig.domHandler.create('a');ig.domHandler.addEvent(div,"mousedown",function(e){e.preventDefault();});if(open_new_window)
{ig.domHandler.attr(newLink,"href",outbound_link);ig.domHandler.attr(newLink,"target","_blank");}
else
{ig.domHandler.attr(newLink,"href",outbound_link);}
var linkImg=ig.domHandler.create('img');ig.domHandler.css(linkImg,{width:"100%",height:"100%"});ig.domHandler.attr(linkImg,"src",image_path);ig.domHandler.addEvent(div,'mousemove',ig.input.mousemove.bind(ig.input),false);ig.domHandler.appendChild(newLink,linkImg);ig.domHandler.appendChild(div,newLink);ig.domHandler.appendToBody(div);ig.sizeHandler.dynamicClickableEntityDivs[id]={};ig.sizeHandler.dynamicClickableEntityDivs[id]['width']=this.size.x;ig.sizeHandler.dynamicClickableEntityDivs[id]['height']=this.size.y;ig.sizeHandler.dynamicClickableEntityDivs[id]['entity_pos_x']=this.pos.x;ig.sizeHandler.dynamicClickableEntityDivs[id]['entity_pos_y']=this.pos.y;this.updateCSS(div);},updateCSS:function(div){var aspectRatioMin=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);if(ig.ua.mobile)
{var canvas=ig.domHandler.getElementById("#canvas");var offsets=ig.domHandler.getOffsets(canvas);var offsetLeft=offsets.left;var offsetTop=offsets.top;if(ig.sizeHandler.disableStretchToFitOnMobileFlag){var divleft=Math.floor(offsetLeft+this.pos.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px";var divtop=Math.floor(offsetTop+this.pos.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px";var divwidth=Math.floor(this.size.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px";var divheight=Math.floor(this.size.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px";}else{var divleft=Math.floor(this.pos.x*ig.sizeHandler.sizeRatio.x)+"px";var divtop=Math.floor(this.pos.y*ig.sizeHandler.sizeRatio.y)+"px";var divwidth=Math.floor(this.size.x*ig.sizeHandler.sizeRatio.x)+"px";var divheight=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px";}
ig.domHandler.css(div,{float:"left",position:"absolute",left:divleft,top:divtop,width:divwidth,height:divheight,"z-index":3});}
else
{var canvas=ig.domHandler.getElementById("#canvas");var offsets=ig.domHandler.getOffsets(canvas);var offsetLeft=offsets.left;var offsetTop=offsets.top;if(ig.sizeHandler.enableStretchToFitOnDesktopFlag){var divleft=Math.floor(offsetLeft+this.pos.x*ig.sizeHandler.sizeRatio.x)+"px";var divtop=Math.floor(offsetTop+this.pos.y*ig.sizeHandler.sizeRatio.y)+"px";var divwidth=Math.floor(this.size.x*ig.sizeHandler.sizeRatio.x)+"px";var divheight=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px";}else{var divleft=Math.floor(offsetLeft+this.pos.x*aspectRatioMin)+"px";var divtop=Math.floor(offsetTop+this.pos.y*aspectRatioMin)+"px";var divwidth=Math.floor(this.size.x*aspectRatioMin)+"px";var divheight=Math.floor(this.size.y*aspectRatioMin)+"px";}
ig.domHandler.css(div,{float:"left",position:"absolute",left:divleft,top:divtop,width:divwidth,height:divheight,"z-index":3});}}});});

// lib/game/entities/buttons/button-branding-logo.js
ig.baked=true;ig.module('game.entities.buttons.button-branding-logo').requires('game.entities.buttons.button','plugins.clickable-div-layer').defines(function(){EntityButtonBrandingLogo=EntityButton.extend({type:ig.Entity.TYPE.A,gravityFactor:0,logo:new ig.AnimationSheet('branding/logo.png',_SETTINGS['Branding']['Logo']['Width'],_SETTINGS['Branding']['Logo']['Height']),zIndex:10001,size:{x:64,y:66,},clickableLayer:null,link:null,newWindow:false,div_layer_name:"branding-logo",name:"brandinglogo",init:function(x,y,settings){this.parent(x,y,settings);if(ig.global.wm)
{return;}
if(typeof(wm)=='undefined'){if(!_SETTINGS['Branding']['Logo']['Enabled']){this.kill();return;}else{this.size.x=_SETTINGS['Branding']['Logo']['Width'];this.size.y=_SETTINGS['Branding']['Logo']['Height'];this.anims.idle=new ig.Animation(this.logo,0,[0],true);this.currentAnim=this.anims.idle;if(settings){if(settings.centralize){this.pos.x=ig.system.width/2-this.size.x/2;console.log('centralize true ... centering branded logo ...')}}
if(_SETTINGS['Branding']['Logo']['LinkEnabled']){this.link=_SETTINGS['Branding']['Logo']['Link'];this.newWindow=_SETTINGS['Branding']['Logo']['NewWindow'];this.clickableLayer=new ClickableDivLayer(this);}}}
if(settings.div_layer_name)
{this.div_layer_name=settings.div_layer_name;}
else
{this.div_layer_name='branding-logo'}},show:function()
{var elem=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.show(elem);},hide:function()
{var elem=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.hide(elem);},clicked:function()
{},clicking:function()
{},released:function()
{}});});

// lib/game/entities/branding-logo-placeholder.js
ig.baked=true;ig.module('game.entities.branding-logo-placeholder').requires('impact.entity','game.entities.buttons.button-branding-logo').defines(function(){EntityBrandingLogoPlaceholder=ig.Entity.extend({gravityFactor:0,size:{x:32,y:32,},_wmDrawBox:true,_wmBoxColor:'rgba(0, 0, 255, 0.7)',init:function(x,y,settings){this.parent(x,y,settings);var div_layer_name;if(settings){console.log('settings found ... using that div layer name')
div_layer_name=settings.div_layer_name;console.log('settings.centralize:',settings.centralize);switch(settings.centralize){case'true':console.log('centralize true');centralize=true;break;case'false':console.log('centralize false');centralize=false;break;default:console.log('default ... centralize false');centralize=false;}}else{div_layer_name='branding-logo'
centralize=false;}
if(typeof(wm)=='undefined'){if(_SETTINGS['Branding']['Logo']['Enabled']){try{ig.game.spawnEntity(EntityButtonBrandingLogo,this.pos.x,this.pos.y,{div_layer_name:div_layer_name,centralize:centralize});}catch(err){console.log(err);}}
this.kill();}}});});

// lib/game/entities/buttons/button-more-games.js
ig.baked=true;ig.module('game.entities.buttons.button-more-games').requires('game.entities.buttons.button','plugins.clickable-div-layer').defines(function(){EntityButtonMoreGames=EntityButton.extend({type:ig.Entity.TYPE.A,gravityFactor:0,logo:new ig.AnimationSheet('media/graphics/sprites/games/more_games.png',163,163),size:{x:163,y:163,},clickableLayer:null,link:null,newWindow:false,div_layer_name:"more-games",name:"moregames",init:function(x,y,settings){this.parent(x,y,settings);if(ig.global.wm)
{return;}
if(settings.div_layer_name)
{this.div_layer_name=settings.div_layer_name;}
else
{this.div_layer_name='more-games'}
if(_SETTINGS.MoreGames.Enabled)
{this.anims.idle=new ig.Animation(this.logo,0,[0],true);this.currentAnim=this.anims.idle;if(_SETTINGS.MoreGames.Link)
{this.link=_SETTINGS.MoreGames.Link;}
if(_SETTINGS.MoreGames.NewWindow)
{this.newWindow=_SETTINGS.MoreGames.NewWindow;}
this.clickableLayer=new ClickableDivLayer(this);}
else
{this.kill();}},update:function(){this.parent();this.clickableLayer.update(this.pos.x,this.pos.y);},show:function()
{var elem=ig.domHandler.getElementById("#"+this.div_layer_name);if(elem){ig.domHandler.show(elem);}},hide:function()
{var elem=ig.domHandler.getElementById("#"+this.div_layer_name);if(elem){ig.domHandler.hide(elem);}},clicked:function()
{},clicking:function()
{},released:function()
{}});});

// lib/game/entities/pointer.js
ig.baked=true;ig.module('game.entities.pointer').requires('impact.entity').defines(function(){EntityPointer=ig.Entity.extend({checkAgainst:ig.Entity.TYPE.BOTH,size:new Vector2(1,1),isFirstPressed:false,isPressed:false,isReleased:false,isHovering:false,hoveringItem:null,objectArray:[],clickedObjectList:[],ignorePause:true,zIndex:5500,check:function(other){this.objectArray.push(other);},clickObject:function(targetobject){if(this.isFirstPressed){if(typeof(targetobject.clicked)=='function'){targetobject.clicked();this.addToClickedObjectList(targetobject);}}
if(this.isPressed&&!this.isReleased){if(typeof(targetobject.clicking)=='function'){targetobject.clicking();}}
if(this.isReleased){if(typeof(targetobject.released)=='function'){targetobject.released();this.removeFromClickedObjectList(targetobject);}}},refreshPos:function(){this.pos=ig.game.io.getClickPos();},update:function(){this.parent();this.refreshPos();var targetObject=null;var highestIndex=-1;for(a=this.objectArray.length-1;a>-1;a--){if(this.objectArray[a].zIndex>highestIndex){highestIndex=this.objectArray[a].zIndex;targetObject=this.objectArray[a];}}
if(targetObject!=null){if(this.hoveringItem!=null){if(this.hoveringItem!=targetObject){if(typeof(this.hoveringItem.leave)=='function'){this.hoveringItem.leave();}
if(typeof(targetObject.over)=='function'){targetObject.over();}}}else{if(typeof(targetObject.over)=='function'){targetObject.over();}}
this.hoveringItem=targetObject;this.clickObject(targetObject);this.objectArray=[];}else{if(this.hoveringItem!=null&&typeof(this.hoveringItem.leave)=='function'){this.hoveringItem.leave();this.hoveringItem=null;}
if(this.isReleased){for(var i=0;i<this.clickedObjectList.length;i++){var targetobject=this.clickedObjectList[i];if(typeof(targetobject.releasedOutside)=='function'){targetobject.releasedOutside();}}
this.clickedObjectList=[];}}
this.isFirstPressed=ig.input.pressed('click');this.isReleased=ig.input.released('click');this.isPressed=ig.input.state('click');},addToClickedObjectList:function(targetObject){this.clickedObjectList.push(targetObject);},removeFromClickedObjectList:function(targetObject){var temp=[];for(var i=0;i<this.clickedObjectList.length;i++){var obj=this.clickedObjectList[i];if(obj!=targetObject){temp.push(obj);}}
this.clickedObjectList=temp;},});});

// lib/game/entities/pointer-selector.js
ig.baked=true;ig.module('game.entities.pointer-selector').requires('game.entities.pointer').defines(function(){EntityPointerSelector=EntityPointer.extend({zIndex:1000,_wmDrawBox:true,_wmBoxColor:'rgba(0, 0, 255, 0.7)',size:{x:20,y:20},init:function(x,y,settings){this.parent(x,y,settings);}});});

// lib/game/entities/select.js
ig.baked=true;ig.module('game.entities.select').requires('impact.entity').defines(function(){EntitySelect=ig.Entity.extend({type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,canSelect:false,canSelectTimerDuration:0.35,zIndex:99999,isHovering:false,isSelected:false,init:function(x,y,settings){this.parent(x,y,settings);this.canSelectTimer=new ig.Timer(this.canSelectTimerDuration);},doesClickableLayerExist:function(id){for(k in dynamicClickableEntityDivs){if(k==id)return true;}
return false;},checkClickableLayer:function(divID,outboundLink,open_new_window){if(typeof(wm)=='undefined'){if(this.doesClickableLayerExist(divID)){ig.game.showOverlay([divID]);$('#'+divID).find('[href]').attr('href',outboundLink);}else{this.createClickableOutboundLayer(divID,outboundLink,'media/graphics/misc/invisible.png',open_new_window);}}},createClickableOutboundLayer:function(id,outbound_link,image_path,open_new_window){var div=ig.$new('div');div.id=id;document.body.appendChild(div);$('#'+div.id).css('float','left');$('#'+div.id).css('width',this.size.x*multiplier);$('#'+div.id).css('height',this.size.y*multiplier);$('#'+div.id).css('position','absolute');var reference={x:(w/2)-(destW/2),y:(h/2)-(destH/2),}
if(w==mobileWidth){$('#'+div.id).css('left',this.pos.x);$('#'+div.id).css('top',this.pos.y);}else{$('#'+div.id).css('left',reference.x+this.pos.x*multiplier);$('#'+div.id).css('top',reference.y+this.pos.y*multiplier);}
if(open_new_window){$('#'+div.id).html('<a target=\'_blank\' href=\''+outbound_link+'\'><img style=\'width:100%;height:100%\' src=\''+image_path+'\'></a>');}else{$('#'+div.id).html('<a href=\''+outbound_link+'\'><img style=\'width:100%;height:100%\' src=\''+image_path+'\'></a>');}
dynamicClickableEntityDivs[id]={};dynamicClickableEntityDivs[id]['width']=$('#'+div.id).width();dynamicClickableEntityDivs[id]['height']=$('#'+div.id).height();dynamicClickableEntityDivs[id]['entity_pos_x']=this.pos.x;dynamicClickableEntityDivs[id]['entity_pos_y']=this.pos.y;},hovered:function(){this.isHovering=true;this.dehoverOthers();},dehoverOthers:function(){var selectors=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<selectors.length;i++){if(selectors[i]!=this){selectors[i].isHovering=false;}}},deselectOthers:function(){var selectors=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<selectors.length;i++){if(selectors[i]!=this){selectors[i].isSelected=false;}}},update:function(){this.parent();if(this.canSelectTimer&&this.canSelectTimer.delta()>0){this.canSelect=true;this.canSelectTimer=null;}},});});

// lib/game/entities/opening-marketjs-logo.js
ig.baked=true;ig.module('game.entities.opening-marketjs-logo').requires('impact.entity').defines(function(){EntityOpeningMarketJSLogo=ig.Entity.extend({objects:[],letterM:null,logoShield:null,text:null,localTweens:[],logoOriX:0,logoOriY:0,textOriX:0,textOriY:0,logoCanvas:null,init:function(x,y,settings){this.parent(x,y,settings);console.log("Opening v1.0.4");var size=Math.min(ig.system.width,ig.system.height);logoSize=(148/960)*size;this.logoCacheSize=Math.round(logoSize*2);this.text=this.addObject("drawText",0,0,logoSize,logoSize);this.cover=this.addObject("drawCover",0,0,logoSize,logoSize);this.logoShield=this.addObject("drawLogoShield",0,0,logoSize,logoSize)
this.letterM=this.addObject("drawLetterM",0,0,logoSize,logoSize)
this.logoOriX=0-logoSize*2.2
this.logoOriY=0;this.textOriX=0-1.378*logoSize;this.textOriY=0-0.5*logoSize;this.logoShield.x=0;this.logoShield.y=0;this.logoShield.scaleX=0;this.logoShield.scaleY=0;this.logoShield.alpha=0;this.letterM.x=this.logoShield.x;this.letterM.y=this.logoShield.y;this.letterM.scaleX=0;this.letterM.scaleY=0;this.letterM.alpha=0;this.text.x=-logoSize*4.6;this.text.y=this.textOriY
this.cover.x=this.logoShield.x;this.cover.y=0;this.addLocalDelayedCall(0.6,function(){this.addLocalTweenTo(this.logoShield,{scaleX:2,scaleY:2},0.5,this.backOut);this.addLocalTweenTo(this.logoShield,{alpha:1},0.2,this.quadOut);ig.soundHandler.sfxPlayer.play("logosplash1");this.addLocalDelayedCall(0.4,function(){this.addLocalTweenTo(this.letterM,{scaleX:2,scaleY:2},0.5,this.backOut);this.addLocalTweenTo(this.letterM,{alpha:1},0.2,this.quadOut);ig.soundHandler.sfxPlayer.play("logosplash1");this.addLocalDelayedCall(0.2,function(){ig.soundHandler.sfxPlayer.play("logosplash2");}.bind(this))
this.addLocalDelayedCall(0.6,function(){this.addLocalTweenTo(this.logoShield,{scaleX:1,scaleY:1},0.4,this.quartOut);this.addLocalTweenTo(this.logoShield,{x:this.logoOriX,y:this.logoOriY},0.4,this.quadOut);this.addLocalTweenTo(this.letterM,{scaleX:1,scaleY:1},0.4,this.quartOut);this.addLocalTweenTo(this.letterM,{x:this.logoOriX,y:this.logoOriY},0.4,this.quadOut);this.addLocalTweenTo(this.text,{x:this.textOriX},0.8,this.backOut);this.addLocalDelayedCall(2,function(){this.addLocalTweenTo(this.logoShield,{alpha:0},0.6,this.quadOut);this.addLocalTweenTo(this.text,{alpha:0},0.6,this.quadOut);this.addLocalDelayedCall(1.3,function(){this.playBgm();ig.game.director.nextLevel();}.bind(this))}.bind(this))}.bind(this))}.bind(this))}.bind(this))},addObject:function(drawFunctionName,x,y,width,height){var obj={x:x,y:y,width:width,height:height,scaleX:1,scaleY:1,alpha:1,drawFunctionName:drawFunctionName};this.objects.push(obj);return obj;},update:function(){this.parent();if(ig.wm)return;this.unlockWebAudio();var dt=ig.system.tick;if(dt>1/60)dt=1/60;this.updateLocalTween(dt);this.cover.x=this.logoShield.x;if(!_SETTINGS['DeveloperBranding']['Splash']['Enabled']){this.playBgm();ig.game.director.nextLevel();this.kill();return;}},playBgm:function(){ig.soundHandler.bgmPlayer.play(ig.soundHandler.bgmPlayer.soundList.background);},unlockWebAudio:function(){if(ig.input.released('click')){try{ig.soundHandler.unlockWebAudio();}catch(error){}}},addLocalDelayedCall:function(duration,onComplete){this.addLocalTweenTo(null,{},duration,this.easeNone,0,onComplete);},addLocalTweenTo:function(obj,to,duration,easing,delay,onComplete){if(typeof(delay)=="undefined")delay=0;if(typeof(easing)=="undefined")easing=this.easeNone;if(typeof(onComplete)=="undefined")onComplete=null;var tween={obj:obj,endProperties:to,duration:duration,easing:easing,delay:delay,elapsed:0,deltaProperties:{},startProperties:{},onComplete:onComplete};for(var key in to){if(Object.hasOwnProperty.call(to,key)){tween.startProperties[key]=obj[key];tween.deltaProperties[key]=to[key]-obj[key];}}
this.localTweens.push(tween);},updateLocalTween:function(dt){for(var i=0;i<this.localTweens.length;i++){var tween=this.localTweens[i];if(tween.delay>0){tween.delay-=dt;}else{tween.elapsed+=dt;for(var key in tween.deltaProperties){if(Object.hasOwnProperty.call(tween.deltaProperties,key)){var delta=tween.deltaProperties[key];var start=tween.startProperties[key];var easing=tween.easing;var value=tween.elapsed/tween.duration;if(value>1)value=1;value=easing(value);tween.obj[key]=start+delta*value;}}
if(tween.elapsed>=tween.duration){this.localTweens.splice(i,1);i--;if(tween.onComplete)tween.onComplete();}}}},quadOut:function(k){return-k*(k-2);},quartOut:function(k){return-(--k*k*k*k-1);},backOut:function(k){var s=1.70158;return(k=k-1)*k*((s+1)*k+s)+1;},easeNone:function(k){return k;},draw:function(){this.parent();if(ig.global.wm)return;var ctx=ig.system.context;ctx.fillStyle="#ffffff";ctx.fillRect(0,0,ig.system.width,ig.system.height);for(var i=0;i<this.objects.length;i++){var obj=this.objects[i];if(obj.alpha>1)obj.alpha=1;if(obj.scaleX!=0&&obj.scaleY!=0&&obj.alpha>0)this[obj.drawFunctionName](obj);}},drawLogoShield:function(obj){if(!this.logoCanvas){this.logoCanvas=ig.$new('canvas');this.logoCanvas.width=this.logoCacheSize;this.logoCanvas.height=this.logoCacheSize;var ctx=this.logoCanvas.getContext('2d');var w=this.logoCacheSize;var h=this.logoCacheSize;var x=0;var y=0;ctx.clearRect(0,0,this.logoCanvas.width,this.logoCanvas.height);ctx.save();ctx.fillStyle="#e35026";ctx.beginPath();ctx.moveTo(x+0.06*w,y);ctx.lineTo(x+0.94*w,y);ctx.lineTo(x+0.86*w,y+0.89*h);ctx.lineTo(x+0.5*w,y+h);ctx.lineTo(x+0.14*w,y+0.89*h);ctx.closePath();ctx.fill();ctx.fillStyle="#ee652b";ctx.beginPath();ctx.moveTo(x+0.5*w,y+0.07*h);ctx.lineTo(x+0.86*w,y+0.07*h);ctx.lineTo(x+0.79*w,y+0.84*h);ctx.lineTo(x+0.5*w,y+0.92*h);ctx.closePath();ctx.fill();ctx.restore();}
var w=obj.width*obj.scaleX;var h=obj.height*obj.scaleY;var x=ig.system.width/2+obj.x-w/2;var y=ig.system.height/2+obj.y-h/2;var ctx=ig.system.context;ctx.globalAlpha=obj.alpha;ctx.drawImage(this.logoCanvas,0,0,this.logoCacheSize,this.logoCacheSize,x,y,w,h);ctx.globalAlpha=1;},drawLetterM:function(obj){if(!this.mCanvas){this.mCanvas=ig.$new('canvas');this.mCanvas.width=this.logoCacheSize;this.mCanvas.height=this.logoCacheSize;var ctx=this.mCanvas.getContext('2d');var w=this.logoCacheSize;var h=this.logoCacheSize;var x=0;var y=0;ctx.save();ctx.fillStyle="#ffffff";ctx.beginPath();ctx.moveTo(x+0.25*w,y+0.2*h);ctx.lineTo(x+0.4*w,y+0.2*h);ctx.lineTo(x+0.5*w,y+0.37*h);ctx.lineTo(x+0.6*w,y+0.2*h);ctx.lineTo(x+0.75*w,y+0.2*h);ctx.lineTo(x+0.75*w,y+0.7*h);ctx.lineTo(x+0.6*w,y+0.7*h);ctx.lineTo(x+0.6*w,y+0.45*h);ctx.lineTo(x+0.5*w,y+0.63*h);ctx.lineTo(x+0.4*w,y+0.45*h);ctx.lineTo(x+0.4*w,y+0.7*h);ctx.lineTo(x+0.25*w,y+0.7*h);ctx.closePath();ctx.fill();ctx.restore();}
var ctx=ig.system.context;var w=obj.width*obj.scaleX;var h=obj.height*obj.scaleY;var x=ig.system.width/2+obj.x-w/2;var y=ig.system.height/2+obj.y-h/2;ctx.globalAlpha=obj.alpha;ctx.drawImage(this.mCanvas,0,0,this.logoCacheSize,this.logoCacheSize,x,y,w,h);ctx.globalAlpha=1;},drawText:function(obj){if(!ig.splashLogoFontLoaded)return;var ctx=ig.system.context;var h=obj.height*obj.scaleY;var x=ig.system.width/2+obj.x;var y=ig.system.height/2+obj.y;ctx.save();ctx.globalAlpha=obj.alpha;var mjsFontSize=(Math.round((115/152)*h));var solutionFontSize=(Math.round((62/152)*h));ctx.textAlign="left"
ctx.fillStyle="#316198";ctx.font=mjsFontSize+"px logofont";ctx.fillText("MarketJS",x-mjsFontSize*0.06,y+mjsFontSize*0.66);ctx.font=solutionFontSize+"px logofont";ctx.fillText("HTML5 gaming solutions",x-solutionFontSize*0.02,y+h-solutionFontSize*0.1);ctx.globalAlpha=1;ctx.restore();},drawCover:function(obj){var ctx=ig.system.context;var x=ig.system.width/2+obj.x;var y=ig.system.height/2+obj.y;ctx.save();ctx.globalAlpha=obj.alpha;ctx.fillStyle="#ffffff";ctx.fillRect(x-ig.system.width/2,y-this.logoCacheSize/2,ig.system.width/2,this.logoCacheSize);ctx.globalAlpha=1;ctx.restore();},});if(typeof(window.FontFaceObserver)=="undefined"){(function(){function l(a,b){document.addEventListener?a.addEventListener("scroll",b,!1):a.attachEvent("scroll",b)}function m(a){document.body?a():document.addEventListener?document.addEventListener("DOMContentLoaded",function c(){document.removeEventListener("DOMContentLoaded",c);a()}):document.attachEvent("onreadystatechange",function k(){if("interactive"==document.readyState||"complete"==document.readyState)document.detachEvent("onreadystatechange",k),a()})};function t(a){this.a=document.createElement("div");this.a.setAttribute("aria-hidden","true");this.a.appendChild(document.createTextNode(a));this.b=document.createElement("span");this.c=document.createElement("span");this.h=document.createElement("span");this.f=document.createElement("span");this.g=-1;this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;";this.b.appendChild(this.h);this.c.appendChild(this.f);this.a.appendChild(this.b);this.a.appendChild(this.c)}
function u(a,b){a.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+b+";"}function z(a){var b=a.a.offsetWidth,c=b+100;a.f.style.width=c+"px";a.c.scrollLeft=c;a.b.scrollLeft=a.b.scrollWidth+100;return a.g!==b?(a.g=b,!0):!1}function A(a,b){function c(){var a=k;z(a)&&a.a.parentNode&&b(a.g)}var k=a;l(a.b,c);l(a.c,c);z(a)};function B(a,b){var c=b||{};this.family=a;this.style=c.style||"normal";this.weight=c.weight||"normal";this.stretch=c.stretch||"normal"}var C=null,D=null,E=null,F=null;function G(){if(null===D)if(J()&&/Apple/.test(window.navigator.vendor)){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);D=!!a&&603>parseInt(a[1],10)}else D=!1;return D}function J(){null===F&&(F=!!document.fonts);return F}
function K(){if(null===E){var a=document.createElement("div");try{a.style.font="condensed 100px sans-serif"}catch(b){}E=""!==a.style.font}return E}function L(a,b){return[a.style,a.weight,K()?a.stretch:"","100px",b].join(" ")}
B.prototype.load=function(a,b){var c=this,k=a||"BESbswy",r=0,n=b||3E3,H=(new Date).getTime();return new Promise(function(a,b){if(J()&&!G()){var M=new Promise(function(a,b){function e(){(new Date).getTime()-H>=n?b(Error(""+n+"ms timeout exceeded")):document.fonts.load(L(c,'"'+c.family+'"'),k).then(function(c){1<=c.length?a():setTimeout(e,25)},b)}e()}),N=new Promise(function(a,c){r=setTimeout(function(){c(Error(""+n+"ms timeout exceeded"))},n)});Promise.race([N,M]).then(function(){clearTimeout(r);a(c)},b)}else m(function(){function v(){var b;if(b=-1!=f&&-1!=g||-1!=f&&-1!=h||-1!=g&&-1!=h)(b=f!=g&&f!=h&&g!=h)||(null===C&&(b=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),C=!!b&&(536>parseInt(b[1],10)||536===parseInt(b[1],10)&&11>=parseInt(b[2],10))),b=C&&(f==w&&g==w&&h==w||f==x&&g==x&&h==x||f==y&&g==y&&h==y)),b=!b;b&&(d.parentNode&&d.parentNode.removeChild(d),clearTimeout(r),a(c))}function I(){if((new Date).getTime()-H>=n)d.parentNode&&d.parentNode.removeChild(d),b(Error(""+
n+"ms timeout exceeded"));else{var a=document.hidden;if(!0===a||void 0===a)f=e.a.offsetWidth,g=p.a.offsetWidth,h=q.a.offsetWidth,v();r=setTimeout(I,50)}}var e=new t(k),p=new t(k),q=new t(k),f=-1,g=-1,h=-1,w=-1,x=-1,y=-1,d=document.createElement("div");d.dir="ltr";u(e,L(c,"sans-serif"));u(p,L(c,"serif"));u(q,L(c,"monospace"));d.appendChild(e.a);d.appendChild(p.a);d.appendChild(q.a);document.body.appendChild(d);w=e.a.offsetWidth;x=p.a.offsetWidth;y=q.a.offsetWidth;I();A(e,function(a){f=a;v()});u(e,L(c,'"'+c.family+'",sans-serif'));A(p,function(a){g=a;v()});u(p,L(c,'"'+c.family+'",serif'));A(q,function(a){h=a;v()});u(q,L(c,'"'+c.family+'",monospace'))})})};"object"===typeof module?module.exports=B:(window.FontFaceObserver=B,window.FontFaceObserver.prototype.load=B.prototype.load);}());console.log("font loader not exist : create new instance of font loader");}
var newStyle=document.createElement('style');newStyle.type="text/css";var fontname='logofont'
var fontsource='media/fonts/logofont'
var textNode="@font-face {font-family: '"+fontname+"';src: url('"+fontsource+".woff2') format('woff2'),url('"+fontsource+".woff') format('woff'),url('"+fontsource+".ttf') format('truetype')}";newStyle.appendChild(document.createTextNode(textNode));document.head.appendChild(newStyle);ig.splashLogoFontLoaded=false;(new FontFaceObserver("logofont")).load().then(function(){ig.splashLogoFontLoaded=true;}).catch(function(){console.log("Splash font failed to load :",fontsource);});});

// lib/game/levels/opening.js
ig.baked=true;ig.module('game.levels.opening').requires('impact.image','game.entities.opening-marketjs-logo').defines(function(){LevelOpening={"entities":[{"type":"EntityOpeningMarketJSLogo","x":520,"y":212}],"layer":[]};});

// lib/game/entities/buttons/button-play.js
ig.baked=true;ig.module('game.entities.buttons.button-play').requires('game.entities.buttons.button').defines(function(){EntityButtonPlay=EntityButton.extend({animSheet:new ig.AnimationSheet('media/graphics/sprites/games/play.png',268,267),onClickCallback:null,size:{x:268,y:267,},initPosY:null,init:function(x,y,settings){this.parent(x,y,settings);this.addAnim('idle',1,[0]);if(settings.onClicked!=null)
this.onClickCallback=settings.onClicked;if(ig.global.wm)
{return;}},clicked:function()
{if(this.isEnabled){if(this.initPosY==null)
this.initPosY=this.anchoredPositionY;this.tween({anchoredPositionY:this.initPosY+5},0.2,{}).start();ig.soundHandler.sfxPlayer.play("click");}},clicking:function()
{},leave:function()
{if(this.anchoredPositionY!=this.initPosY)
this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();},released:function()
{if(this.isEnabled)
{this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();if(this.onClickCallback!=null)
this.onClickCallback();}}});});

// lib/game/entities/buttons/button-setting.js
ig.baked=true;ig.module('game.entities.buttons.button-setting').requires('game.entities.buttons.button').defines(function(){EntityButtonSetting=EntityButton.extend({animSheet:new ig.AnimationSheet('media/graphics/sprites/games/settings.png',163,162),isEnabled:true,onClickCallback:null,size:{x:163,y:162,},initPosX:null,initPosY:null,init:function(x,y,settings){this.parent(x,y,settings);this.addAnim('idle',1,[0]);if(settings.onClicked!=null)
this.onClickCallback=settings.onClicked;if(ig.global.wm)
{return;}},update:function()
{if(this.controller!=null)
{if(this.initPosX==null)
this.initPosX=this.anchoredPositionX;this.anchoredPositionX=this.initPosX+this.controller.xPos;}
this.parent();},clicked:function()
{if(this.isEnabled){if(this.initPosY==null)
this.initPosY=this.anchoredPositionY;this.tween({anchoredPositionY:this.initPosY+5},0.2,{}).start();ig.soundHandler.sfxPlayer.play("click");}},clicking:function()
{},leave:function()
{if(this.anchoredPositionY!=this.initPosY)
this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();},released:function()
{if(this.isEnabled)
{this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();if(this.onClickCallback!=null)
this.onClickCallback();}}});});

// lib/game/entities/controllers/title-controller.js
ig.baked=true;ig.module('game.entities.controllers.title-controller').requires('impact.entity','game.entities.buttons.button-play','game.entities.buttons.button-more-games','game.entities.buttons.button-setting').defines(function(){EntityTitleController=ig.Entity.extend({size:{x:1080,y:1080},bgImage:new ig.Image('media/graphics/sprites/games/BG.png'),titleImage:new ig.Image('media/graphics/sprites/games/title.png'),zIndex:0,init:function(x,y,settings){this.parent(x,y,settings);this.setAnchoredPosition(0,0,"center-middle");this.fullscreenBtn=ig.game.spawnEntity(ig.FullscreenButton,15,15,{enterImage:new ig.Image("media/graphics/sprites/games/zoom_in.png"),exitImage:new ig.Image("media/graphics/sprites/games/zoom_out.png")});this.fullscreenBtn.setAnchoredPosition(15,15,"top-left");this.playBtn=ig.game.spawnEntity(EntityButtonPlay,0,0,{onClicked:function(){this.onClickPlay()}.bind(this)});this.playBtn.setAnchoredPosition(-this.playBtn.size.x/2,-this.playBtn.size.y/2+250,"center-middle");if(_SETTINGS.MoreGames.Enabled)
{this.settingBtn=ig.game.spawnEntity(EntityButtonSetting,0,0,{onClicked:function(){this.onClickSetting()}.bind(this)});this.settingBtn.setAnchoredPosition(-this.settingBtn.size.x+this.playBtn.size.x+20,-this.settingBtn.size.y/2+350,"center-middle");this.moreGameBtn=ig.game.spawnEntity(EntityButtonMoreGames,100,200,{zIndex:this.zIndex+1});this.moreGameBtn.setAnchoredPosition(-this.playBtn.size.x-20,-this.moreGameBtn.size.y/2+350,"center-middle");this.moreGameBtn.zIndex=this.zIndex+1;}
else
{this.settingBtn=ig.game.spawnEntity(EntityButtonSetting,0,0,{onClicked:function(){this.onClickSetting()}.bind(this)});this.settingBtn.setAnchoredPosition(-this.settingBtn.size.x-15,15,"top-right");}
this.playBtn.zIndex=this.zIndex+1;this.settingBtn.zIndex=this.zIndex+1;this.fullscreenBtn.zIndex=this.zIndex+1;this.enabledButtons(true);},draw:function()
{this.parent();var center=ig.responsive.toAnchor(0,0,"center-middle");this.scaleX=(ig.system.width/this.size.x);this.scaleY=(ig.system.height/this.size.y);var scale=(this.scaleX>this.scaleY)?this.scaleX:this.scaleY;ig.responsive.drawScaledImage(this.bgImage,center.x,center.y,scale,scale,0.5,0.5);this.titleImage.draw(center.x-this.titleImage.width/2.0,center.y-this.titleImage.height/2-190);},onClickPlay:function()
{ig.game.loadLevelDeferred(ig.global['LevelPage']);this.enabledButtons(false);if(_SETTINGS.MoreGames.Enabled)this.moreGameBtn.hide();},enabledButtons:function(enabled)
{console.log("Enable buttons : "+enabled);this.playBtn.isEnabled=enabled;this.settingBtn.isEnabled=enabled;},onClickSetting:function(){this.playBtn.isEnabled=false;this.settingBtn.isEnabled=false;if(_SETTINGS.MoreGames.Enabled)this.moreGameBtn.hide();this.settingPanel=ig.game.spawnEntity(EntitySettingController,0,0,{controller:this,onClosed:function(){this.hideSettings()}.bind(this)});this.settingPanel.setAnchoredPosition(0,0,"center-middle");},});});

// lib/game/levels/title.js
ig.baked=true;ig.module('game.levels.title').requires('impact.image','game.entities.controllers.title-controller','game.entities.pointer').defines(function(){LevelTitle={"entities":[{"type":"EntityTitleController","x":0,"y":0},{"type":"EntityPointer","x":0,"y":0}],"layer":[]};});

// lib/game/entities/buttons/button-level.js
ig.baked=true;ig.module('game.entities.buttons.button-level').requires('game.entities.buttons.button').defines(function(){EntityButtonLevel=EntityButton.extend({animSheet:[new ig.AnimationSheet('media/graphics/sprites/games/tile.png',207,208),new ig.AnimationSheet('media/graphics/sprites/games/tile_locked.png',207,208),],onClickCallback:null,level_indicator:1,size:{x:207,y:208,},initPosY:null,locked:false,tile_type:0,init:function(x,y,settings){this.parent(x,y,settings);this.idle=new ig.Animation(this.animSheet[this.tile_type],1,[0]);this.currentAnim=this.idle;this.setAnchoredPosition(x,y,"center-middle");if(settings.onClicked!=null)
this.onClickCallback=settings.onClicked;if(ig.global.wm)
{return;}},clicked:function()
{if(this.isEnabled){if(this.initPosY==null)
this.initPosY=this.anchoredPositionY;this.tween({anchoredPositionY:this.initPosY+5},0.2,{}).start();ig.soundHandler.sfxPlayer.play("click");}},clicking:function()
{},leave:function()
{if(this.anchoredPositionY!=this.initPosY)
this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();},released:function()
{if(this.isEnabled)
{this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();ig.game.sessionData.level=this.level_indicator;ig.game.loadLevelDeferred(ig.global['LevelGameplay']);if(this.onClickCallback!=null)
this.onClickCallback();}},draw:function(){this.parent()
var ctx=ig.system.context;ctx.font='normal 80px montserrat';ctx.fillStyle="#ee4791";ctx.textAlign='center';ctx.textBaseline='middle';if(this.locked==false)ctx.fillText(this.level_indicator,this.pos.x+this.size.x/2-2,this.pos.y+this.size.y/2-2);},updateOnSwitch:function(){if(this.locked==true){this.tile_type=1;this.idle=new ig.Animation(this.animSheet[this.tile_type],1,[0]);this.currentAnim=this.idle;this.isEnabled=false;this.currentAnim.alpha=0.5;}else{this.tile_type=0;this.idle=new ig.Animation(this.animSheet[this.tile_type],1,[0]);this.currentAnim=this.idle;this.isEnabled=true;this.currentAnim.alpha=1;}}});});

// lib/game/entities/buttons/button-switch-level-page-left.js
ig.baked=true;ig.module('game.entities.buttons.button-switch-level-page-left').requires('game.entities.buttons.button').defines(function(){EntityButtonSwitchLevelPageLeft=EntityButton.extend({animSheet:new ig.AnimationSheet('media/graphics/sprites/games/left_button.png',122,122),isEnabled:true,onClickCallback:null,size:{x:122,y:122},initPosX:null,initPosY:null,init:function(x,y,settings){this.parent(x,y,settings);this.addAnim('idle',1,[0]);if(settings.onClicked!=null)
this.onClickCallback=settings.onClicked;if(ig.global.wm)
{return;}},update:function()
{if(this.controller!=null)
{if(this.initPosX==null)
this.initPosX=this.anchoredPositionX;this.anchoredPositionX=this.initPosX+this.controller.xPos;}
this.parent();},clicked:function()
{if(this.isEnabled){if(this.initPosY==null)
this.initPosY=this.anchoredPositionY;this.tween({anchoredPositionY:this.initPosY+5},0.2,{}).start();ig.soundHandler.sfxPlayer.play("click");}},clicking:function()
{},leave:function()
{if(this.anchoredPositionY!=this.initPosY)
this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();},released:function()
{if(this.isEnabled)
{this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();if(this.onClickCallback!=null)
this.onClickCallback();}}});});

// lib/game/entities/buttons/button-switch-level-page-right.js
ig.baked=true;ig.module('game.entities.buttons.button-switch-level-page-right').requires('game.entities.buttons.button').defines(function(){EntityButtonSwitchLevelPageRight=EntityButton.extend({animSheet:new ig.AnimationSheet('media/graphics/sprites/games/right_button.png',122,122),isEnabled:true,onClickCallback:null,size:{x:122,y:122},initPosX:null,initPosY:null,init:function(x,y,settings){this.parent(x,y,settings);this.addAnim('idle',1,[0]);if(settings.onClicked!=null)
this.onClickCallback=settings.onClicked;if(ig.global.wm)
{return;}},update:function()
{if(this.controller!=null)
{if(this.initPosX==null)
this.initPosX=this.anchoredPositionX;this.anchoredPositionX=this.initPosX+this.controller.xPos;}
this.parent();},clicked:function()
{if(this.isEnabled){if(this.initPosY==null)
this.initPosY=this.anchoredPositionY;this.tween({anchoredPositionY:this.initPosY+5},0.2,{}).start();ig.soundHandler.sfxPlayer.play("click");}},clicking:function()
{},leave:function()
{if(this.anchoredPositionY!=this.initPosY)
this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();},released:function()
{if(this.isEnabled)
{this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();if(this.onClickCallback!=null)
this.onClickCallback();}}});});

// lib/game/entities/miscellaneous/page-select.js
ig.baked=true;ig.module("game.entities.miscellaneous.page-select").requires("impact.entity").defines(function(){EntityPageSelect=ig.Entity.extend({size:{x:48.5,y:49},animSheet:[new ig.AnimationSheet('media/graphics/sprites/games/active-page.png',49,49),new ig.AnimationSheet('media/graphics/sprites/games/passive-page.png',48,48)],activity:0,init:function(x,y,settings){this.parent(x,y,settings);this.idle=new ig.Animation(this.animSheet[this.activity],1,[0]);this.currentAnim=this.idle;console.log(this.pos.x+"  "+this.pos.y)},switch_picture:function(){if(this.activity==0){this.activity=1;this.idle=new ig.Animation(this.animSheet[this.activity],1,[0]);this.currentAnim=this.idle;}else if(this.activity==1){this.activity=0;this.idle=new ig.Animation(this.animSheet[this.activity],1,[0]);this.currentAnim=this.idle;}},draw:function(){this.parent();}});});

// lib/game/entities/controllers/level-controller.js
ig.baked=true;ig.module('game.entities.controllers.level-controller').requires('impact.entity','game.entities.buttons.button-level','game.entities.buttons.button-switch-level-page-left','game.entities.buttons.button-switch-level-page-right',"game.entities.miscellaneous.page-select").defines(function(){EntityLevelController=ig.Entity.extend({bgImage:new ig.Image('media/graphics/sprites/games/BG.png'),levelselectImage:new ig.Image('media/graphics/sprites/games/level_select.png'),size:{x:1080,y:1080},anchorPivot:{x:0.5,y:0.5},init:function(x,y,settings){this.parent(x,y,settings);this.switch_level=false;this.setAnchoredPosition(0,0,"center-middle");this.spawnLevelButtons();this.homeBtn=ig.game.spawnEntity(EntityButtonHome,0,0,{zIndex:this.zIndex+1,onClicked:function(){this.onClickHome()}.bind(this)});this.homeBtn.setAnchoredPosition(-this.homeBtn.size.x-50,55,"top-right");this.switchlevelpageright=ig.game.spawnEntity(EntityButtonSwitchLevelPageRight,0,0,{zIndex:this.zIndex+1,onClicked:function(){this.onClickSwitchPage()}.bind(this)});this.switchlevelpageright.setAnchoredPosition(this.switchlevelpageright.size.x,-this.switchlevelpageright.size.y-20,"bottom-center");this.switchlevelpageleft=ig.game.spawnEntity(EntityButtonSwitchLevelPageLeft,0,0,{zIndex:this.zIndex+1,onClicked:function(){this.onClickSwitchPage()}.bind(this)});this.switchlevelpageleft.setAnchoredPosition(-this.switchlevelpageleft.size.x*2,-this.switchlevelpageleft.size.y-20,"bottom-center");this.pageselect1=ig.game.spawnEntity(EntityPageSelect,0,0,{zIndex:this.zIndex+1});this.pageselect1.setAnchoredPosition(-this.pageselect1.size.x-20,-this.pageselect1.size.y-55,"bottom-center");this.pageselect2=ig.game.spawnEntity(EntityPageSelect,0,0,{zIndex:this.zIndex+1,activity:1});this.pageselect2.setAnchoredPosition(20,-this.pageselect2.size.y-55,"bottom-center");},spawnLevelButtons:function(){var level_loop_counter=1;var level_locked=false;var column=4;var row=3;var boxSize=208;var margin=6;var startX=-((boxSize*column)+(margin*(column-1)))/2+2;var startY=boxSize*0.5-boxSize*row*0.5-margin*Math.floor(row*0.5)-101;margin=boxSize+margin;for(var i=0;i<row;i++){for(var x=0;x<column;x++){if(level_loop_counter>ig.game.sessionData.achieved)level_locked=true;if(i<2){var box=ig.game.spawnEntity(EntityButtonLevel,startX+margin*x,startY+margin*i,{portraitScaling:true,maxPortraitAnchorScale:1,maxPortraitScale:1,level_indicator:level_loop_counter,isEnabled:true,locked:level_locked});box.updateOnSwitch();}
else{if(x>=2){x=column
break;}
var box=ig.game.spawnEntity(EntityButtonLevel,startX+margin*(x+1),startY+margin*i,{portraitScaling:true,maxPortraitAnchorScale:1,maxPortraitScale:1,level_indicator:level_loop_counter,isEnabled:true,locked:level_locked});box.updateOnSwitch();}
level_loop_counter++}}},draw:function(){this.parent()
var center=ig.responsive.toAnchor(0,0,"center-middle");this.scaleX=(ig.system.width/this.size.x);this.scaleY=(ig.system.height/this.size.y);var scale=(this.scaleX>this.scaleY)?this.scaleX:this.scaleY;ig.responsive.drawScaledImage(this.bgImage,center.x,center.y,scale,scale,0.5,0.5);var top_middle=ig.responsive.toAnchor(0,0,"center-top");this.levelselectImage.draw(top_middle.x-this.levelselectImage.width/2,top_middle.y+this.levelselectImage.height/4);},onClickHome:function(){this.kill();ig.game.loadLevelDeferred(ig.global['LevelTitle']);},onClickSwitchPage:function(){this.switch=!this.switch
for(var i=0;i<ig.game.getEntitiesByType(EntityPageSelect).length;i++){ig.game.getEntitiesByType(EntityPageSelect)[i].switch_picture();}
if(this.switch){level_loop_counter=11;}else{level_loop_counter=1;}
var level_locked=false;for(var x=0;x<10;x++){var box=ig.game.getEntitiesByType(EntityButtonLevel)
if(level_loop_counter>ig.game.sessionData.achieved)level_locked=true;box[x].level_indicator=level_loop_counter;box[x].locked=level_locked;box[x].updateOnSwitch();level_loop_counter++}}});});

// lib/game/levels/levelpage.js
ig.baked=true;ig.module('game.levels.levelpage').requires('impact.image','game.entities.controllers.level-controller','game.entities.pointer').defines(function(){LevelPage={"entities":[{"type":"EntityLevelController","x":0,"y":0},{"type":"EntityPointer","x":0,"y":0}],"layer":[]};});

// lib/game/entities/gameplay/color-slot.js
ig.baked=true;ig.module('game.entities.gameplay.color-slot').requires('impact.entity').defines(function(){EntityColorSlot=ig.Entity.extend({size:{x:89,y:89},isEnabled:null,onClickCallback:null,anchorPivot:{x:0,y:0},animSheet:[new ig.AnimationSheet('media/graphics/sprites/games/ball-red.png',89,88),new ig.AnimationSheet('media/graphics/sprites/games/ball-green.png',89,88),new ig.AnimationSheet('media/graphics/sprites/games/ball-blue.png',89,89),new ig.AnimationSheet('media/graphics/sprites/games/ball-orange.png',89,88),new ig.AnimationSheet('media/graphics/sprites/games/ball-yellow.png',89,89),new ig.AnimationSheet('media/graphics/sprites/games/ball-purple.png',89,89),],offset:{x:0,y:0},color_assigned:0,type:ig.Entity.TYPE.A,checkAgainst:ig.Entity.TYPE.A,zIndex:10,measuredoff:0,init:function(x,y,settings){this.tutorialDone=ig.game.sessionData.tutorialDone;this.isEnabled=true;this.parent(x,y,settings);this.setAnchoredPosition(x-this.size.x/2,y-this.size.x/2,"center-middle");this.idle=new ig.Animation(this.animSheet[this.color_assigned],1,[0]);this.currentAnim=this.idle;},update:function(){this.parent();this.offset.x=this.measuredoff;this.offset.y=this.measuredoff;},draw:function(){var anchor=ig.responsive.toAnchor(0,0,"center-middle");this.parent();var ctx=ig.system.context;ctx.save();ctx.restore();},clicked:function(){if(this.isEnabled==true){this.tween({measuredoff:-89*0.1,_scale:{x:0.8,y:0.8}},0.1,{manager:this,easing:ig.Tween.Easing.Sinusoidal.EaseOut,}).start();}},leave:function(){this.tween({_scale:{x:1,y:1},measuredoff:0},0.1,{manager:this,easing:ig.Tween.Easing.Sinusoidal.EaseOut,}).start();},released:function(){if(this.isEnabled==true){this.tween({_scale:{x:1,y:1},measuredoff:0},0.1,{manager:this,easing:ig.Tween.Easing.Sinusoidal.EaseOut,}).start();for(var x=0;x<ig.game.colorSlot.length;x++){if(ig.game.colorSlot[x]=='x'|ig.game.colorSlot[x]=='y'){ig.game.colorSlot[x]=this.color_assigned;break;}}
if(!this.tutorialDone&&this.controller.level<3&&!this.controller.uiController.tutorial_trigger){this.controller.tutorialCursorChangePos();}
ig.soundHandler.sfxPlayer.play("pop");}}});});

// lib/game/entities/gameplay/answer-slot.js
ig.baked=true;ig.module('game.entities.gameplay.answer-slot').requires('impact.entity').defines(function(){EntityAnswerSlot=ig.Entity.extend({centeredScale:true,size:{x:89,y:89},anchorPivot:{x:0,y:0},animSheet_empty:new ig.AnimationSheet('media/graphics/sprites/games/ball-red.png',89,88),animSheet_filled:[new ig.AnimationSheet('media/graphics/sprites/games/ball-red.png',89,88),new ig.AnimationSheet('media/graphics/sprites/games/ball-green.png',89,88),new ig.AnimationSheet('media/graphics/sprites/games/ball-blue.png',89,89),new ig.AnimationSheet('media/graphics/sprites/games/ball-orange.png',89,88),new ig.AnimationSheet('media/graphics/sprites/games/ball-yellow.png',89,89),new ig.AnimationSheet('media/graphics/sprites/games/ball-purple.png',89,89),],color_assigned:[],type:ig.Entity.TYPE.A,checkAgainst:ig.Entity.TYPE.A,scale:{x:0,y:0},offset:{x:0,y:0},zIndex:10,measuredoff:0,init:function(x,y,settings){this.parent(x,y,settings);this.animation_played=false;this.setAnchoredPosition(x-this.size.x/2,y-this.size.x/2,"center-middle");this.empty=new ig.Animation(this.animSheet_empty,1,[0]);this.filled=new ig.Animation(this.animSheet_filled[0],1,[0]);this.currentAnim=this.empty;},update:function(){this.parent();this.offset.x=this.measuredoff;this.offset.y=this.measuredoff;},draw:function(){var anchor=ig.responsive.toAnchor(0,0,"center-middle");this.parent();var ctx=ig.system.context;ctx.save();ctx.restore();},updateSlot:function(x){if(x!=undefined|null|'x'){this.filled=new ig.Animation(this.animSheet_filled[x],1,[0]);this.currentAnim=this.filled;if(this.animation_played==false){this.animation_played=true;this.tween({_scale:{x:1,y:1},measuredoff:89/2},0.05,{manager:this,easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){}.bind(this)}).start();}}},resetBall:function(){this.tween({_scale:{x:0,y:0},measuredoff:0},0.05,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){this.animation_played=false;this.empty=new ig.Animation(this.animSheet_empty,1,[0]);this.currentAnim=this.empty;}.bind(this)}).start();}});});

// lib/game/entities/gameplay/answer-evaluator.js
ig.baked=true;ig.module('game.entities.gameplay.answer-evaluator').requires('impact.entity').defines(function(){EntityAnswerEvaluator=ig.Entity.extend({size:{x:185,y:145},isEnabled:null,onClickCallback:null,anchorPivot:{x:0,y:0},animSheet:[new ig.AnimationSheet('media/graphics/sprites/games/wrong.png',185,145),new ig.AnimationSheet('media/graphics/sprites/games/right.png',186,145),new ig.AnimationSheet('media/graphics/sprites/games/wrong_place.png',185,145),],answer_assigned:0,type:ig.Entity.TYPE.A,checkAgainst:ig.Entity.TYPE.A,zIndex:4,scale:{x:1,y:1},alpha_measure:0,init:function(x,y,settings){this.isEnabled=true;this.parent(x,y,settings);this.setAnchoredPosition(x-this.size.x/2,y-this.size.y/2,"center-middle");this.idle=new ig.Animation(this.animSheet[this.answer_assigned],1,[0]);this.currentAnim=this.idle;this.timer=new ig.Timer(this.counter);this.shown=false;},update:function(){this.parent();this.currentAnim.alpha=this.alpha_measure;if(this.timer.delta()>0&&this.shown==false){this.showNow();this.shown=true;}},showNow:function(){this.tween({alpha_measure:1},0.2,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){}}).start();},draw:function(){var anchor=ig.responsive.toAnchor(0,0,"center-middle");this.parent();var ctx=ig.system.context;ctx.save();ctx.restore();},resetEvaluator:function(){this.tween({alpha_measure:0},0.3,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){this.currentAnim.alpha=0;}.bind(this)}).start();}});});

// lib/game/entities/controllers/popup-controller.js
ig.baked=true;ig.module('game.entities.controllers.popup-controller').requires('impact.entity').defines(function(){EntityPopupController=ig.Entity.extend({childArr:[],spawnEntity:function(entityClass,x,y,settings){var child=ig.game.spawnEntity(entityClass,this.pos.x+x,this.pos.y+y,settings);child.childX=x;child.childY=y;this.childArr.push(child);return child;},kill:function(){console.log("Child in popup "+this.childArr.length);for(var i=this.childArr.length-1;i>=0;i--){var child=this.childArr.pop();child.kill();}
this.childArr=null;this.parent();}});});

// lib/game/entities/buttons/button-home.js
ig.baked=true;ig.module('game.entities.buttons.button-home').requires('game.entities.buttons.button').defines(function(){EntityButtonHome=EntityButton.extend({animSheet:new ig.AnimationSheet('media/graphics/sprites/games/home.png',108,109),isEnabled:true,onClickCallback:null,initPosX:null,size:{x:108,y:109,},initPosY:null,init:function(x,y,settings){this.parent(x,y,settings);this.popup_child=settings.popup_child;if(this.popup_child){this.animSheet=new ig.AnimationSheet('media/graphics/sprites/games/home-popup.png',122,122);this.size.x=122;this.size.y=122;}
this.addAnim('idle',1,[0]);if(settings.onClicked!=null)
this.onClickCallback=settings.onClicked;if(ig.global.wm)
{return;}},update:function()
{if(this.controller!=null)
{if(this.initPosX==null)
this.initPosX=this.anchoredPositionX;this.anchoredPositionX=this.initPosX+this.controller.xPos;}
this.parent();},clicked:function()
{console.log("Clicked home button");if(this.isEnabled){if(this.initPosY==null)
this.initPosY=this.anchoredPositionY;this.tween({anchoredPositionY:this.initPosY+5},0.2,{}).start();ig.soundHandler.sfxPlayer.play("click");}},clicking:function()
{},leave:function()
{if(this.anchoredPositionY!=this.initPosY)
this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();},released:function()
{if(this.isEnabled)
{this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();if(this.onClickCallback!=null)
this.onClickCallback();}}});});

// lib/game/entities/buttons/button-resume.js
ig.baked=true;ig.module('game.entities.buttons.button-resume').requires('game.entities.buttons.button').defines(function(){EntityButtonResume=EntityButton.extend({animSheet:new ig.AnimationSheet('media/graphics/sprites/games/resume.png',122,122),isEnabled:true,onClickCallback:null,size:{x:122,y:122,},initPosX:null,initPosY:null,init:function(x,y,settings){this.parent(x,y,settings);this.addAnim('idle',1,[0]);if(settings.onClicked!=null)
this.onClickCallback=settings.onClicked;if(ig.global.wm)
{return;}},update:function()
{if(this.controller!=null)
{if(this.initPosX==null)
this.initPosX=this.anchoredPositionX;this.anchoredPositionX=this.initPosX+this.controller.xPos;}
this.parent();},clicked:function()
{if(this.isEnabled){if(this.initPosY==null)
this.initPosY=this.anchoredPositionY;this.tween({anchoredPositionY:this.initPosY+5},0.2,{}).start();ig.soundHandler.sfxPlayer.play("click");}},clicking:function()
{},leave:function()
{if(this.anchoredPositionY!=this.initPosY)
this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();},released:function()
{if(this.isEnabled)
{this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();if(this.onClickCallback!=null)
this.onClickCallback();}}});});

// lib/game/entities/buttons/button-toggle.js
ig.baked=true;ig.module('game.entities.buttons.button-toggle').requires('game.entities.buttons.button').defines(function(){EntityButtonToggle=EntityButton.extend({onImage:new ig.Image('media/graphics/sprites/games/on.png'),offImage:new ig.Image('media/graphics/sprites/games/off.png'),isEnabled:true,onClickCallback:null,state:null,size:{x:326,y:123,},initPosX:null,initPosY:null,init:function(x,y,settings){this.parent(x,y,settings);if(settings.stete!=null)
this.state=settings.state;if(settings.onClicked!=null)
this.onClickCallback=settings.onClicked;if(ig.global.wm)
{return;}},update:function()
{if(this.controller!=null)
{if(this.initPosX==null)
this.initPosX=this.anchoredPositionX;this.anchoredPositionX=this.initPosX+this.controller.xPos;}
this.parent();},changeState:function(state)
{this.state=state;console.log("Change state button : "+this.state);},leave:function()
{if(this.anchoredPositionY!=this.initPosY)
this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();},clicked:function()
{if(this.isEnabled){if(this.initPosY==null)
this.initPosY=this.anchoredPositionY;this.tween({anchoredPositionY:this.initPosY+5},0.2,{}).start();}},clicking:function()
{},released:function()
{if(this.isEnabled)
{this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();this.changeState(!this.state);if(this.onClickCallback!=null)
this.onClickCallback(this.state);}},draw:function(){if(this.state)
{this.onImage.draw(this.pos.x,this.pos.y);}
else
{this.offImage.draw(this.pos.x,this.pos.y);}}});});

// lib/game/entities/buttons/button-retry.js
ig.baked=true;ig.module('game.entities.buttons.button-retry').requires('game.entities.buttons.button').defines(function(){EntityButtonRetry=EntityButton.extend({animSheet:new ig.AnimationSheet('media/graphics/sprites/games/retry.png',122,122),isEnabled:true,onClickCallback:null,size:{x:122,y:122,},initPosX:null,initPosY:null,init:function(x,y,settings){this.parent(x,y,settings);this.addAnim('idle',1,[0]);if(settings.onClicked!=null)
this.onClickCallback=settings.onClicked;if(ig.global.wm)
{return;}},update:function()
{if(this.controller!=null)
{if(this.initPosX==null)
this.initPosX=this.anchoredPositionX;this.anchoredPositionX=this.initPosX+this.controller.xPos;}
this.parent();},clicked:function()
{if(this.isEnabled){if(this.initPosY==null)
this.initPosY=this.anchoredPositionY;this.tween({anchoredPositionY:this.initPosY+5},0.2,{}).start();ig.soundHandler.sfxPlayer.play("click");}},clicking:function()
{},leave:function()
{if(this.anchoredPositionY!=this.initPosY)
this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();},released:function()
{if(this.isEnabled)
{this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();if(this.onClickCallback!=null)
this.onClickCallback();}}});});

// lib/game/entities/controllers/setting-controller.js
ig.baked=true;ig.module('game.entities.controllers.setting-controller').requires('impact.entity','game.entities.controllers.popup-controller','game.entities.buttons.button-home','game.entities.buttons.button-resume','game.entities.buttons.button-toggle','game.entities.buttons.button-retry').defines(function(){EntitySettingController=EntityPopupController.extend({panelImage:new ig.Image('media/graphics/sprites/games/popup.png'),musicIconImg:new ig.Image('media/graphics/sprites/games/music.png'),soundIconImg:new ig.Image('media/graphics/sprites/games/volume.png'),controller:null,onCloseCallback:null,zIndex:50,xPos:0,init:function(x,y,settings){this.xPos=-ig.responsive.width;this.parent(x,y,settings);if(settings.controller!=null)
this.controller=settings.controller;if(settings.onClosed!=null)
this.onCloseCallback=settings.onClosed;var bgmVolume=ig.game.getMusicVolume();var sfxVolume=ig.game.getSoundVolume();console.log("Get bgm : "+bgmVolume+", sfx : "+sfxVolume);this.musicToggle=this.spawnEntity(EntityButtonToggle,0,0,{state:bgmVolume,onClicked:function(state){this.changeBGMVolume(state)}.bind(this),controller:this});this.soundToggle=this.spawnEntity(EntityButtonToggle,0,0,{state:sfxVolume,onClicked:function(state){this.changeSFXVolume(state)}.bind(this),controller:this});this.musicToggle.setAnchoredPosition(-this.musicToggle.size.x/2+80,this.anchoredPositionY-155,"center-middle");this.soundToggle.setAnchoredPosition(-this.soundToggle.size.x/2+80,this.anchoredPositionY+25,"center-middle");if(this.controller==ig.game.getEntitiesByType(EntityTitleController)[0])
{this.homeBtn=this.spawnEntity(EntityButtonHome,0,this.anchoredPositionY+200,{onClicked:function(){this.onClickedhome()}.bind(this),controller:this,anchor:"center-middle",xPos:this.xPos,popup_child:true});this.homeBtn.setAnchoredPosition(-this.homeBtn.size.x/2,this.anchoredPositionY+200,"center-middle");}
else
{this.homeBtn=this.spawnEntity(EntityButtonHome,0,-100,{onClicked:function(){this.onClickedhome()}.bind(this),controller:this,anchor:"center-middle",xPos:this.xPos,popup_child:true});this.homeBtn.setAnchoredPosition(-this.homeBtn.size.x/2-this.homeBtn.size.x-20,this.anchoredPositionY+200,"center-middle");this.resumeBtn=this.spawnEntity(EntityButtonResume,0,-100,{onClicked:function(){this.onCickedResume()}.bind(this),controller:this});this.resumeBtn.setAnchoredPosition(-this.resumeBtn.size.x/2,this.anchoredPositionY+200,"center-middle");this.retryLevelBtn=this.spawnEntity(EntityButtonRetry,0,-100,{zIndex:this.zIndex+1,onClicked:function(){this.onClickedRetry()}.bind(this),controller:this})
this.retryLevelBtn.setAnchoredPosition(-this.retryLevelBtn.size.x/2+this.retryLevelBtn.size.x+20,this.anchoredPositionY+200,"center-middle");}
ig.game.sortEntitiesDeferred();this.tween({xPos:0},0.3,{easing:ig.Tween.Easing.Exponential.EaseInOut}).start();},draw:function()
{this.parent();this.fnDrawRectangle();var center=ig.responsive.toAnchor(0,0,"center-middle");var scaleX=ig.system.width/this.size.x;var scaleY=ig.system.height/this.size.y;this.panelImage.draw(this.xPos+center.x-this.panelImage.width/2,center.y-this.panelImage.height/2);var ctx=ig.system.context;ctx.font='normal 80px montserrat';ctx.fillStyle="#FFFFFF";ctx.textAlign='center';ctx.textBaseline='middle';var text
if(this.controller==ig.game.getEntitiesByType(EntityTitleController)[0]){text=_STRINGS.Game.Settings;}
else{text=_STRINGS.Game.Pause;}
ctx.fillText(text,this.xPos+center.x-text.length/2,center.y-text.length/2-275);this.musicIconImg.draw(this.xPos+center.x-this.musicIconImg.width/2-185,center.y-155);this.soundIconImg.draw(this.xPos+center.x-this.soundIconImg.width/2-185,center.y+25);},onClickedhome:function()
{this.kill();if(this.controller==ig.game.getEntitiesByType(EntityLevelController)[0])
{if(this.onCloseCallback!=null)
this.onCloseCallback();}
else if(this.controller==ig.game.getEntitiesByType(EntityTitleController)[0]){this.controller.playBtn.isEnabled=true;this.controller.settingBtn.isEnabled=true;if(_SETTINGS.MoreGames.Enabled)this.controller.moreGameBtn.show();console.log("titlecontroller origin");}
else
{ig.game.loadLevelDeferred(ig.global['LevelTitle']);}},onCickedResume:function()
{this.kill();if(this.onCloseCallback!=null)
this.onCloseCallback();},changeBGMVolume:function(state){console.log("Change bg state : "+state);ig.game.setMusicVolume(state);ig.soundHandler.sfxPlayer.play("click");ig.game.saveAll();},changeSFXVolume:function(state){ig.game.setSoundVolume(state);ig.soundHandler.sfxPlayer.play("click");ig.game.saveAll();},onClickedRetry:function(){ig.game.loadLevelDeferred(ig.global['LevelGameplay']);},fnDrawRectangle:function(){ig.system.context.save();ig.system.context.fillStyle='#000000';ig.system.context.globalAlpha=0.5;ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);ig.system.context.restore();}});});

// lib/game/entities/buttons/button-pause.js
ig.baked=true;ig.module('game.entities.buttons.button-pause').requires('game.entities.buttons.button').defines(function(){EntityButtonPause=EntityButton.extend({animSheet:new ig.AnimationSheet('media/graphics/sprites/games/pause.png',108,108),onClickCallback:null,isEnabled:true,size:{x:108,y:108,},initPosY:null,init:function(x,y,settings){this.parent(x,y,settings);this.addAnim('idle',1,[0]);if(settings.onClicked!=null)
this.onClickCallback=settings.onClicked;if(ig.global.wm)
{return;}},over:function()
{if(!ig.game.buttonPressed)
ig.game.buttonPressed=true;},leave:function()
{if(ig.game.buttonPressed)
ig.game.buttonPressed=false;},clicked:function()
{if(this.isEnabled){if(this.initPosY==null)
this.initPosY=this.anchoredPositionY;this.tween({anchoredPositionY:this.initPosY+5},0.2,{}).start();ig.game.buttonPressed=true;ig.soundHandler.sfxPlayer.play("click");}},clicking:function()
{},leave:function()
{if(this.anchoredPositionY!=this.initPosY)
this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();},released:function()
{if(this.isEnabled)
{this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();ig.game.buttonPressed=false;if(this.onClickCallback!=null)
this.onClickCallback();}}});});

// lib/game/entities/buttons/button-hint.js
ig.baked=true;ig.module('game.entities.buttons.button-hint').requires('game.entities.buttons.button').defines(function(){EntityButtonHint=EntityButton.extend({animSheet:new ig.AnimationSheet('media/graphics/sprites/games/hint.png',155,184),onClickCallback:null,isEnabled:true,size:{x:155,y:184,},initPosY:null,init:function(x,y,settings){this.parent(x,y,settings);this.addAnim('idle',1,[0]);if(settings.onClicked!=null)
this.onClickCallback=settings.onClicked;if(ig.global.wm)
{return;}},over:function()
{if(!ig.game.buttonPressed)
ig.game.buttonPressed=true;},leave:function()
{if(ig.game.buttonPressed)
ig.game.buttonPressed=false;},clicked:function()
{if(this.isEnabled){if(this.initPosY==null)
this.initPosY=this.anchoredPositionY;this.tween({anchoredPositionY:this.initPosY+5},0.2,{}).start();ig.game.buttonPressed=true;}},clicking:function()
{},leave:function()
{if(this.anchoredPositionY!=this.initPosY)
this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();},released:function()
{if(this.isEnabled)
{this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();ig.game.buttonPressed=false;if(this.onClickCallback!=null)
this.onClickCallback();}},teeter:function(){this.tween({offset:{x:-10,y:0}},0.025,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){this.tween({offset:{x:10,y:0}},0.05,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){this.tween({offset:{x:-10,y:0}},0.025,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){this.tween({offset:{x:10,y:0}},0.05,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){this.tween({offset:{x:0,y:0}},0.025,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){}.bind(this)}).start();}.bind(this)}).start();}.bind(this)}).start();}.bind(this)}).start();}.bind(this)}).start();}});});

// lib/game/entities/buttons/button-extra-try.js
ig.baked=true;ig.module('game.entities.buttons.button-extra-try').requires('game.entities.buttons.button').defines(function(){EntityButtonExtraTry=EntityButton.extend({animSheet:new ig.AnimationSheet('media/graphics/sprites/games/extra-chance.png',156,182),onClickCallback:null,isEnabled:true,size:{x:156,y:182,},initPosY:null,init:function(x,y,settings){this.parent(x,y,settings);this.addAnim('idle',1,[0]);if(settings.onClicked!=null)
this.onClickCallback=settings.onClicked;if(ig.global.wm)
{return;}},over:function()
{if(!ig.game.buttonPressed)
ig.game.buttonPressed=true;},leave:function()
{if(ig.game.buttonPressed)
ig.game.buttonPressed=false;},clicked:function()
{if(this.isEnabled){if(this.initPosY==null)
this.initPosY=this.anchoredPositionY;this.tween({anchoredPositionY:this.initPosY+5},0.2,{}).start();ig.game.buttonPressed=true;}},clicking:function()
{},leave:function()
{if(this.anchoredPositionY!=this.initPosY)
this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();},released:function()
{if(this.isEnabled)
{this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();ig.game.buttonPressed=false;if(this.onClickCallback!=null)
this.onClickCallback();}},teeter:function(){this.tween({offset:{x:-10,y:0}},0.025,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){this.tween({offset:{x:10,y:0}},0.05,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){this.tween({offset:{x:-10,y:0}},0.025,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){this.tween({offset:{x:10,y:0}},0.05,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){this.tween({offset:{x:0,y:0}},0.025,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){}.bind(this)}).start();}.bind(this)}).start();}.bind(this)}).start();}.bind(this)}).start();}.bind(this)}).start();}});});

// lib/game/entities/miscellaneous/confetti.js
ig.baked=true;ig.module("game.entities.miscellaneous.confetti").requires("impact.entity").defines(function(){EntityConfetti=ig.Entity.extend({colorRoster:["rgba(251,242,54,1)","rgba(223,113,38,1)","rgba(255,255,255,1)","rgba(217,160,102,1)"],rotation:1,scale:{x:1,y:1},speed:{x:1,y:1,a:0},rotation:0,alpha:1,lifeTime:3,fadeDuration:0.2,pivot:{x:-4,y:-6},zIndex:600,colorNumber:-1,ignorePause:true,fillColor:"rgba(255,255,255,1)",init:function(x,y,settings){this.parent(x,y,settings);this.scale.x=2;this.scale.y=2;var ang=Math.floor(Math.random()*360);this.speed.x=Math.sin(ang/Math.PI)*4;this.speed.y=Math.cos(ang/Math.PI)*4;this.speed.a=(Math.random()*10-5)*(Math.PI/180)*5;this.lifeTime=(Math.floor(Math.random()*15)+5)/10;this.fillColor=this.colorRoster[Math.floor(Math.random()*this.colorRoster.length)];},update:function(){this.parent();this.pos.x+=this.speed.x;this.pos.y+=this.speed.y;this.rotation+=this.speed.a;this.alpha=1;this.lifeTime-=ig.system.tick;if(this.lifeTime<=this.fadeDuration){this.alpha=this.lifeTime.map(this.fadeDuration,0,1,0);}
if(this.pos.x>ig.system.width+50||this.pos.y>ig.system.height+50||this.pos.x<-50||this.pos.y<-50||this.lifeTime<=0)
this.kill();},updateOnOrientationChange:function(){},draw:function(){var ctx=ig.system.context;ctx.save();ctx.translate(this.pos.x,this.pos.y);ctx.rotate(this.rotation);ctx.scale(this.scale.x,this.scale.y);ctx.translate(-this.pos.x,-this.pos.y);ctx.globalAlpha=this.alpha;ctx.fillStyle=this.fillColor;ctx.fillRect(this.pos.x+this.pivot.x,this.pos.y+this.pivot.x,4*1.3,8*1.3);ctx.restore();this.parent();}});});

// lib/game/entities/controllers/game-ui-controller.js
ig.baked=true;ig.module('game.entities.controllers.game-ui-controller').requires('impact.entity','game.entities.controllers.setting-controller','game.entities.buttons.button-pause','game.entities.buttons.button-hint','game.entities.buttons.button-extra-try','game.entities.miscellaneous.confetti').defines(function(){EntityGameUIController=EntityPopupController.extend({zIndex:50,coinImg:new ig.Image('media/graphics/sprites/games/coins.png'),instructionImg:new ig.Image('media/graphics/sprites/games/instruction_bar.png'),tutorial_trigger:false,init:function(x,y,settings){this.parent(x,y,settings);this.mobile_dev=false;if(ig.system.width<ig.system.height)this.mobile_dev=true;this.money=ig.game.sessionData.playerMoney;var anchor=ig.responsive.toAnchor(0,0,"center-middle");this.yPos=anchor.y-220;this.instructionPosY=anchor.y+ig.system.height/2+10;this.alpha=0;this.pauseBtn=this.spawnEntity(EntityButtonPause,0,0,{zIndex:this.zIndex,onClicked:function(){this.showSettings()}.bind(this)});this.pauseBtn.setAnchoredPosition(-this.pauseBtn.size.x-50,80,"top-right");this.hintBtn=this.spawnEntity(EntityButtonHint,0,0,{zIndex:this.zIndex,onClicked:function(){this.giveHint()}.bind(this)});this.hintBtn.setAnchoredPosition(50,-this.hintBtn.size.y*2-120,"bottom-left");this.extraTryBtn=this.spawnEntity(EntityButtonExtraTry,0,0,{zIndex:this.zIndex,onClicked:function(){this.extraTry()}.bind(this)});this.extraTryBtn.setAnchoredPosition(50,-this.extraTryBtn.size.y-80,"bottom-left");if(ig.game.sessionData.level<3&&!ig.game.sessionData.tutorialDone){this.hintBtn.offset.y=-15;this.extraTryBtn.offset.y=-15;this.hintBtn.currentAnim.alpha=0.5;this.extraTryBtn.currentAnim.alpha=0.5;this.hintBtn.isEnabled=false;this.extraTryBtn.isEnabled=false;}},draw:function(){this.parent();var topRight=ig.responsive.toAnchor(0,0,"top-right");var topLeft=ig.responsive.toAnchor(0,0,"top-left");var bottomRight=ig.responsive.toAnchor(0,0,"bottom-right");var bottomCenter=ig.responsive.toAnchor(0,0,"bottom-center");this.coinImg.draw(topLeft.x+50,topLeft.y+80);var ctx=ig.system.context;ctx.font='normal 40px montserrat';ctx.fillStyle="#ee4791";ctx.textAlign='right';ctx.fillText(this.money,topLeft.x+240,topLeft.y+80+this.coinImg.height/2);var anchor=ig.responsive.toAnchor(0,0,"center-middle");var ctx=ig.system.context;if(this.tutorial_trigger){if(this.yPos<anchor.y-220){this.yPos+=2;this.alpha+=0.05;}
else if(this.yPos>=anchor.y-220){this.yPos=anchor.y-220;this.alpha=1;}
if(this.instructionPosY>anchor.y+425){if(!this.mobile_dev)this.instructionPosY-=15;else this.instructionPosY-=50;}
else if(this.instructionPosY<=anchor.y+425){this.instructionPosY=anchor.y+425;}}
else if(!this.tutorial_trigger){if(this.yPos>anchor.y-270){this.yPos-=2;this.alpha-=0.05;}
else if(this.yPos<=anchor.y-270){this.yPos=anchor.y-270;this.alpha=0;}
if(this.instructionPosY<anchor.y+ig.system.height/2+10){if(!this.mobile_dev)this.instructionPosY+=15;else this.instructionPosY+=50;}
else if(this.instructionPosY>=anchor.y+ig.system.height/2+50){this.instructionPosY=anchor.y+ig.system.height/2+10;}}
if(this.controller.level==1){ctx.font='normal 40px montserrat';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillStyle="rgba(157,216,216, "+this.alpha+")";ctx.fillText(_STRINGS.Game.Correct,anchor.x-302,this.yPos+18);ctx.fillStyle="rgba(157,216,216, "+this.alpha+")";ctx.fillText(_STRINGS.Game.Wrong,anchor.x-52,this.yPos-43);ctx.fillText(_STRINGS.Game.Place,anchor.x-52,this.yPos-2);ctx.fillStyle="rgba(157,216,216, "+this.alpha+")";ctx.fillText(_STRINGS.Game.Wrong,anchor.x+328,this.yPos+43);ctx.fillText(_STRINGS.Game.Place,anchor.x+328,this.yPos+84);ctx.font='normal 40px montserrat';ctx.fillStyle="rgba(238,58,127, "+this.alpha+" )";ctx.textAlign='center';ctx.textBaseline='middle';this.instructionImg.draw(anchor.x-this.instructionImg.width/2,this.instructionPosY);ctx.fillText(_STRINGS.Game.Guess,anchor.x,this.instructionPosY+40);ctx.font='normal 40px montserrat';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillStyle="rgba(238,58,127, "+this.alpha+")";ctx.fillText(_STRINGS.Game.Correct,anchor.x-300,this.yPos+20);ctx.fillStyle="rgba(238,58,127, "+this.alpha+")";ctx.fillText(_STRINGS.Game.Wrong,anchor.x-50,this.yPos-41);ctx.fillText(_STRINGS.Game.Place,anchor.x-50,this.yPos);ctx.fillStyle="rgba(238,58,127, "+this.alpha+")";ctx.fillText(_STRINGS.Game.Wrong,anchor.x+330,this.yPos+45);ctx.fillText(_STRINGS.Game.Place,anchor.x+330,this.yPos+86);}
else if(this.controller.level==2){ctx.font='normal 40px montserrat';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillStyle="rgba(157,216,216, "+this.alpha+")";ctx.fillText(_STRINGS.Game.Incorrect,anchor.x+358,this.yPos+43);ctx.fillStyle="rgba(238,58,127, "+this.alpha+")";ctx.fillText(_STRINGS.Game.Incorrect,anchor.x+360,this.yPos+45);}
ctx.font='normal 60px montserrat';ctx.textAlign='right';ctx.fillStyle="rgba(157,216,216,255)";ctx.fillText(_STRINGS.Game.Level+" "+ig.game.sessionData.level,bottomRight.x-_STRINGS.Game.Level.length-55,bottomRight.y-100);ctx.fillStyle="rgba(238,58,127,255)";ctx.fillText(_STRINGS.Game.Level+" "+ig.game.sessionData.level,bottomRight.x-_STRINGS.Game.Level.length-50,bottomRight.y-95);},showSettings:function()
{console.log("Show settings");this.disableClickableEntities();this.controller.onPauseGame();this.settingPanel=ig.game.spawnEntity(EntitySettingController,0,0,{controller:this.controller,onClosed:function(){this.hideSettings()}.bind(this)});this.settingPanel.setAnchoredPosition(0,0,"center-middle");},hideSettings:function()
{this.enableClickableEntities();this.controller.onResumeGame();},giveHint:function(){if(!this.controller.checking&&this.controller.gameOverChecker==false){var rando_slot_hint=Math.floor(Math.random()*(2-0+1)+0);if(this.money>=50){ig.soundHandler.sfxPlayer.play("click");if(ig.game.colorSlot[rando_slot_hint]=='x'|ig.game.colorSlot[rando_slot_hint]=='y'){ig.game.colorSlot[rando_slot_hint]=ig.color_levels.Groups[0].Levels[this.controller.level-1].Color_Answer[rando_slot_hint];this.controller.answerspot[rando_slot_hint+this.controller.columncount].updateSlot(ig.game.colorSlot[rando_slot_hint]);this.money=this.money-50;ig.game.sessionData.playerMoney=this.money;ig.game.saveAll();}
else{var color_slots=ig.game.colorSlot
var rando_viable_index=color_slots.indexOf('x');ig.game.colorSlot[rando_viable_index]=ig.color_levels.Groups[0].Levels[this.controller.level-1].Color_Answer[rando_viable_index];this.controller.answerspot[rando_viable_index+this.controller.columncount].updateSlot(ig.game.colorSlot[rando_viable_index]);this.money=this.money-50;ig.game.sessionData.playerMoney=this.money;ig.game.saveAll();}}
else if(this.money<50){ig.soundHandler.sfxPlayer.play("insufficientfund");this.hintBtn.teeter();}}},extraTry:function(){if(this.money>=50){ig.soundHandler.sfxPlayer.play("click");this.money=this.money-50;ig.game.sessionData.playerMoney=this.money;ig.game.saveAll();this.controller.extra_chance=true;this.extraTryBtn.isEnabled=false;this.extraTryBtn.tween({offset:{x:0,y:-15}},0.5,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){this.extraTryBtn.currentAnim.alpha=0.5;}.bind(this)}).start();}
else if(this.money<50){ig.soundHandler.sfxPlayer.play("insufficientfund");this.extraTryBtn.teeter();}},disableClickableEntities:function(){this.pauseBtn.isEnabled=false;this.hintBtn.isEnabled=false;this.extraTryBtn.isEnabled=false;for(i=0;i<this.controller.clickables.length;i++){this.controller.clickables[i].isEnabled=false;}},enableClickableEntities:function(){this.pauseBtn.isEnabled=true;this.hintBtn.isEnabled=true;this.extraTryBtn.isEnabled=true;for(i=0;i<this.controller.clickables.length;i++){this.controller.clickables[i].isEnabled=true;}
if(!this.tutorial_trigger&&!ig.game.sessionData.tutorialDone){for(i=0;i<this.controller.clickables.length;i++){this.controller.clickables[i].isEnabled=false;}
this.controller.clickables[this.controller.tutorialIndexPos].isEnabled=true;}}});});

// lib/game/entities/buttons/button-next-level.js
ig.baked=true;ig.module('game.entities.buttons.button-next-level').requires('game.entities.buttons.button').defines(function(){EntityButtonNextLevel=EntityButton.extend({animSheet:new ig.AnimationSheet('media/graphics/sprites/games/resume.png',122,122),isEnabled:true,onClickCallback:null,size:{x:122,y:122},initPosX:null,initPosY:null,init:function(x,y,settings){this.parent(x,y,settings);this.addAnim('idle',1,[0]);if(settings.onClicked!=null)
this.onClickCallback=settings.onClicked;if(ig.global.wm)
{return;}},update:function()
{if(this.controller!=null)
{if(this.initPosX==null)
this.initPosX=this.anchoredPositionX;this.anchoredPositionX=this.initPosX+this.controller.xPos;}
this.parent();},clicked:function()
{if(this.isEnabled){if(this.initPosY==null)
this.initPosY=this.anchoredPositionY;this.tween({anchoredPositionY:this.initPosY+5},0.2,{}).start();ig.soundHandler.sfxPlayer.play("click");}},clicking:function()
{},leave:function()
{if(this.anchoredPositionY!=this.initPosY)
this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();},released:function()
{if(this.isEnabled)
{this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();if(this.onClickCallback!=null)
this.onClickCallback();}}});});

// lib/game/entities/buttons/button-double-reward.js
ig.baked=true;ig.module('game.entities.buttons.button-double-reward').requires('game.entities.buttons.button').defines(function(){EntityButtonDoubleReward=EntityButton.extend({animSheet:new ig.AnimationSheet('media/graphics/sprites/games/reward-button.png',428,101),isEnabled:true,onClickCallback:null,initPosX:null,size:{x:428,y:101,},initPosY:null,init:function(x,y,settings){this.parent(x,y,settings);this.addAnim('idle',1,[0]);if(settings.onClicked!=null)
this.onClickCallback=settings.onClicked;if(ig.global.wm)
{return;}},update:function()
{if(this.controller!=null)
{if(this.initPosX==null)
this.initPosX=this.anchoredPositionX;this.anchoredPositionX=this.initPosX+this.controller.xPos;}
this.parent();},clicked:function()
{if(this.isEnabled){if(this.initPosY==null)
this.initPosY=this.anchoredPositionY;this.tween({anchoredPositionY:this.initPosY+5},0.2,{}).start();ig.soundHandler.sfxPlayer.play("click");}},clicking:function()
{},leave:function()
{if(this.anchoredPositionY!=this.initPosY)
this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();},released:function()
{if(this.isEnabled)
{this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();if(this.onClickCallback!=null)
this.onClickCallback();}}});});

// lib/game/entities/buttons/button-ok.js
ig.baked=true;ig.module('game.entities.buttons.button-ok').requires('game.entities.buttons.button').defines(function(){EntityButtonOk=EntityButton.extend({animSheet:new ig.AnimationSheet('media/graphics/sprites/games/tile.png',207,208),isEnabled:true,onClickCallback:null,size:{x:207,y:208,},initPosX:null,initPosY:null,init:function(x,y,settings){this.parent(x,y,settings);this.idle=new ig.Animation(this.animSheet,1,[0]);this.currentAnim=this.idle;this.setAnchoredPosition(x,y,"center-middle");if(settings.onClicked!=null)
this.onClickCallback=settings.onClicked;if(ig.global.wm)
{return;}},update:function()
{if(this.controller!=null)
{if(this.initPosX==null)
this.initPosX=this.anchoredPositionX;this.anchoredPositionX=this.initPosX+this.controller.xPos;}
this.parent();},clicked:function()
{if(this.isEnabled){if(this.initPosY==null)
this.initPosY=this.anchoredPositionY;this.tween({anchoredPositionY:this.initPosY+5},0.2,{}).start();ig.soundHandler.sfxPlayer.play("click");}},clicking:function()
{},leave:function()
{if(this.anchoredPositionY!=this.initPosY)
this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();},released:function()
{if(this.isEnabled)
{this.tween({anchoredPositionY:this.initPosY},0.2,{}).start();if(this.onClickCallback!=null)
this.onClickCallback();}},draw:function(){this.parent()
var ctx=ig.system.context;ctx.font='normal 80px montserrat';ctx.fillStyle="#ee4791";ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText("OK",this.pos.x+this.size.x/2-2,this.pos.y+this.size.y/2-2);}});});

// lib/game/entities/controllers/reward-controller.js
ig.baked=true;ig.module('game.entities.controllers.reward-controller').requires('impact.entity','game.entities.controllers.popup-controller','game.entities.buttons.button-ok').defines(function(){EntityRewardController=EntityPopupController.extend({panelImage:new ig.Image('media/graphics/sprites/games/gameover_popup.png'),onCloseCallback:null,zIndex:100,xPos:0,messageRv:null,init:function(x,y,settings){this.xPos=-ig.responsive.width;this.parent(x,y,settings);if(settings.onClosed!=null)
this.onCloseCallback=settings.onClosed;this.okBtn=this.spawnEntity(EntityButtonOk,0,-100,{zIndex:this.zIndex+1,onClicked:function(){this.onClickOk()}.bind(this),controller:this});this.okBtn.setAnchoredPosition(-this.okBtn.size.x/2,this.anchoredPositionY+50,"center-middle");ig.game.sortEntitiesDeferred();this.tween({xPos:0},0.3,{easing:ig.Tween.Easing.Exponential.EaseInOut}).start();},onClickOk:function(){this.kill();this.controller.homeBtn.isEnabled=true;this.controller.nextLevelBtn.isEnabled=true;this.controller.retryLevelBtn.isEnabled=true;},draw:function(){this.parent();this.fnDrawRectangle();var center=ig.responsive.toAnchor(0,0,"center-middle");var scaleX=ig.system.width/this.size.x;var scaleY=ig.system.height/this.size.y;this.panelImage.draw(this.xPos+center.x-this.panelImage.width/2,center.y-this.panelImage.height/2);var text
var ctx=ig.system.context;if(this.messageRv=="success"){ctx.font='normal 70px montserrat';ctx.fillStyle=ctx.fillStyle="rgba(255,255,255, 255)";ctx.textAlign='center';ctx.textBaseline='middle';text=_STRINGS.Game.RewardVideo;ctx.fillText(text,this.xPos+center.x-text.length/2,center.y-text.length/2-255);text=_STRINGS.Game.RewardCallbackSuccess;ctx.fillText(text,this.xPos+center.x-text.length/2,center.y-text.length/2-185);}
else if(this.messageRv=="failed"){ctx.font='normal 70px montserrat';ctx.fillStyle=ctx.fillStyle="rgba(255,255,255,255)";ctx.textAlign='center';ctx.textBaseline='middle';text=_STRINGS.Game.RewardVideo;ctx.fillText(text,this.xPos+center.x-text.length/2,center.y-text.length/2-255);text=_STRINGS.Game.RewardCallbackFailed;ctx.fillText(text,this.xPos+center.x-text.length/2,center.y-text.length/2-185);}},fnDrawRectangle:function(){ig.system.context.save();ig.system.context.fillStyle='#000000';ig.system.context.globalAlpha=0.5;ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);ig.system.context.restore();}});});

// lib/game/entities/controllers/gameover-controller.js
ig.baked=true;ig.module('game.entities.controllers.gameover-controller').requires('impact.entity','game.entities.controllers.popup-controller','game.entities.buttons.button-home','game.entities.buttons.button-next-level','game.entities.buttons.button-retry','game.entities.buttons.button-double-reward','game.entities.controllers.reward-controller').defines(function(){EntityGameoverController=EntityPopupController.extend({panelImage:new ig.Image('media/graphics/sprites/games/popup.png'),rewardImage:new ig.Image('media/graphics/sprites/games/reward.png'),coinImage:new ig.Image('media/graphics/sprites/games/coin.png'),onCloseCallback:null,highScore:false,zIndex:50,xPos:0,gameResult:null,show_now_reward:false,init:function(x,y,settings){this.reward=settings.rewardTemplate;this.xPos=-ig.responsive.width;this.parent(x,y,settings);this.tip_over1=null;this.tip_over2=null;if(settings.onClosed!=null)
this.onCloseCallback=settings.onClosed;if(this.gameResult=="win"){this.homeBtn=this.spawnEntity(EntityButtonHome,0,-100,{zIndex:this.zIndex+1,onClicked:function(){this.onClickedhome()}.bind(this),controller:this,anchor:"center-middle",xPos:this.xPos,popup_child:true});this.homeBtn.setAnchoredPosition(-this.homeBtn.size.x/2-this.homeBtn.size.x-20,this.anchoredPositionY+200,"center-middle");this.nextLevelBtn=this.spawnEntity(EntityButtonNextLevel,0,-100,{zIndex:this.zIndex+1,onClicked:function(){this.onClickedNextLevel()}.bind(this),controller:this});this.nextLevelBtn.setAnchoredPosition(-this.nextLevelBtn.size.x/2,this.anchoredPositionY+200,"center-middle");this.retryLevelBtn=this.spawnEntity(EntityButtonRetry,0,-100,{zIndex:this.zIndex+1,onClicked:function(){this.onClickedRetry()}.bind(this),controller:this})
this.retryLevelBtn.setAnchoredPosition(-this.retryLevelBtn.size.x/2+this.retryLevelBtn.size.x+20,this.anchoredPositionY+200,"center-middle");if(_SETTINGS.RewardedVideo.Enabled)this.doubleRewardShow();}
else{this.panelImage=new ig.Image('media/graphics/sprites/games/gameover_popup.png')
this.homeBtn=this.spawnEntity(EntityButtonHome,0,-100,{onClicked:function(){this.onClickedhome()}.bind(this),controller:this,anchor:"center-middle",xPos:this.xPos,popup_child:true});this.homeBtn.setAnchoredPosition(-this.homeBtn.size.x/2-this.homeBtn.size.x/2-20,this.anchoredPositionY+120,"center-middle");this.retryLevelBtn=this.spawnEntity(EntityButtonRetry,0,-100,{zIndex:this.zIndex+1,onClicked:function(){this.onClickedRetry()}.bind(this),controller:this})
this.retryLevelBtn.setAnchoredPosition(-this.retryLevelBtn.size.x/2+this.retryLevelBtn.size.x/2+20,this.anchoredPositionY+120,"center-middle");this.tipsGenerator();}
this.rvAlpha=1;ig.game.sortEntitiesDeferred();this.tween({xPos:0},0.3,{easing:ig.Tween.Easing.Exponential.EaseInOut}).start();},doubleRewardShow:function(){this.doubleRewardBtn=this.spawnEntity(EntityButtonDoubleReward,0,0,{zIndex:this.zIndex+1,onClicked:function(){this.onClickedDoubleReward()}.bind(this),controller:this})
this.doubleRewardBtn.setAnchoredPosition(-this.doubleRewardBtn.size.x/2,this.anchoredPositionY+60,"center-middle");},draw:function(){this.parent();this.fnDrawRectangle();var center=ig.responsive.toAnchor(0,0,"center-middle");var scaleX=ig.system.width/this.size.x;var scaleY=ig.system.height/this.size.y;this.panelImage.draw(this.xPos+center.x-this.panelImage.width/2,center.y-this.panelImage.height/2);var text
var currentLevel=ig.game.getEntitiesByType(EntityGameplayController)[0].level;if(this.gameResult=="win"){var ctx=ig.system.context;ctx.font='normal 80px montserrat';ctx.fillStyle="#ee4791";ctx.textAlign='center';ctx.textBaseline='middle';text=String(this.reward);ctx.fillText(text,this.xPos+center.x-text.length/2+40,center.y-this.coinImage.height/2+47);this.rewardImage.draw(this.xPos+center.x-this.rewardImage.width/2,center.y-this.rewardImage.height-70);this.coinImage.draw(this.xPos+center.x-this.coinImage.width/2-80,center.y-this.coinImage.height/2);var ctx=ig.system.context;ctx.font='normal 70px montserrat';ctx.fillStyle="#FFFFFF";ctx.textAlign='center';ctx.textBaseline='middle';text=_STRINGS.Game.Level+" "+currentLevel;ctx.fillText(text,this.xPos+center.x-text.length/2,center.y-text.length/2-325);text=_STRINGS.Game.Complete;ctx.fillText(text,this.xPos+center.x-text.length/2,center.y-text.length/2-245);}
else if(this.gameResult=="lose"){var ctx=ig.system.context;ctx.font='normal 70px montserrat';ctx.fillStyle="#FFFFFF";ctx.textAlign='center';ctx.textBaseline='middle';text=_STRINGS.Game.Lose;ctx.fillText(text,this.xPos+center.x-text.length/2,center.y-text.length/2-205);ctx.font='normal 35px montserrat';ctx.fillStyle="rgba(238,58,127,255)";ctx.textAlign='center';ctx.textBaseline='middle';if(this.tip_over2!=""){text=this.tip_over1;ctx.fillText(text,this.xPos+center.x-text.length/2,center.y-text.length/2-17.5);text=this.tip_over2;ctx.fillText(text,this.xPos+center.x-text.length/2,center.y-text.length/2+17.5);}
else{text=this.tip_over1;ctx.fillText(text,this.xPos+center.x-text.length/2,center.y-text.length/2);}}},tipsGenerator:function(){var tipDeterminer=Math.floor(Math.random()*(7-1+1)+1);switch(tipDeterminer){case 1:this.tip_over1=_STRINGS.Game.text_tips1a;this.tip_over2=_STRINGS.Game.text_tips1b;break;case 2:this.tip_over1=_STRINGS.Game.text_tips2a;this.tip_over2=_STRINGS.Game.text_tips2b;break;case 3:this.tip_over1=_STRINGS.Game.text_tips3a;this.tip_over2=_STRINGS.Game.text_tips3b;break;case 4:this.tip_over1=_STRINGS.Game.text_tips4a;this.tip_over2=_STRINGS.Game.text_tips4b;break;case 5:this.tip_over1=_STRINGS.Game.text_tips5a;this.tip_over2=_STRINGS.Game.text_tips5b;break;case 6:this.tip_over1=_STRINGS.Game.text_tips6a;this.tip_over2=_STRINGS.Game.text_tips6b;break;case 7:this.tip_over1=_STRINGS.Game.text_tips7a;this.tip_over2=_STRINGS.Game.text_tips7b;break;}},onClickedhome:function()
{ig.game.loadLevelDeferred(ig.global['LevelTitle']);},onClickedNextLevel:function()
{if(ig.game.sessionData.level<20){ig.game.sessionData.level++;ig.game.loadLevelDeferred(ig.global['LevelGameplay']);console.log("not complete")}
else{ig.game.loadLevelDeferred(ig.global['LevelPage']);console.log("complete");}},onClickedRetry:function(){ig.game.loadLevelDeferred(ig.global['LevelGameplay']);},onClickedDoubleReward:function(){this.showRewardedVideo();},fnDrawRectangle:function(){ig.system.context.save();ig.system.context.fillStyle='#000000';ig.system.context.globalAlpha=0.5;ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);ig.system.context.restore();},showRewardedVideo:function(){var reward_determiner=Math.random();var rewardRandom=false;if(reward_determiner<0.5){rewardRandom=true;}
this.rewardedVideoResult(rewardRandom);},rewardedVideoResult:function(isSuccess){if(isSuccess){ig.game.sessionData.playerMoney+=this.reward;ig.game.saveAll();this.controller.uiController.money=ig.game.sessionData.playerMoney;this.reward=this.reward*2;this.doubleRewardBtn.kill();this.reward_panel=ig.game.spawnEntity(EntityRewardController,0,0,{controller:this,messageRv:"success"});this.reward_panel.setAnchoredPosition(0,0,"center-middle");this.homeBtn.isEnabled=false;this.nextLevelBtn.isEnabled=false;this.retryLevelBtn.isEnabled=false;}else{this.doubleRewardBtn.kill();this.reward_panel=ig.game.spawnEntity(EntityRewardController,0,0,{controller:this,messageRv:"failed"});this.reward_panel.setAnchoredPosition(0,0,"center-middle");this.homeBtn.isEnabled=false;this.nextLevelBtn.isEnabled=false;this.retryLevelBtn.isEnabled=false;}}});});

// lib/game/entities/miscellaneous/background-box.js
ig.baked=true;ig.module("game.entities.miscellaneous.background-box").requires("impact.entity").defines(function(){EntityBackgroundBox=ig.Entity.extend({size:{x:395,y:130},offset:{x:0,y:0},zIndex:3,animSheet:[new ig.AnimationSheet('media/graphics/sprites/games/base-three.png',395,130),new ig.AnimationSheet('media/graphics/sprites/games/base-four.png',532,130)],activity:0,init:function(x,y,settings){this.parent(x,y,settings);this.setAnchoredPosition(x,y,"center-middle");this.idle=new ig.Animation(this.animSheet[this.activity],1,[0]);this.currentAnim=this.idle;if(settings.alpha_measure==null|undefined)settings.alpha_measure=1;this.currentAnim.alpha=settings.alpha_measure;},draw:function(){this.parent();},resetBox:function(){this.tween({offset:{x:0,y:-15}},0.5,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){this.currentAnim.alpha=0.5;}.bind(this)}).start();}});});

// lib/game/entities/miscellaneous/lock.js
ig.baked=true;ig.module("game.entities.miscellaneous.lock").requires("impact.entity").defines(function(){EntityLock=ig.Entity.extend({size:{x:153,y:166},animSheet:[new ig.AnimationSheet('media/graphics/sprites/games/locked.png',153,166),new ig.AnimationSheet('media/graphics/sprites/games/unlocked.png',153,166)],activity:0,currentAnim_alpha:1,init:function(x,y,settings){this.parent(x,y,settings);this.idle=new ig.Animation(this.animSheet[this.activity],1,[0]);this.currentAnim=this.idle;},update:function(){this.parent();this.currentAnim.alpha=this.currentAnim_alpha;},swap_lock:function(x,y,settings){this.activity=1;this.idle=new ig.Animation(this.animSheet[this.activity],1,[0]);this.currentAnim=this.idle;this.tween({offset:{x:0,y:-50}},0.05,{onComplete:function(){ig.soundHandler.sfxPlayer.play("unlock");this.tween({offset:{x:0,y:100},currentAnim_alpha:0},0.15,{}).start()}.bind(this)}).start()},draw:function(){this.parent();}});});

// lib/game/entities/miscellaneous/tutorial-cursor.js
ig.baked=true;ig.module("game.entities.miscellaneous.tutorial-cursor").requires("impact.entity").defines(function(){EntityTutorialCursor=ig.Entity.extend({size:{x:97,y:107},offset:{x:0,y:0},animSheet:new ig.AnimationSheet('media/graphics/sprites/games/cursor.png',97,107),init:function(x,y,settings){this.parent(x,y,settings);this.addAnim("idle",0.3,[0,1]);this.currentAnim=this.anims.idle;},draw:function(){this.parent();}});});

// lib/game/entities/miscellaneous/arrow-tutorial.js
ig.baked=true;ig.module("game.entities.miscellaneous.arrow-tutorial").requires("impact.entity").defines(function(){EntityArrowTutorial=ig.Entity.extend({size:{x:150,y:150},mod_alpha:0,animSheet:new ig.AnimationSheet('media/graphics/sprites/games/arrow_tutorial.png',150,150),init:function(x,y,settings){this.parent(x,y,settings);this.addAnim("idle",1,[0]);this.currentAnim=this.anims.idle;this.currentAnim.alpha=this.mod_alpha;},draw:function(){this.parent();},show:function(){this.tween({offset:{x:0,y:-50},mod_alpha:1},0.5,{onComplete:function(){}.bind(this)}).start()},hide:function(){this.tween({offset:{x:0,y:0},mod_alpha:0},0.5,{onComplete:function(){}.bind(this)}).start()},update:function(){this.parent();this.currentAnim.alpha=this.mod_alpha;}});});

// lib/game/entities/miscellaneous/arrow-shadow.js
ig.baked=true;ig.module("game.entities.miscellaneous.arrow-shadow").requires("impact.entity").defines(function(){EntityArrowShadow=ig.Entity.extend({size:{x:150,y:150},mod_alpha:0,animSheet:new ig.AnimationSheet('media/graphics/sprites/games/arrow-shadow.png',150,150),init:function(x,y,settings){this.parent(x,y,settings);this.addAnim("idle",1,[0]);this.currentAnim=this.anims.idle;this.currentAnim.alpha=this.mod_alpha;},draw:function(){this.parent();},show:function(){this.tween({offset:{x:0,y:-50},mod_alpha:1},0.5,{onComplete:function(){}.bind(this)}).start()},hide:function(){this.tween({offset:{x:0,y:0},mod_alpha:0},0.5,{onComplete:function(){}.bind(this)}).start()},update:function(){this.parent();this.currentAnim.alpha=this.mod_alpha;}});});

// lib/game/entities/controllers/gameplay-controller.js
ig.baked=true;ig.module('game.entities.controllers.gameplay-controller').requires('impact.entity','game.entities.gameplay.color-slot','game.entities.gameplay.answer-slot','game.entities.gameplay.answer-evaluator','game.entities.controllers.game-ui-controller','game.entities.controllers.gameover-controller','game.entities.miscellaneous.confetti','game.entities.miscellaneous.background-box','game.entities.miscellaneous.lock','game.entities.miscellaneous.tutorial-cursor',"game.entities.miscellaneous.arrow-tutorial","game.entities.miscellaneous.arrow-shadow").defines(function(){EntityGameplayController=ig.Entity.extend({size:{x:1080,y:1080},anchorPivot:{x:0.5,y:0.5},currentRow:0,currentColumn:0,bgImage:new ig.Image('media/graphics/sprites/games/BG.png'),extra_chance:false,init:function(x,y,settings){ig.game.colorSlot=[];this.parent(x,y,settings);this.uiController=ig.game.spawnEntity(EntityGameUIController,0,0,{controller:this});this.currentColumn=0;this.level=ig.game.sessionData.level;this.color_answer=ig.color_levels.Groups[0].Levels[this.level-1].Color_Answer;this.level_column=ig.color_levels.Groups[0].Levels[this.level-1].Columns;this.color_list_clickable=ig.color_levels.Groups[0].Levels[this.level-1].Color_Choices;this.tries=ig.color_levels.Groups[0].Levels[this.level-1].Max_Tries;this.count_tries=0;this.columncount=0;var space_occupied=this.spawnAnswerSection();this.spawnClickableRow(space_occupied);this.extra_chance_on_tut=false;this.display_Level=this.level;this.setAnchoredPosition(0,0,"center-middle");this.clickables=ig.game.getEntitiesByType(EntityColorSlot);this.answerspot=ig.game.getEntitiesByType(EntityAnswerSlot);this.gameOverChecker=false;this.checking=false;this.currentBox=0;for(i=0;i<this.level_column;i++){ig.game.colorSlot.push('x');}
this.lock_sprite=ig.game.spawnEntity(EntityLock,0,0,{zIndex:this.zIndex+1});this.lock_sprite.setAnchoredPosition(-this.lock_sprite.size.x/2,this.lock_sprite.size.y/2-50,"top-center");if(this.level==1){this.arrowShadow1=ig.game.spawnEntity(EntityArrowShadow,0,0,{zIndex:this.zIndex+1});this.arrowTutorial1=ig.game.spawnEntity(EntityArrowTutorial,0,0,{zIndex:this.zIndex+2});this.arrowShadow1.setAnchoredPosition(-355,-255,"center-middle");this.arrowTutorial1.setAnchoredPosition(-350,-250,"center-middle");this.arrowShadow1.currentAnim.angle=-0.8;this.arrowTutorial1.currentAnim.angle=-0.8;this.arrowShadow2=ig.game.spawnEntity(EntityArrowShadow,0,0,{zIndex:this.zIndex+1});this.arrowTutorial2=ig.game.spawnEntity(EntityArrowTutorial,0,0,{zIndex:this.zIndex+2});this.arrowShadow2.setAnchoredPosition(-55,-385,"center-middle");this.arrowTutorial2.setAnchoredPosition(-50,-380,"center-middle");this.arrowShadow2.currentAnim.flip.x=true;this.arrowShadow2.currentAnim.angle=-0.9;this.arrowTutorial2.currentAnim.flip.x=true;this.arrowTutorial2.currentAnim.angle=-0.9;this.arrowShadow3=ig.game.spawnEntity(EntityArrowShadow,0,0,{zIndex:this.zIndex+1});this.arrowTutorial3=ig.game.spawnEntity(EntityArrowTutorial,0,0,{zIndex:this.zIndex+2});this.arrowShadow3.setAnchoredPosition(+205,-195,"center-middle");this.arrowTutorial3.setAnchoredPosition(+210,-190,"center-middle");this.arrowShadow3.currentAnim.flip.x=true;this.arrowShadow3.currentAnim.angle=1.0;this.arrowTutorial3.currentAnim.flip.x=true;this.arrowTutorial3.currentAnim.angle=1.0;}
else if(this.level==2){this.arrowShadow3=ig.game.spawnEntity(EntityArrowTutorial,0,0,{zIndex:this.zIndex+1});this.arrowShadow3.setAnchoredPosition(+205,-225,"center-middle");this.arrowShadow3.currentAnim.flip.x=true;this.arrowShadow3.currentAnim.angle=1.0;this.arrowTutorial3=ig.game.spawnEntity(EntityArrowTutorial,0,0,{zIndex:this.zIndex+2});this.arrowTutorial3.setAnchoredPosition(+210,-220,"center-middle");this.arrowTutorial3.currentAnim.flip.x=true;this.arrowTutorial3.currentAnim.angle=1.0;}
if(this.level<3&&ig.game.sessionData.tutorialDone==false){this.tutorialIndexPos=0;this.tutorialCursor=ig.game.spawnEntity(EntityTutorialCursor,0,0,{zIndex:this.zIndex+12});var txpos=ig.game.getEntitiesByType(EntityColorSlot)[this.tutorialIndexPos].pos.x;var typos=ig.game.getEntitiesByType(EntityColorSlot)[this.tutorialIndexPos].pos.y;this.tutorialCursor.setAnchoredPosition(txpos-23,typos-20,"center-middle");for(var x=0;x<this.clickables.length;x++){this.clickables[x].isEnabled=false;}
this.clickables[this.tutorialIndexPos].isEnabled=true;}
ig.soundHandler.sfxPlayer.volume(1);this.rewardTemplate=50;if(this.level!=ig.game.sessionData.achieved)this.rewardTemplate=10;},tutorialCursorChangePos:function(){if(!this.extra_chance_on_tut){if(this.tutorialIndexPos<this.color_list_clickable.length-1){this.tutorialIndexPos++;var txpos=ig.game.getEntitiesByType(EntityColorSlot)[this.tutorialIndexPos].pos.x+20;var typos=ig.game.getEntitiesByType(EntityColorSlot)[this.tutorialIndexPos].pos.y+23;this.tutorialCursor.setAnchoredPosition(txpos,typos,"top-left");for(var x=0;x<this.clickables.length;x++){this.clickables[x].isEnabled=false;}
this.clickables[this.tutorialIndexPos].isEnabled=true;}
else{if(this.tutorialCursor!=undefined||null)this.tutorialCursor.kill();var buttonHint=ig.game.getEntitiesByType(EntityButtonHint)[0];buttonHint.tween({offset:{x:0,y:0}},0.5,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){buttonHint.currentAnim.alpha=1;buttonHint.isEnabled=true;}.bind(this)}).start();var buttonExtraTry=ig.game.getEntitiesByType(EntityButtonExtraTry)[0];buttonExtraTry.tween({offset:{x:0,y:0}},0.5,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){buttonExtraTry.currentAnim.alpha=1;buttonExtraTry.isEnabled=true;}.bind(this)}).start();this.uiController.tutorial_trigger=true;for(var x=0;x<this.clickables.length;x++){this.clickables[x].isEnabled=true;}
if(this.arrowShadow1!=null||undefined)this.arrowShadow1.show();if(this.arrowShadow2!=null||undefined)this.arrowShadow2.show();if(this.arrowShadow3!=null||undefined)this.arrowShadow3.show();if(this.arrowTutorial1!=null||undefined)this.arrowTutorial1.show();if(this.arrowTutorial2!=null||undefined)this.arrowTutorial2.show();if(this.arrowTutorial3!=null||undefined)this.arrowTutorial3.show();}}},finishTutorial:function(){this.uiController.tutorial_trigger=false;this.extra_chance_on_tut=true;if(this.arrowShadow1!=null||undefined)this.arrowShadow1.hide();if(this.arrowShadow2!=null||undefined)this.arrowShadow2.hide();if(this.arrowShadow3!=null||undefined)this.arrowShadow3.hide();if(this.arrowTutorial1!=null||undefined)this.arrowTutorial1.hide();if(this.arrowTutorial2!=null||undefined)this.arrowTutorial2.hide();if(this.arrowTutorial3!=null||undefined)this.arrowTutorial3.hide();},spawnClickableRow:function(space_occupied){var column=this.color_list_clickable.length;var boxSize=89;var margin=46.55;var startX=-((boxSize*column)+(margin*(column-1)))*0.5+boxSize*0.5;margin=boxSize+margin;if(column>3)var column_slots_type=1;else var column_slots_type=0;var place_box=ig.game.spawnEntity(EntityBackgroundBox,startX-57,space_occupied-18,{alpha_measure:1,activity:column_slots_type,portraitScaling:true,maxPortraitAnchorScale:1,maxPortraitScale:1});for(var x=0;x<column;x++){var box=ig.game.spawnEntity(EntityColorSlot,startX+5+margin*x,space_occupied+32,{portraitScaling:true,maxPortraitAnchorScale:1,maxPortraitScale:1,color_assigned:this.color_list_clickable[x],controller:this});}},spawnAnswerSection:function(){var column=this.level_column;var row=this.tries
var boxSize=89;var margin_x=46.55;var margin_y=50;var startX=-((boxSize*column)+(margin_x*(column-1)))*0.5+boxSize*0.5;var startY=boxSize*0.5-boxSize*row*0.5-margin_y*Math.floor(row*0.5)+70-69;margin_x=boxSize+margin_x;margin_y=boxSize+margin_y;for(var i=0;i<this.tries;i++){if(column>3)var column_slots_type=1;else var column_slots_type=0;if(i<1)var place_box=ig.game.spawnEntity(EntityBackgroundBox,startX-57,startY+margin_y*i-46,{activity:column_slots_type,portraitScaling:true,maxPortraitAnchorScale:1,maxPortraitScale:1});else var place_box=ig.game.spawnEntity(EntityBackgroundBox,startX-57,startY+margin_y*i-46,{alpha_measure:0.5,offset:{x:0,y:-15},activity:column_slots_type,portraitScaling:true,maxPortraitAnchorScale:1,maxPortraitScale:1});for(var x=0;x<column;x++){var box=ig.game.spawnEntity(EntityAnswerSlot,startX+5+margin_x*x,startY+margin_y*i,{portraitScaling:true,maxPortraitAnchorScale:1,maxPortraitScale:1});}}
return startY+margin_y*i;},update:function()
{this.parent();this.currentBox=this.currentColumn+this.columncount;if(ig.game.colorSlot[this.currentColumn]!='x'&&ig.game.colorSlot[this.currentColumn]!='y'&&this.gameOverChecker==false&&!this.checking){this.updateGraphics();}
if(this.currentColumn>=this.level_column&&this.gameOverChecker==false&&!this.checking){this.checkAnswer()}},updateGraphics:function(){if(this.currentColumn<=this.level_column){this.answerspot[this.currentColumn+this.columncount].updateSlot(ig.game.colorSlot[this.currentColumn]);this.currentColumn++}},checkAnswer:function(){this.checking=!this.checking;var wrong_place_holder=[]
var answered_already=[]
for(i=0;i<this.level_column;i++){wrong_place_holder.push('x')
answered_already.push(this.color_answer[i])}
var answers_correct=0;for(var n=0;n<this.clickables.length;n++){this.clickables[n].isEnabled=false;}
for(var x=0;x<this.level_column;x++){if(this.color_answer[x]==ig.game.colorSlot[x]){answered_already[x]='n'
answers_correct++;if(answers_correct==this.level_column){this.gameWin();break;}}
else if(this.color_answer.includes(ig.game.colorSlot[x])){wrong_place_holder[x]=ig.game.colorSlot[x];ig.game.colorSlot[x]='y';}
else{ig.game.colorSlot[x]='x';}}
this.graphicsChecker(wrong_place_holder,answers_correct,answered_already)},graphicsChecker:function(wrong_place_holder,answers_correct,answered_already){var column=this.level_column;var row=this.tries
var boxSize=89;var margin_x=46.55;var margin_y=50;var startX=-((boxSize*column)+(margin_x*(column-1)))*0.5+boxSize*0.5+5;var startY=boxSize*0.5-boxSize*row*0.5-margin_y*Math.floor(row*0.5)+93-69;margin_x=boxSize+margin_x;margin_y=boxSize+margin_y;var z=0;var counter_sequence=0.1
for(var x=0;x<this.level_column;x++){if(this.color_answer.includes(ig.game.colorSlot[x])){ig.game.spawnEntity(EntityAnswerEvaluator,startX+margin_x*z,startY+margin_y*this.count_tries,{answer_assigned:1,counter:counter_sequence});}
else if(ig.game.colorSlot[x]=='y'&&answered_already.includes(wrong_place_holder[x])){ig.game.spawnEntity(EntityAnswerEvaluator,startX+margin_x*z,startY+margin_y*this.count_tries,{answer_assigned:2,counter:counter_sequence});ig.game.colorSlot[x]='x';}
else{ig.game.spawnEntity(EntityAnswerEvaluator,startX+margin_x*z,startY+margin_y*this.count_tries,{answer_assigned:0,counter:counter_sequence});ig.game.colorSlot[x]='x';}
z++
counter_sequence+=0.2
ig.game.sortEntitiesDeferred();}
this.tween({},counter_sequence,{onComplete:function(){this.resetColumn(answers_correct);}.bind(this)}).start()},resetColumn:function(answers_correct){this.currentColumn=0;this.count_tries++
if(answers_correct!=this.level_column){if(this.count_tries<=this.tries-1){this.checkNextColumn();}
else{if(this.extra_chance){this.currentColumn=0;this.columncount=0;this.count_tries=0;this.currentBox=0;for(var i=0;i<ig.game.getEntitiesByType(EntityAnswerSlot).length;i++){ig.game.getEntitiesByType(EntityAnswerSlot)[i].resetBall();}
for(var n=0;n<ig.game.getEntitiesByType(EntityBackgroundBox).length;n++){if(n>0&&n<ig.game.getEntitiesByType(EntityBackgroundBox).length-1){ig.game.getEntitiesByType(EntityBackgroundBox)[n].resetBox();}}
for(var y=0;y<ig.game.getEntitiesByType(EntityAnswerEvaluator).length;y++){ig.game.getEntitiesByType(EntityAnswerEvaluator)[y].resetEvaluator();}
this.tween({},0.4,{onComplete:function(){for(var x=0;x<this.level_column;x++){if(this.color_answer[x]==ig.game.colorSlot[x]){this.answerspot[x+this.columncount].updateSlot(ig.game.colorSlot[x]);}}}.bind(this)}).start()
this.checking=!this.checking;for(var n=0;n<this.clickables.length;n++){this.clickables[n].isEnabled=true;}
this.extra_chance=false;var extraTryBtn=ig.game.getEntitiesByType(EntityButtonExtraTry)[0];extraTryBtn.tween({offset:{x:0,y:0}},0.5,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){extraTryBtn.currentAnim.alpha=1;extraTryBtn.isEnabled=true;ig.soundHandler.sfxPlayer.play("extra_chance")}.bind(this)}).start();if(this.uiController.tutorial_trigger){this.finishTutorial();}}
else{this.gameOver()};}}},checkNextColumn:function(){var tweened_entity=ig.game.getEntitiesByType(EntityBackgroundBox)[this.count_tries]
tweened_entity.tween({offset:{x:0,y:0}},0.5,{easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){ig.soundHandler.sfxPlayer.play("nextcolumn");tweened_entity.currentAnim.alpha=1;this.columncount+=this.level_column;for(var x=0;x<this.level_column;x++){if(this.color_answer[x]==ig.game.colorSlot[x]){this.answerspot[x+this.columncount].updateSlot(ig.game.colorSlot[x]);}}
this.currentColumn=0
this.checking=!this.checking;for(var n=0;n<this.clickables.length;n++){this.clickables[n].isEnabled=true;}}.bind(this)}).start();},gameOver:function(){this.gameOverChecker=true;this.uiController.disableClickableEntities();for(var x=0;x<this.clickables.length;x++){this.clickables[x].isEnabled=false;}
x
this.tween({},0.8,{manager:this,easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){ig.soundHandler.sfxPlayer.play("gameLose");this.gameover_panel=ig.game.spawnEntity(EntityGameoverController,0,0,{controller:this,gameResult:"lose"});this.gameover_panel.setAnchoredPosition(0,0,"center-middle");}.bind(this)}).start();},gameWin:function(){this.gameOverChecker=true;this.lock_sprite.swap_lock();if(this.tutorialCursor!=undefined||null){this.tutorialCursor.kill();}
this.uiController.disableClickableEntities();this.tween({},0.5,{manager:this,easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){ig.soundHandler.sfxPlayer.play("gameWin");this.confettiSpawn();this.tween({},1,{manager:this,easing:ig.Tween.Easing.Sinusoidal.EaseOut,onComplete:function(){console.log(this.rewardTemplate);this.gameover_panel=ig.game.spawnEntity(EntityGameoverController,0,0,{controller:this,gameResult:"win",rewardTemplate:this.rewardTemplate});this.gameover_panel.setAnchoredPosition(0,0,"center-middle");ig.game.sessionData.playerMoney+=this.rewardTemplate;this.uiController.money=ig.game.sessionData.playerMoney;if(ig.game.sessionData.achieved==this.level){i
ig.game.sessionData.achieved++;if(this.level==2&&ig.game.sessionData.tutorialDone==false){ig.game.sessionData.tutorialDone=true;}}
ig.game.saveAll();}.bind(this)}).start();}.bind(this)}).start();},confettiSpawn:function(){var _batch=20;for(var i=0;i<_batch;i++){var _xAnchor=(ig.system.width/(_batch+1))*(i+1);var _xPt=_xAnchor+Math.random()*100-50;var _yPt=50+Math.random()*1500;for(var _c=0;_c<20;_c++)ig.game.spawnEntity(EntityConfetti,_xPt,_yPt);}},onPauseGame:function()
{this.isPaused=true;},onResumeGame:function()
{this.isPaused=false;},draw:function(){this.parent();var center=ig.responsive.toAnchor(0,0,"center-middle");this.scaleX=(ig.system.width/this.size.x);this.scaleY=(ig.system.height/this.size.y);var scale=(this.scaleX>this.scaleY)?this.scaleX:this.scaleY;ig.responsive.drawScaledImage(this.bgImage,center.x,center.y,scale,scale,0.5,0.5);}});});

// lib/game/levels/gameplay.js
ig.baked=true;ig.module('game.levels.gameplay').requires('impact.image','game.entities.controllers.gameplay-controller','game.entities.pointer').defines(function(){LevelGameplay={"entities":[{"type":"EntityGameplayController","x":0,"y":0},{"type":"EntityPointer","x":0,"y":0}],"layer":[]};});

// lib/game/database/color_levels.js
ig.baked=true;ig.module('game.database.color_levels').defines(function(){ig.color_levels={"Groups":[{"Levels":[{"Level":1,"Columns":3,"Max_Tries":3,"Color_Answer":[0,2,1],"Color_Choices":[0,1,2]},{"Level":2,"Columns":3,"Max_Tries":3,"Color_Answer":[0,1,1],"Color_Choices":[0,1,2]},{"Level":3,"Columns":3,"Max_Tries":3,"Color_Answer":[2,0,3],"Color_Choices":[0,2,3]},{"Level":4,"Columns":3,"Max_Tries":3,"Color_Answer":[1,1,1],"Color_Choices":[1,2,3]},{"Level":5,"Columns":3,"Max_Tries":4,"Color_Answer":[3,2,4],"Color_Choices":[2,3,4]},{"Level":6,"Columns":3,"Max_Tries":4,"Color_Answer":[1,1,4],"Color_Choices":[4,1,0,2]},{"Level":7,"Columns":3,"Max_Tries":4,"Color_Answer":[5,5,5],"Color_Choices":[2,3,4,5]},{"Level":8,"Columns":3,"Max_Tries":4,"Color_Answer":[5,2,1],"Color_Choices":[0,1,2,5]},{"Level":9,"Columns":4,"Max_Tries":4,"Color_Answer":[4,1,4,4],"Color_Choices":[1,4,5]},{"Level":10,"Columns":4,"Max_Tries":4,"Color_Answer":[0,2,0,2],"Color_Choices":[0,1,2]},{"Level":11,"Columns":4,"Max_Tries":4,"Color_Answer":[4,3,0,0],"Color_Choices":[0,3,2,4]},{"Level":12,"Columns":4,"Max_Tries":4,"Color_Answer":[1,5,3,5],"Color_Choices":[0,1,5,3]},{"Level":13,"Columns":4,"Max_Tries":4,"Color_Answer":[2,2,2,2],"Color_Choices":[0,2,1,4]},{"Level":14,"Columns":4,"Max_Tries":4,"Color_Answer":[0,0,2,5],"Color_Choices":[0,1,2,5]},{"Level":15,"Columns":4,"Max_Tries":5,"Color_Answer":[3,0,2,4],"Color_Choices":[3,2,4,0]},{"Level":16,"Columns":4,"Max_Tries":5,"Color_Answer":[0,1,3,0],"Color_Choices":[3,1,0,5]},{"Level":17,"Columns":4,"Max_Tries":5,"Color_Answer":[0,5,2,1],"Color_Choices":[0,5,1,2]},{"Level":18,"Columns":4,"Max_Tries":4,"Color_Answer":[0,3,4,5],"Color_Choices":[0,3,4,5]},{"Level":19,"Columns":4,"Max_Tries":3,"Color_Answer":[4,2,4,4],"Color_Choices":[3,2,1,4]},{"Level":20,"Columns":4,"Max_Tries":2,"Color_Answer":[5,1,2,1],"Color_Choices":[4,1,5,2]}]}]}});

// lib/game/main.js
ig.baked=true;ig.module('game.main').requires('impact.game',"plugins.patches.fps-limit-patch","plugins.patches.timer-patch",'plugins.patches.user-agent-patch','plugins.patches.webkit-image-smoothing-patch','plugins.patches.windowfocus-onMouseDown-patch','plugins.patches.input-patch','plugins.data.vector','plugins.data.color-rgb','plugins.font.font-loader','plugins.handlers.dom-handler','plugins.handlers.size-handler','plugins.handlers.api-handler','plugins.handlers.visibility-handler','plugins.audio.sound-handler','plugins.io.io-manager','plugins.io.storage-manager','plugins.splash-loader','plugins.tween','plugins.tweens-handler','plugins.url-parameters','plugins.director','plugins.impact-storage','plugins.fullscreen','plugins.scale','plugins.responsive.responsive-plugin','plugins.branding.splash','game.entities.branding-logo-placeholder','game.entities.buttons.button-more-games','game.entities.pointer','game.entities.pointer-selector','game.entities.select','game.levels.opening','game.levels.title','game.levels.levelpage','game.levels.gameplay','game.database.color_levels').defines(function(){this.START_OBFUSCATION;this.FRAMEBREAKER;MyGame=ig.Game.extend({name:"MJS-Guess-the-Color",version:"1.0.0",frameworkVersion:"1.1.2",sessionData:{},colorSlot:[],io:null,paused:false,tweens:null,init:function(){this.tweens=new ig.TweensHandler();this.setupMarketJsGameCenter();this.io=new IoManager();this.setupUrlParams=new ig.UrlParameters();this.initData();this.removeLoadingWheel();this.setupStorageManager();this.finalize();var bgm=this.getMusicVolume();var sfx=this.getSoundVolume();this.setMusicVolume(bgm);this.setSoundVolume(sfx);},initData:function(){return this.sessionData={sound:true,music:true,level:1,achieved:1,score:0,playerMoney:80,tutorialDone:false};},setupMarketJsGameCenter:function(){if(_SETTINGS){if(_SETTINGS['MarketJSGameCenter']){var el=ig.domHandler.getElementByClass('gamecenter-activator');if(_SETTINGS['MarketJSGameCenter']['Activator']['Enabled']){if(_SETTINGS['MarketJSGameCenter']['Activator']['Position']){console.log('MarketJSGameCenter activator settings present ....')
ig.domHandler.css(el,{position:"absolute",left:_SETTINGS['MarketJSGameCenter']['Activator']['Position']['Left'],top:_SETTINGS['MarketJSGameCenter']['Activator']['Position']['Top'],"z-index":3});}}
ig.domHandler.show(el);}else{console.log('MarketJSGameCenter settings not defined in game settings')}}},finalize:function(){this.start();ig.sizeHandler.reorient();},removeLoadingWheel:function(){try{$('#ajaxbar').css('background','none');}catch(err){console.log(err)}},showDebugMenu:function(){console.log('showing debug menu ...');ig.Entity._debugShowBoxes=true;$('.ig_debug').show();},start:function(){this.resetPlayerStats();if(ig.ua.mobile){this.director=new ig.Director(this,[LevelOpening,LevelTitle,LevelPage,LevelGameplay]);}else{this.director=new ig.Director(this,[LevelOpening,LevelTitle,LevelPage,LevelGameplay]);}
if(_SETTINGS['Branding']['Splash']['Enabled']){try{this.branding=new ig.BrandingSplash();}catch(err){console.log(err)
console.log('Loading original levels ...')
this.director.loadLevel(this.director.currentLevel);}}else{this.director.loadLevel(this.director.currentLevel);}
if(_SETTINGS['Branding']['Splash']['Enabled']||_SETTINGS['DeveloperBranding']['Splash']['Enabled']){this.spawnEntity(EntityPointerSelector,50,50);}},fpsCount:function(){if(!this.fpsTimer){this.fpsTimer=new ig.Timer(1);}
if(this.fpsTimer&&this.fpsTimer.delta()<0){if(this.fpsCounter!=null){this.fpsCounter++;}else{this.fpsCounter=0;}}else{ig.game.fps=this.fpsCounter;this.fpsCounter=0;this.fpsTimer.reset();}},endGame:function(){console.log('End game')
ig.soundHandler.bgmPlayer.stop();ig.apiHandler.run("MJSEnd");},resetPlayerStats:function(){ig.log('resetting player stats ...');this.playerStats={id:this.playerStats?this.playerStats.id:null,}},pauseGame:function(){ig.system.stopRunLoop.call(ig.system);ig.game.tweens.onSystemPause();console.log('Game Paused');},resumeGame:function(){ig.system.startRunLoop.call(ig.system);ig.game.tweens.onSystemResume();console.log('Game Resumed');},showOverlay:function(divList){for(i=0;i<divList.length;i++){if($('#'+divList[i]))$('#'+divList[i]).show();if(document.getElementById(divList[i]))document.getElementById(divList[i]).style.visibility="visible";}},hideOverlay:function(divList){for(i=0;i<divList.length;i++){if($('#'+divList[i]))$('#'+divList[i]).hide();if(document.getElementById(divList[i]))document.getElementById(divList[i]).style.visibility="hidden";}},currentBGMVolume:1,addition:0.1,setSoundVolume:function(volume){if(volume)
ig.soundHandler.unmuteSFX(true);else
ig.soundHandler.muteSFX(true);ig.game.sessionData.sound=volume;},getSoundVolume:function(){var volume=ig.game.sessionData.sound;if(volume==null)volume=true;return volume;},setMusicVolume:function(volume){if(volume)
ig.soundHandler.unmuteBGM(true);else
ig.soundHandler.muteBGM(true);ig.game.sessionData.music=volume;console.log("Save music : "+ig.game.sessionData.music);},getMusicVolume:function(){var volume=ig.game.sessionData.music;if(volume==null)volume=true;return volume;},update:function(){if(this.paused){this.updateWhilePaused();this.checkWhilePaused();}else{this.parent();this.tweens.update(this.tweens.now());if(ig.ua.mobile&&ig.soundHandler)
{ig.soundHandler.forceLoopBGM();}}},updateWhilePaused:function(){for(var i=0;i<this.entities.length;i++){if(this.entities[i].ignorePause){this.entities[i].update();}}},checkWhilePaused:function(){var hash={};for(var e=0;e<this.entities.length;e++){var entity=this.entities[e];if(entity.ignorePause){if(entity.type==ig.Entity.TYPE.NONE&&entity.checkAgainst==ig.Entity.TYPE.NONE&&entity.collides==ig.Entity.COLLIDES.NEVER){continue;}
var checked={},xmin=Math.floor(entity.pos.x/this.cellSize),ymin=Math.floor(entity.pos.y/this.cellSize),xmax=Math.floor((entity.pos.x+entity.size.x)/this.cellSize)+1,ymax=Math.floor((entity.pos.y+entity.size.y)/this.cellSize)+1;for(var x=xmin;x<xmax;x++){for(var y=ymin;y<ymax;y++){if(!hash[x]){hash[x]={};hash[x][y]=[entity];}else if(!hash[x][y]){hash[x][y]=[entity];}else{var cell=hash[x][y];for(var c=0;c<cell.length;c++){if(entity.touches(cell[c])&&!checked[cell[c].id]){checked[cell[c].id]=true;ig.Entity.checkPair(entity,cell[c]);}}
cell.push(entity);}}}}}},draw:function(){this.parent();this.dctf();},dctf:function(){this.COPYRIGHT;},clearCanvas:function(ctx,width,height){var canvas=ctx.canvas;ctx.clearRect(0,0,width,height);canvas.style.display="none";canvas.offsetHeight;canvas.style.display="inherit";},drawDebug:function(){if(!ig.global.wm){this.debugEnable();if(this.viewDebug){ig.system.context.fillStyle='#000000';ig.system.context.globalAlpha=0.35;ig.system.context.fillRect(0,0,ig.system.width/4,ig.system.height);ig.system.context.globalAlpha=1;if(this.debug&&this.debug.length>0){for(i=0;i<this.debug.length;i++){ig.system.context.font="10px Arial";ig.system.context.fillStyle='#ffffff';ig.system.context.fillText(this.debugLine-this.debug.length+i+": "+this.debug[i],10,50+10*i);}}}}},debugCL:function(consoleLog){if(!this.debug){this.debug=[];this.debugLine=1;this.debug.push(consoleLog);}else{if(this.debug.length<50){this.debug.push(consoleLog);}else{this.debug.splice(0,1);this.debug.push(consoleLog);}
this.debugLine++;}
console.log(consoleLog);},debugEnable:function(){if(ig.input.pressed('click')){this.debugEnableTimer=new ig.Timer(2);}
if(this.debugEnableTimer&&this.debugEnableTimer.delta()<0){if(ig.input.released('click')){this.debugEnableTimer=null;}}else if(this.debugEnableTimer&&this.debugEnableTimer.delta()>0){this.debugEnableTimer=null;if(this.viewDebug){this.viewDebug=false;}else{this.viewDebug=true;}}},drawVersion:function(){if(typeof(_SETTINGS.Versioning)!=="undefined"&&_SETTINGS.Versioning!==null){if(_SETTINGS.Versioning.DrawVersion){var ctx=ig.system.context;fontSize=_SETTINGS.Versioning.FontSize,fontFamily=_SETTINGS.Versioning.FontFamily,fillStyle=_SETTINGS.Versioning.FillStyle
ctx.save();ctx.textBaseline="bottom";ctx.textAlign="left";ctx.font=fontSize+" "+fontFamily||"10px Arial";ctx.fillStyle=fillStyle||'#ffffff';ctx.fillText("v"+_SETTINGS.Versioning.Version+"+build."+_SETTINGS.Versioning.Build,10,ig.system.height-10);ctx.restore();}}}});ig.domHandler=null;ig.domHandler=new ig.DomHandler();ig.domHandler.forcedDeviceDetection();ig.domHandler.forcedDeviceRotation();ig.apiHandler=new ig.ApiHandler();ig.sizeHandler=new ig.SizeHandler(ig.domHandler);var fps=60;if(ig.ua.mobile){ig.Sound.enabled=false;ig.main('#canvas',MyGame,fps,ig.sizeHandler.mobile.actualResolution.x,ig.sizeHandler.mobile.actualResolution.y,ig.sizeHandler.scale,ig.SplashLoader);ig.sizeHandler.resize();}else{ig.main('#canvas',MyGame,fps,ig.sizeHandler.desktop.actualResolution.x,ig.sizeHandler.desktop.actualResolution.y,ig.sizeHandler.scale,ig.SplashLoader);}
ig.visibilityHandler=new ig.VisibilityHandler();ig.soundHandler=null;ig.soundHandler=new ig.SoundHandler();ig.sizeHandler.reorient();this.DOMAINLOCK_BREAKOUT_ATTEMPT;this.END_OBFUSCATION;});console.log=function(){};